!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return r.call(e,t)}function i(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function s(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var a=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=new RegExp(a.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=n(28);var p=/[&<>"]/,f=/[&<>"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return d[e]}var m=/[.?*+^$[\]\\(){}|-]/g;var v=n(14);t.lib={},t.lib.mdurl=n(29),t.lib.ucmicro=n(63),t.assign=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=o,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(a,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(l,function(e,t,n){return t||function(e,t){var n=0;return o(u,t)?u[t]:35===t.charCodeAt(0)&&c.test(t)&&i(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?s(n):e}(e,n)})},t.isValidEntityCode=i,t.fromCodePoint=s,t.escapeHtml=function(e){return p.test(e)?e.replace(f,h):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return v.test(e)},t.escapeRE=function(e){return e.replace(m,"\\$&")},t.normalizeReference=function(e){return e.trim().replace(/\s+/g," ").toUpperCase()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(7),i=Object.create(null),s=function(e,t,n){this.ranges=n||[new l(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=r.Slice.empty);for(var n=t.content.lastChild,o=null,i=0;i<t.openEnd;i++)o=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,l=0;l<a.length;l++){var c=a[l],u=c.$from,p=c.$to,f=e.mapping.slice(s);e.replaceRange(f.map(u.pos),f.map(p.pos),l?r.Slice.empty:t),0==l&&v(e,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,l=e.mapping.slice(n),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),v(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var r=e.parent.inlineContent?new c(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?m(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):m(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new d(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new d(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new d(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var l=function(e,t){this.$from=e,this.$to=t},c=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),e.prototype.replace.call(this,t,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new u(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i?n=r:(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0&&(n=r)),new t(n,r)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",c);var u=function(e,t){this.anchor=e,this.head=t};u.prototype.map=function(e){return new u(e.map(this.anchor),e.map(this.head))},u.prototype.resolve=function(e){return c.between(e.resolve(this.anchor),e.resolve(this.head))};var p=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new f(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);p.prototype.visible=!1,s.jsonID("node",p);var f=function(e){this.anchor=e};f.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new u(r,r):new f(r)},f.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&p.isSelectable(n)?new p(t):s.near(t)};var d=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return h},t}(s);s.jsonID("all",d);var h={map:function(){return this},resolve:function(e){return new d(e)}};function m(e,t,n,r,o,i){if(t.inlineContent)return c.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&p.isSelectable(a))return p.create(e,n-(o<0?a.nodeSize:0))}else{var l=m(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function v(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i,a=e.steps[r];if(a instanceof o.ReplaceStep||a instanceof o.ReplaceAroundStep)e.mapping.maps[r].forEach(function(e,t,n,r){null==i&&(i=r)}),e.setSelection(s.near(e.doc.resolve(i),n))}}var g=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o))},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(o.Transform);function y(e,t){return t&&e?e.bind(t):e}var b=function(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)},w=[new b("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new b("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new b("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],_=function(e,t){var n=this;this.schema=e,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new b(e.key,e.spec.state,e))})},E=function(e){this.config=e},S={schema:{},plugins:{},tr:{}};S.schema.get=function(){return this.config.schema},S.plugins.get=function(){return this.config.plugins},E.prototype.apply=function(e){return this.applyTransaction(e).state},E.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},E.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},E.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new E(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<C.length;i++)C[i](this,e,t);return t},S.tr.get=function(){return new g(this)},E.create=function(e){for(var t=new _(e.schema||e.doc.type.schema,e.plugins),n=new E(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},E.prototype.reconfigure=function(e){for(var t=new _(e.schema||this.schema,e.plugins),n=t.fields,r=new E(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},E.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},E.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new _(e.schema,e.plugins),i=new E(o);return o.fields.forEach(function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[o.name]=c.fromJSON.call(l,e,t[a],i))}i[o.name]=o.init(e,i)}}),i},E.addApplyListener=function(e){C.push(e)},E.removeApplyListener=function(e){var t=C.indexOf(e);t>-1&&C.splice(t,1)},Object.defineProperties(E.prototype,S);var C=[];var T=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:O("plugin")};T.prototype.getState=function(e){return e[this.key]};var k=Object.create(null);function O(e){return e in k?e+"$"+ ++k[e]:(k[e]=0,e+"$")}var x=function(e){void 0===e&&(e="key"),this.key=O(e)};x.prototype.get=function(e){return e.config.pluginsByKey[this.key]},x.prototype.getState=function(e){return e[this.key]},t.Selection=s,t.SelectionRange=l,t.TextSelection=c,t.NodeSelection=p,t.AllSelection=d,t.Transaction=g,t.EditorState=E,t.Plugin=T,t.PluginKey=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(1),s=n(9),a=n(5),l=n(7),c=n(13);if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(e){return u.get(e)},o=function(e,t){return u.set(e,t),t}}else{var p=[],f=0;r=function(e){for(var t=0;t<p.length;t+=2)if(p[t]==e)return p[t+1]},o=function(e,t){return 10==f&&(f=0),p[f++]=e,p[f++]=t}}var d=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},h=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function m(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}h.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(var l=1;s<this.height&&this.map[t+this.width*l]==n;l++)s++;return new d(r,o,i,s)}}throw new RangeError("No cell with offset "+e+" found")},h.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},h.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},h.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(t),l=a.left,c=a.right,u=a.top,p=a.bottom;return new d(Math.min(r,l),Math.min(i,u),Math.max(o,c),Math.max(s,p))},h.prototype.cellsInRect=function(e){for(var t=[],n=[],r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,s=this.map[i];n.indexOf(s)>-1||(n.push(s),o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t},h.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var s=t+e*this.width,a=(e+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}},h.get=function(e){return r(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var u=0;u<o.childCount;u++){var p=o.child(u);i+=p.attrs.colspan,p.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,s=[],a=0,l=t*n;a<l;a++)r[a]=0;for(var c=0,u=0;c<n;c++){var p=e.child(c);u++;for(var f=0;;f++){for(;o<r.length&&0!=r[o];)o++;if(f==p.childCount)break;for(var d=p.child(f),v=d.attrs,g=v.colspan,y=v.rowspan,b=v.colwidth,w=0;w<y;w++){if(w+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:y-w});break}for(var _=o+w*t,E=0;E<g;E++){0==r[_+E]?r[_+E]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:g-E});var S=b&&b[E];if(S){var C=(_+E)%t*2,T=s[C];null==T||T!=S&&1==s[C+1]?(s[C]=S,s[C+1]=1):T==S&&s[C+1]++}}}o+=g,u+=d.nodeSize}for(var k=(c+1)*t,O=0;o<k;)0==r[o++]&&O++;O&&(i||(i=[])).push({type:"missing",row:c,n:O}),u++}for(var x=new h(t,n,r,i),I=!1,D=0;!I&&D<s.length;D+=2)null!=s[D]&&s[D+1]<n&&(I=!0);I&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o=[];r<e.map.length;r++){var i=e.map[r];if(!(o.indexOf(i)>-1)){o.push(i);for(var s=n.nodeAt(i),a=null,l=0;l<s.attrs.colspan;l++){var c=(r+l)%e.width,u=t[2*c];null==u||s.attrs.colwidth&&s.attrs.colwidth[l]==u||((a||(a=m(s.attrs)))[l]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(x,s,e);return x}(e))};var v=new i.PluginKey("selectingCells");function g(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function y(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function b(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:g(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function w(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function _(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function E(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function S(e,t,n){var r=e.start(-1),o=h.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function C(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function T(e,t,n){void 0===n&&(n=1);var r=C(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(e){return e>0})||(r.colwidth=null)),r}function k(e,t,n){void 0===n&&(n=1);var r=C(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var O=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),o=h.get(r),s=t.start(-1),a=o.rectBetween(t.pos-s,n.pos-s),l=t.node(0),c=o.cellsInRect(a).filter(function(e){return e!=n.pos-s});c.unshift(n.pos-s);var u=c.map(function(e){var t=r.nodeAt(e),n=e+s+1;return new i.SelectionRange(l.resolve(n),l.resolve(n+t.content.size))});e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(w(r)&&w(o)&&E(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?t.rowSelection(r,o):s&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return i.TextSelection.between(r,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=h.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o=[],i=[],s=r.top;s<r.bottom;s++){for(var l=[],c=s*t.width+r.left,u=r.left;u<r.right;u++,c++){var p=t.map[c];if(-1==o.indexOf(p)){o.push(p);var f=t.findCell(p),d=e.nodeAt(p),m=r.left-f.left,v=f.right-r.right;if(m>0||v>0){var g=d.attrs;m>0&&(g=T(g,0,m)),v>0&&(g=T(g,g.colspan-v,v)),d=f.left<r.left?d.type.createAndFill(g):d.type.create(g,d.content)}if(f.top<r.top||f.bottom>r.bottom){var y=C(d.attrs,"rowspan",Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top));d=f.top<r.top?d.type.createAndFill(y):d.type.create(y,d.content)}l.push(d)}}i.push(e.child(s).copy(a.Fragment.from(l)))}var b=this.isColSelection()&&this.isRowSelection()?e:i;return new a.Slice(a.Fragment.from(b),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a.Slice.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],l=s.$from,c=s.$to,u=t.mapping.slice(r);t.replace(u.map(l.pos),u.map(c.pos),i?a.Slice.empty:n)}var p=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);p&&t.setSelection(p)},t.prototype.replaceWith=function(e,t){this.replace(e,new a.Slice(a.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=h.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=h.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=h.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=h.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new x(this.$anchorCell.pos,this.$headCell.pos)},t}(i.Selection);O.prototype.visible=!1,i.Selection.jsonID("cell",O);var x=function(e,t){this.anchor=e,this.head=t};function I(e){if(!(e.selection instanceof O))return null;var t=[];return e.selection.forEachCell(function(e,n){t.push(s.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))}),s.DecorationSet.create(e.doc,t)}function D(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(function(e){return Number(e)}):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in t){var a=t[s].getFromDOM,l=a&&a(e);null!=l&&(i[s]=l)}return i}function M(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function A(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}function R(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,l=[];if("row"==i)for(var c=0;c<t.childCount;c++){var u=t.child(c).content,p=c?0:Math.max(0,n-1),f=c<t.childCount-1?0:Math.max(0,r-1);(p||f)&&(u=N(A(s).row,new a.Slice(u,p,f)).content),l.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||r?N(A(s).row,new a.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,l=s.rowspan,c=s.colspan,u=r;u<r+l;u++)n[u]=(n[u]||0)+c;for(var p=0,f=0;f<n.length;f++)p=Math.max(p,n[f]);for(var d=0;d<n.length;d++)if(d>=t.length&&t.push(a.Fragment.empty),n[d]<p){for(var h=A(e).cell.createAndFill(),m=[],v=n[d];v<p;v++)m.push(h);t[d]=t[d].append(a.Fragment.from(m))}return{height:t.length,width:p,rows:t}}(s,l)}function N(e,t){var n=e.createAndFill();return new l.Transform(n).replace(0,n.content.size,t).doc}function L(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var s=[],l=[],c=0;c<i.length;c++){for(var u=i[c],p=[],f=s[c]||0,d=0;f<t;d++){var h=u.child(d%u.childCount);f+h.attrs.colspan>t&&(h=h.type.create(T(h.attrs,h.attrs.colspan,f+h.attrs.colspan-t),h.content)),p.push(h),f+=h.attrs.colspan;for(var m=1;m<h.attrs.rowspan;m++)s[c+m]=(s[c+m]||0)+h.attrs.colspan}l.push(a.Fragment.from(p))}i=l,r=t}if(o!=n){for(var v=[],g=0,y=0;g<n;g++,y++){for(var b=[],w=i[y%o],_=0;_<w.childCount;_++){var E=w.child(_);g+E.attrs.rowspan>n&&(E=E.type.create(C(E.attrs,"rowspan",n-E.attrs.rowspan),E.content)),b.push(E)}v.push(a.Fragment.from(b))}i=v,o=n}return{width:r,height:o,rows:i}}function P(e,t,n,r,o,i,s,a){if(0==s||s==t.height)return!1;for(var l=!1,c=o;c<i;c++){var u=s*t.width+c,p=t.map[u];if(t.map[u-t.width]==p){l=!0;var f=n.nodeAt(p),d=t.findCell(p),h=d.top,m=d.left;e.setNodeMarkup(e.mapping.slice(a).map(p+r),null,C(f.attrs,"rowspan",s-h)),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),f.type.createAndFill(C(f.attrs,"rowspan",h+f.attrs.rowspan-s))),c+=f.attrs.colspan-1}}return l}function F(e,t,n,r,o,i,s,a){if(0==s||s==t.width)return!1;for(var l=!1,c=o;c<i;c++){var u=c*t.width+s,p=t.map[u];if(t.map[u-1]==p){l=!0;var f=n.nodeAt(p),d=t.colCount(p),h=e.mapping.slice(a).map(p+r);e.setNodeMarkup(h,null,T(f.attrs,s-d,f.attrs.colspan-(s-d))),e.insert(h+f.nodeSize,f.type.createAndFill(T(f.attrs,0,s-d))),c+=f.attrs.rowspan-1}}return l}function q(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,s=h.get(i),l=r.top,c=r.left,u=c+o.width,p=l+o.height,f=e.tr,d=0;function m(){i=n?f.doc.nodeAt(n-1):f.doc,s=h.get(i),d=f.mapping.maps.length}(function(e,t,n,r,o,i,s){var l,c,u=A(e.doc.type.schema);if(o>t.width)for(var p=0,f=0;p<t.height;p++){var d=n.child(p);f+=d.nodeSize;var h=[],m=void 0;m=null==d.lastChild||d.lastChild.type==u.cell?l||(l=u.cell.createAndFill()):c||(c=u.header_cell.createAndFill());for(var v=t.width;v<o;v++)h.push(m);e.insert(e.mapping.slice(s).map(f-1+r),h)}if(i>t.height){for(var g=[],y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var w=!(y>=t.width)&&n.nodeAt(t.map[b+y]).type==u.header_cell;g.push(w?c||(c=u.header_cell.createAndFill()):l||(l=u.cell.createAndFill()))}for(var _=u.row.create(null,a.Fragment.from(g)),E=[],S=t.height;S<i;S++)E.push(_);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),E)}return!(!l&&!c)})(f,s,i,n,u,p,d)&&m(),P(f,s,i,n,c,u,l,d)&&m(),P(f,s,i,n,c,u,p,d)&&m(),F(f,s,i,n,l,p,c,d)&&m(),F(f,s,i,n,l,p,u,d)&&m();for(var v=l;v<p;v++){var g=s.positionAt(v,c,i),y=s.positionAt(v,u,i);f.replace(f.mapping.slice(d).map(g+n),f.mapping.slice(d).map(y+n),new a.Slice(o.rows[v-l],0,0))}m(),f.setSelection(new O(f.doc.resolve(n+s.positionAt(l,c,i)),f.doc.resolve(n+s.positionAt(p-1,u-1,i)))),t(f)}x.prototype.map=function(e){return new x(e.map(this.anchor),e.map(this.head))},x.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&E(t,n)?new O(t,n):i.Selection.near(n,1)};var z=c.keydownHandler({ArrowLeft:j("horiz",-1),ArrowRight:j("horiz",1),ArrowUp:j("vert",-1),ArrowDown:j("vert",1),"Shift-ArrowLeft":V("horiz",-1),"Shift-ArrowRight":V("horiz",1),"Shift-ArrowUp":V("vert",-1),"Shift-ArrowDown":V("vert",1),Backspace:G,"Mod-Backspace":G,Delete:G,"Mod-Delete":G});function B(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function j(e,t){return function(n,r,o){var s=n.selection;if(s instanceof O)return B(n,r,i.Selection.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var a=W(o,e,t);if(null==a)return!1;if("horiz"==e)return B(n,r,i.Selection.near(n.doc.resolve(s.head+t),t));var l,c=n.doc.resolve(a),u=S(c,e,t);return l=u?i.Selection.near(u,1):t<0?i.Selection.near(n.doc.resolve(c.before(-1)),-1):i.Selection.near(n.doc.resolve(c.after(-1)),1),B(n,r,l)}}function V(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof O)){var s=W(o,e,t);if(null==s)return!1;i=new O(n.doc.resolve(s))}var a=S(i.$headCell,e,t);return!!a&&B(n,r,new O(i.$anchorCell,a))}}function G(e,t){var n=e.selection;if(!(n instanceof O))return!1;if(t){var r=e.tr,o=A(e.schema).cell.createAndFill().content;n.forEachCell(function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new a.Slice(o,0,0))}),r.docChanged&&t(r)}return!0}function U(e,t){var n=g(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new O(n))),!0)}function H(e,t,n){if(!y(e.state))return!1;var r=R(n),o=e.state.selection;if(o instanceof O){r||(r={width:1,height:1,rows:[a.Fragment.from(N(A(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),l=h.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=L(r,l.right-l.left,l.bottom-l.top),q(e.state,e.dispatch,s,l,r),!0}if(r){var c=b(e.state),u=c.start(-1);return q(e.state,e.dispatch,u,h.get(c.node(-1)).findCell(c.pos-u),r),!0}return!1}function $(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=Y(e,t.target);if(t.shiftKey&&e.state.selection instanceof O)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=g(e.state.selection.$anchor))&&J(e,t).pos!=n.pos)o(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function o(t,n){var r=J(e,n),o=null==v.getState(e.state);if(!r||!E(t,r)){if(!o)return;r=t}var i=new O(t,r);if(o||!e.state.selection.eq(i)){var s=e.state.tr.setSelection(i);o&&s.setMeta(v,t.pos),e.dispatch(s)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),null!=v.getState(e.state)&&e.dispatch(e.state.tr.setMeta(v,-1))}function s(n){var s,a=v.getState(e.state);if(null!=a)s=e.state.doc.resolve(a);else if(Y(e,n.target)!=r&&!(s=J(e,t)))return i();s&&o(s,n)}}function W(e,t,n){if(!(e.state.selection instanceof i.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=r.before(o),l="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function Y(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function J(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?g(e.state.doc.resolve(n.pos)):null}function X(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=h.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,s,a=[],l=0;l<o.height;l++)a.push(0);for(var c=0;c<o.problems.length;c++){var u=o.problems[c];if("collision"==u.type){for(var p=t.nodeAt(u.pos),f=0;f<p.attrs.rowspan;f++)a[u.row+f]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,T(p.attrs,p.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var d=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,C(d.attrs,"rowspan",d.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var m=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,C(m.attrs,"colwidth",u.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==i&&(i=v),s=v);for(var g=0,y=n+1;g<o.height;g++){var b=t.child(g),w=y+b.nodeSize,_=a[g];if(_>0){var E="cell";b.firstChild&&(E=b.firstChild.type.spec.tableRole);for(var S=[],k=0;k<_;k++)S.push(A(e.schema)[E].createAndFill());var O=0!=g&&i!=g-1||s!=g?w-1:y+1;r.insert(r.mapping.map(O),S)}y=w}return r}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,s=n.childCount;e:for(var a=0,l=0;a<s;a++){for(var c=n.child(a),u=l,p=Math.min(i,a+3);u<p;u++)if(t.child(u)==c){l=u+1,r+=c.nodeSize;continue e}o(c,r),l<i&&t.child(l).sameMarkup(c)?e(t.child(l),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function K(e){var t,n=e.selection,r=b(e),o=r.node(-1),i=r.start(-1),s=h.get(o);return(t=n instanceof O?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,t.map=s,t.table=o,t}function Q(e,t,n){var r=t.map,o=t.tableStart,i=t.table,s=n>0?-1:0;(function(e,t,n){for(var r=A(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var l=a*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],u=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(o+c),null,k(u.attrs,n-r.colCount(c))),a+=u.attrs.rowspan-1}else{var p=null==s?A(i.type.schema).cell:i.nodeAt(r.map[l+s]).type,f=r.positionAt(a,n,i);e.insert(e.mapping.map(o+f),p.createAndFill())}}return e}function Z(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=e.mapping.maps.length,a=0;a<r.height;){var l=a*r.width+n,c=r.map[l],u=o.nodeAt(c);if(n>0&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)e.setNodeMarkup(e.mapping.slice(s).map(i+c),null,T(u.attrs,n-r.colCount(c)));else{var p=e.mapping.slice(s).map(i+c);e.delete(p,p+u.nodeSize)}a+=u.attrs.rowspan}}function ee(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=[],c=n>0?-1:0;(function(e,t,n){for(var r=A(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0})(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var u=0,p=r.width*n;u<r.width;u++,p++)if(n>0&&n<r.height&&r.map[p]==r.map[p-r.width]){var f=r.map[p],d=i.nodeAt(f).attrs;e.setNodeMarkup(o+f,null,C(d,"rowspan",d.rowspan+1)),u+=d.colspan-1}else{var h=null==c?A(i.type.schema).cell:i.nodeAt(r.map[p+c*r.width]).type;l.push(h.createAndFill())}return e.insert(s,A(i.type.schema).row.create(null,l)),e}function te(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var l=s+o.child(n).nodeSize,c=e.mapping.maps.length;e.delete(s+i,l+i);for(var u=0,p=n*r.width;u<r.width;u++,p++){var f=r.map[p];if(n>0&&f==r.map[p-r.width]){var d=o.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(c).map(f+i),null,C(d,"rowspan",d.rowspan-1)),u+=d.colspan-1}else if(n<r.width&&f==r.map[p+r.width]){var h=o.nodeAt(f),m=h.type.create(C(h.attrs,"rowspan",h.attrs.rowspan-1),h.content),v=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(c).map(i+v),m),u+=h.attrs.colspan-1}}}function ne(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function re(e){return function(t,n){if(!y(t))return!1;if(n){for(var r=A(t.schema),o=K(t),i=t.tr,s=o.map.cellsInRect("column"==e?new d(o.left,0,o.right,o.map.height):"row"==e?new d(0,o.top,o.map.width,o.bottom):o),a=s.map(function(e){return o.table.nodeAt(e)}),l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(0==i.steps.length)for(var c=0;c<s.length;c++)i.setNodeMarkup(o.tableStart+s[c],r.header_cell,a[c].attrs);n(i)}return!0}}var oe=re("row"),ie=re("column"),se=re("cell");var ae=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),le(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function le(e,t,n,r,o,i){for(var s=0,a=!0,l=t.firstChild,c=e.firstChild,u=0,p=0;u<c.childCount;u++)for(var f=c.child(u).attrs,d=f.colspan,h=f.colwidth,m=0;m<d;m++,p++){var v=o==p?i:h&&h[m],g=v?v+"px":"";s+=v||r,v||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}ae.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,le(e,this.colgroup,this.table,this.cellMinWidth),!0)},ae.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var ce=new i.PluginKey("tableColumnResizing");var ue=function(e,t){this.activeHandle=e,this.dragging=t};function pe(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=g(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=h.get(o.node(-1)),s=o.start(-1),a=i.map.indexOf(o.pos-s);return a%i.width==0?-1:s+i.map[a-1]}function fe(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function de(e,t){e.dispatch(e.state.tr.setMeta(ce,{setHandle:t}))}function he(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}ue.prototype.apply=function(e){var t=this,n=e.getMeta(ce);if(n&&null!=n.setHandle)return new ue(n.setHandle,null);if(n&&void 0!==n.setDragging)return new ue(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);w(e.doc.resolve(r))||(r=null),t=new ue(r,t.dragging)}return t},t.tableEditing=function(){return new i.Plugin({key:v,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(v);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:I,handleDOMEvents:{mousedown:$},createSelectionBetween:function(e){if(null!=v.getState(e.state))return e.state.selection},handleTripleClick:U,handleKeyDown:z,handlePaste:H},appendTransaction:function(e,t,n){return function(e,t){var n,r,o=(t||e).selection,s=(t||e).doc;if(o instanceof i.NodeSelection&&(r=o.node.type.spec.tableRole))if("cell"==r||"header_cell"==r)n=O.create(s,o.from);else if("row"==r){var a=s.resolve(o.from+1);n=O.rowSelection(a,a)}else{var l=h.get(o.node),c=o.from+1,u=c+l.map[l.width*l.height-1];n=O.create(s,c+1,u)}else o instanceof i.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(o)?n=i.TextSelection.create(s,o.from):o instanceof i.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var a=o.depth;a>0;a--){var l=o.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return t!==n&&0===o.parentOffset}(o)&&(n=i.TextSelection.create(s,o.$from.start(),o.$from.end()));return n&&(t||(t=e.tr)).setSelection(n),t}(n,X(n,t))}})},t.fixTables=X,t.handlePaste=H,t.cellAround=g,t.isInTable=y,t.selectionCell=b,t.moveCellForward=_,t.inSameTable=E,t.findCell=function(e){return h.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return h.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=S,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return D(e,t)}}],toDOM:function(e){return["td",M(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return D(e,t)}}],toDOM:function(e){return["th",M(e,t),0]}}}},t.CellSelection=O,t.TableMap=h,t.columnResizing=function(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=ae);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:ce,state:{init:function(e,t){return this.spec.props.nodeViews[A(t.schema).table.name]=function(e,t){return new r(e,n,t)},new ue(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return ce.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,o){var i=ce.getState(e.state);if(!i.dragging){var s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,u=l.right;t.clientX-c<=n?a=pe(e,t,"left"):u-t.clientX<=n&&(a=pe(e,t,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var p=e.state.doc.resolve(a),f=p.node(-1),d=h.get(f),m=p.start(-1),v=d.colCount(p.pos-m)+p.nodeAfter.attrs.colspan-1;if(v==d.width-1)return}de(e,a)}}}(e,n,t,0,o)},mouseleave:function(e){!function(e){var t=ce.getState(e.state);t.activeHandle>-1&&!t.dragging&&de(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var r=ce.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=e.domAtPos(t),a=s.node.childNodes[s.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(a-=o[c],l--);return a/l}(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=ce.getState(e.state);r.dragging&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=h.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr,c=0;c<i.height;c++){var u=c*i.width+a;if(!c||i.map[u]!=i.map[u-i.width]){var p=i.map[u],f=o.nodeAt(p),d=f.attrs,m=1==d.colspan?0:a-i.colCount(p);if(!d.colwidth||d.colwidth[m]!=n){var v=d.colwidth?d.colwidth.slice():he(d.colspan);v[m]=n,l.setNodeMarkup(s+p,null,C(d,"colwidth",v))}}}l.docChanged&&e.dispatch(l)}(e,r.activeHandle,fe(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(ce,{setDragging:null})))}function a(t){if(!t.which)return s(t);var r=ce.getState(e.state),o=fe(r.dragging,t,n);!function(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=h.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=e.domAtPos(o.start(-1)).node;"TABLE"!=l.nodeName;)l=l.parentNode;le(i,l.firstChild,l,r,a,n)}(e,r.activeHandle,o,n)}e.dispatch(e.state.tr.setMeta(ce,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=ce.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=h.get(o),a=r.start(-1),l=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var u=l+c*i.width-1;if(!(l!=i.width&&i.map[u]==i.map[u+1]||0!=c&&i.map[u-1]==i.map[u-1-i.width])){var p=i.map[u],f=a+p+o.nodeAt(p).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",n.push(s.Decoration.widget(f,d))}}return s.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=ce,t.updateColumnsOnResize=le,t.__pastedCells=R,t.__insertCells=q,t.__clipCells=L,t.addColumn=Q,t.addColumnBefore=function(e,t){if(!y(e))return!1;if(t){var n=K(e);t(Q(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!y(e))return!1;if(t){var n=K(e);t(Q(e.tr,n,n.right))}return!0},t.removeColumn=Z,t.deleteColumn=function(e,t){if(!y(e))return!1;if(t){var n=K(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;Z(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=h.get(n.table);t(r)}return!0},t.addRow=ee,t.addRowBefore=function(e,t){if(!y(e))return!1;if(t){var n=K(e);t(ee(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!y(e))return!1;if(t){var n=K(e);t(ee(e.tr,n,n.bottom))}return!0},t.removeRow=te,t.deleteRow=function(e,t){if(!y(e))return!1;if(t){var n=K(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;te(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=h.get(n.table);t(r)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof O)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=K(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,s=i,a=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(t.left>0&&o[s]==o[s-1]||t.right<n&&o[l]==o[l+1])return!0;s+=n,l+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(t){for(var i,s,l=e.tr,c=[],u=a.Fragment.empty,p=r.top;p<r.bottom;p++)for(var f=r.left;f<r.right;f++){var d=o.map[p*o.width+f],h=r.table.nodeAt(d);if(!(c.indexOf(d)>-1))if(c.push(d),null==i)i=d,s=h;else{ne(h)||(u=u.append(h.content));var m=l.mapping.map(d+r.tableStart);l.delete(m,m+h.nodeSize)}}if(l.setNodeMarkup(i+r.tableStart,null,C(k(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var v=i+1+s.content.size,g=ne(s)?i+1:v;l.replaceWith(g+r.tableStart,v+r.tableStart,u)}l.setSelection(new O(l.doc.resolve(i+r.tableStart))),t(l)}return!0},t.splitCell=function(e,t){var n,r,o=e.selection;if(o instanceof O){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;n=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(n=function(e){for(var t=e.depth-1;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;r=g(o.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(t){var i=n.attrs,s=[],a=i.colwidth;i.rowspan>1&&(i=C(i,"rowspan",1)),i.colspan>1&&(i=C(i,"colspan",1));for(var l=K(e),c=e.tr,u=0;u<l.right-l.left;u++)s.push(a?C(i,"colwidth",a&&a[u]?[a[u]]:null):i);for(var p,f=A(e.schema)[n.type.spec.tableRole],d=0;d<l.bottom;d++)if(d>=l.top){var h=l.map.positionAt(d,l.left,l.table);d==l.top&&(h+=n.nodeSize);for(var m=l.left,v=0;m<l.right;m++,v++)m==l.left&&d==l.top||c.insert(p=c.mapping.map(h+l.tableStart,1),f.createAndFill(s[v]))}c.setNodeMarkup(r,null,s[0]),o instanceof O&&c.setSelection(new O(c.doc.resolve(o.$anchorCell.pos),p&&c.doc.resolve(p))),t(c)}return!0},t.setCellAttr=function(e,t){return function(n,r){if(!y(n))return!1;var o=b(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof O?n.selection.forEachCell(function(n,r){n.attrs[e]!==t&&i.setNodeMarkup(r,null,C(n.attrs,e,t))}):i.setNodeMarkup(o.pos,null,C(o.nodeAfter.attrs,e,t)),r(i)}return!0}},t.toggleHeaderRow=oe,t.toggleHeaderColumn=ie,t.toggleHeaderCell=se,t.goToNextCell=function(e){return function(t,n){if(!y(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),l=e.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(b(t),e);if(null!=r){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(i.TextSelection.between(o,_(o))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}},function(e,t,n){"use strict";(function(e){var n={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null,AbortController:null},polyfill:function(t,n){for(var r=void 0===n?{}:n,o=r.doThrow,i=void 0===o||o,s=r.instance,a=void 0!==s&&s,l=[],c=2;c<arguments.length;c++)l[c-2]=arguments[c];var u=this.polyfills[t]||("undefined"!=typeof self?self[t]:null)||(void 0!==e?e[t]:null);if(i&&!u)throw new Error(t+" is not defined");return a&&u?new(u.bind.apply(u,[void 0].concat(l))):u}};t.a=n}).call(this,n(27))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(39))&&"object"==typeof r&&"default"in r?r.default:r,i=n(12),s=n(21),a=n(1),l="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink",u="ProseMirror-icon";function p(e){var t=document.createElement("div");if(t.className=u,e.path){var n="pm-icon-"+function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.path).toString(16);document.getElementById(n)||function(e,t){var n=document.getElementById(u+"-collection");n||((n=document.createElementNS(l,"svg")).id=u+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(l,"symbol");r.id=e,r.setAttribute("viewBox","0 0 "+t.width+" "+t.height),r.appendChild(document.createElementNS(l,"path")).setAttribute("d",t.path),n.appendChild(r)}(n,e);var r=t.appendChild(document.createElementNS(l,"svg"));r.style.width=e.width/e.height+"em",r.appendChild(document.createElementNS(l,"use")).setAttributeNS(c,"href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else e.dom?t.appendChild(e.dom.cloneNode(!0)):(t.appendChild(document.createElement("span")).textContent=e.text||"",e.css&&(t.firstChild.style.cssText=e.css));return t}var f="ProseMirror-menu",d=function(e){this.spec=e};function h(e,t){return e._props.translate?e._props.translate(t):t}d.prototype.render=function(e){var t=this.spec,n=t.render?t.render(e):t.icon?p(t.icon):t.label?o("div",null,h(e,t.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(t.title){var r="function"==typeof t.title?t.title(e.state):t.title;n.setAttribute("title",h(e,r))}return t.class&&n.classList.add(t.class),t.css&&(n.style.cssText+=t.css),n.addEventListener("mousedown",function(r){r.preventDefault(),n.classList.contains(f+"-disabled")||t.run(e.state,e.dispatch,e,r)}),{dom:n,update:function(e){if(t.select){var r=t.select(e);if(n.style.display=r?"":"none",!r)return!1}var o=!0;if(t.enable&&(o=t.enable(e)||!1,I(n,f+"-disabled",!o)),t.active){var i=o&&t.active(e)||!1;I(n,f+"-active",i)}return!0}}};var m={time:0,node:null};function v(e){m.time=Date.now(),m.node=e.target}function g(e){return Date.now()-100<m.time&&m.node&&e.contains(m.node)}var y=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};function b(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var s=e[i].render(t),a=s.dom,l=s.update;n.push(o("div",{class:f+"-dropdown-item"},a)),r.push(l)}return{dom:n,update:w(r,n)}}function w(e,t){return function(n){for(var r=!1,o=0;o<e.length;o++){var i=e[o](n);t[o].style.display=i?"":"none",i&&(r=!0)}return r}}y.prototype.render=function(e){var t=this,n=b(this.content,e),r=o("div",{class:f+"-dropdown "+(this.options.class||""),style:this.options.css},h(e,this.options.label));this.options.title&&r.setAttribute("title",h(e,this.options.title));var i=o("div",{class:f+"-dropdown-wrap"},r),s=null,a=null,l=function(){s&&s.close()&&(s=null,window.removeEventListener("mousedown",a))};return r.addEventListener("mousedown",function(e){e.preventDefault(),v(e),s?l():(s=t.expand(i,n.dom),window.addEventListener("mousedown",a=function(){g(i)||l()}))}),{dom:i,update:function(e){var t=n.update(e);return i.style.display=t?"":"none",t}}},y.prototype.expand=function(e,t){var n=o("div",{class:f+"-dropdown-menu "+(this.options.class||"")},t),r=!1;return e.appendChild(n),{close:function(){if(!r)return r=!0,e.removeChild(n),!0},node:n}};var _=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};function E(e,t){for(var n=document.createDocumentFragment(),r=[],i=[],s=0;s<t.length;s++){for(var a=t[s],l=[],c=[],u=0;u<a.length;u++){var p=a[u].render(e),d=p.dom,h=p.update,m=o("span",{class:f+"item"},d);n.appendChild(m),c.push(m),l.push(h)}l.length&&(r.push(w(l,c)),s<t.length-1&&i.push(n.appendChild(o("span",{class:f+"separator"}))))}return{dom:n,update:function(e){for(var t=!1,n=!1,o=0;o<r.length;o++){var s=r[o](e);o&&(i[o-1].style.display=n&&s?"":"none"),n=s,s&&(t=!0)}return t}}}_.prototype.render=function(e){var t=b(this.content,e),n=o("div",{class:f+"-submenu-label"},h(e,this.options.label)),r=o("div",{class:f+"-submenu-wrap"},n,o("div",{class:f+"-submenu"},t.dom)),i=null;return n.addEventListener("mousedown",function(e){e.preventDefault(),v(e),I(r,f+"-submenu-wrap-active"),i||window.addEventListener("mousedown",i=function(){g(r)||(r.classList.remove(f+"-submenu-wrap-active"),window.removeEventListener("mousedown",i),i=null)})}),{dom:r,update:function(e){var n=t.update(e);return r.style.display=n?"":"none",n}}};var S={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"⬚",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},C=new d({title:"Join with above block",run:i.joinUp,select:function(e){return i.joinUp(e)},icon:S.join}),T=new d({title:"Lift out of enclosing block",run:i.lift,select:function(e){return i.lift(e)},icon:S.lift}),k=new d({title:"Select parent node",run:i.selectParentNode,select:function(e){return i.selectParentNode(e)},icon:S.selectParentNode}),O=new d({title:"Undo last change",run:s.undo,enable:function(e){return s.undo(e)},icon:S.undo}),x=new d({title:"Redo last undone change",run:s.redo,enable:function(e){return s.redo(e)},icon:S.redo});function I(e,t,n){n?e.classList.add(t):e.classList.remove(t)}var D="ProseMirror-menubar";var M=function(e,t){var n=this;this.editorView=e,this.options=t,this.wrapper=o("div",{class:D+"-wrapper"}),this.menu=this.wrapper.appendChild(o("div",{class:D})),this.menu.className=D,this.spacer=null,e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var r=E(this.editorView,this.options.content),i=r.dom,s=r.update;if(this.contentUpdate=s,this.menu.appendChild(i),this.update(),t.floating&&!function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return!/Edge\/\d/.test(e)&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e)}()){this.updateFloat();var a=function(e){for(var t=[window],n=e.parentNode;n;n=n.parentNode)t.push(n);return t}(this.wrapper);this.scrollFunc=function(e){var t=n.editorView.root;(t.body||t).contains(n.wrapper)?n.updateFloat(e.target.getBoundingClientRect&&e.target):a.forEach(function(e){return e.removeEventListener("scroll",n.scrollFunc)})},a.forEach(function(e){return e.addEventListener("scroll",n.scrollFunc)})}};M.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},M.prototype.updateScrollCursor=function(){var e=this.editorView.root.getSelection();if(e.focusNode){var t=e.getRangeAt(0).getClientRects(),n=t[function(e){if(e.anchorNode==e.focusNode)return e.anchorOffset>e.focusOffset;return e.anchorNode.compareDocumentPosition(e.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(e)?0:t.length-1];if(n){var r=this.menu.getBoundingClientRect();if(n.top<r.bottom&&n.bottom>r.top){var o=function(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}(this.wrapper);o&&(o.scrollTop-=r.bottom-n.top)}}}},M.prototype.updateFloat=function(e){var t=this.wrapper,n=t.getBoundingClientRect(),r=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(n.top>=r||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var i=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=n.left+i+"px",this.menu.style.display=n.top>window.innerHeight?"none":"",e&&(this.menu.style.top=r+"px")}else if(n.top<r&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;var s=this.menu.getBoundingClientRect();this.menu.style.left=s.left+"px",this.menu.style.width=s.width+"px",e&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=o("div",{class:D+"-spacer",style:"height: "+s.height+"px"}),t.insertBefore(this.spacer,this.menu)}},M.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)},t.MenuItem=d,t.Dropdown=y,t.DropdownSubmenu=_,t.renderGrouped=E,t.icons=S,t.joinUpItem=C,t.liftItem=T,t.selectParentNodeItem=k,t.undoItem=O,t.redoItem=x,t.wrapItem=function(e,t){var n={run:function(n,r){return i.wrapIn(e,t.attrs)(n,r)},select:function(n){return i.wrapIn(e,t.attrs instanceof Function?null:t.attrs)(n)}};for(var r in t)n[r]=t[r];return new d(n)},t.blockTypeItem=function(e,t){var n=i.setBlockType(e,t.attrs),r={run:n,enable:function(e){return n(e)},active:function(n){var r=n.selection,o=r.$from,i=r.to,s=r.node;return s?s.hasMarkup(e,t.attrs):i<=o.end()&&o.parent.hasMarkup(e,t.attrs)}};for(var o in t)r[o]=t[o];return new d(r)},t.menuBar=function(e){return new a.Plugin({view:function(t){return new M(t,e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(38))&&"object"==typeof r&&"default"in r?r.default:r;var i=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},s={firstChild:{},lastChild:{},childCount:{}};i.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,r+c)}s=l}},i.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},i.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)},0),o},i.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)},i.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,s=0;s<t;o++){var a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),n.push(a),r+=a.nodeSize),s=l}return new i(n,r)},i.prototype.cutByIndex=function(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))},i.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)},i.prototype.addToStart=function(e){return new i([e].concat(this.content),this.size+e.nodeSize)},i.prototype.addToEnd=function(e){return new i(this.content.concat(e),this.size+e.nodeSize)},i.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},s.firstChild.get=function(){return this.content.length?this.content[0]:null},s.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},s.childCount.get=function(){return this.content.length},i.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},i.prototype.maybeChild=function(e){return this.content[e]},i.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},i.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var l=e(i.content,s.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},i.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=t.child(--i),l=n.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:r,b:o};if(a.isText&&a.text!=l.text){for(var u=0,p=Math.min(a.text.length,l.text.length);u<p&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(a.content.size||l.content.size){var f=e(a.content,l.content,r-1,o-1);if(f)return f}r-=c,o-=c}else r-=c,o-=c}}(this,e,t,n)},i.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return l(0,e);if(e==this.size)return l(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?l(n+1,o):l(n,r);r=o}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null},i.fromJSON=function(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))},i.fromArray=function(e){if(!e.length)return i.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new i(t||e,n)},i.from=function(e){return e?e instanceof i?e:Array.isArray(e)?this.fromArray(e):new i([e],e.nodeSize):i.empty},Object.defineProperties(i.prototype,s);var a={index:0,offset:0};function l(e,t){return a.index=e,a.offset=t,a}function c(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!c(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t&&c(e[o],t[o])))return!1;for(var i in t)if(!(i in e))return!1}return!0}i.empty=new i([],0);var u=function(e,t){this.type=e,this.attrs=t};function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}u.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},u.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},u.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},u.prototype.eq=function(e){return this==e||this.type==e.type&&c(this.attrs,e.attrs)},u.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},u.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},u.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},u.setFrom=function(e){if(!e||0==e.length)return u.none;if(e instanceof u)return[e];var t=e.slice();return t.sort(function(e,t){return e.type.rank-t.type.rank}),t},u.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var f=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},d={size:{}};function h(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return function e(t,n,r,o){var s=t.index(o),a=t.node(o);if(s==n.index(o)&&o<t.depth-r.openStart){var l=e(t,n,r,o+1);return a.copy(a.content.replaceChild(s,l))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var c=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(i.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),u=c.start,p=c.end;return b(a,function e(t,n,r,o,s){var a=t.depth>s&&v(t,n,s+1);var l=o.depth>s&&v(r,o,s+1);var c=[];y(null,t,s,c);a&&l&&n.index(s)==r.index(s)?(m(a,l),g(b(a,e(t,n,r,o,s+1)),c)):(a&&g(b(a,w(t,n,s+1)),c),y(n,r,s,c),l&&g(b(l,w(r,o,s+1)),c));y(o,null,s,c);return new i(c)}(t,u,p,n,o))}var f=t.parent,d=f.content;return b(f,d.cut(0,t.parentOffset).append(r.content).append(d.cut(n.parentOffset)))}return b(a,w(t,n,o))}(e,t,n,0)}function m(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function v(e,t,n){var r=e.node(n);return m(r,t.node(n)),r}function g(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function y(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(g(e.nodeAfter,r),i++));for(var a=i;a<s;a++)g(o.child(a),r);t&&t.depth==n&&t.textOffset&&g(t.nodeBefore,r)}function b(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function w(e,t,n){var r=[];(y(null,e,n,r),e.depth>n)&&g(b(v(e,t,n+1),w(e,t,n+1)),r);return y(t,null,n,r),new i(r)}d.size.get=function(){return this.content.size-this.openStart-this.openEnd},f.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n);var s=i.index;var a=i.offset;var l=t.maybeChild(s);if(a==n||l.isText)return o&&!o.canReplace(s,s,r)?null:t.cut(0,n).append(r).append(t.cut(n));var c=e(l.content,n-a-1,r);return c&&t.replaceChild(s,l.copy(c))}(this.content,e+this.openStart,t,null);return n&&new f(n,this.openStart,this.openEnd)},f.prototype.removeBetween=function(e,t){return new f(function e(t,n,r){var o=t.findIndex(n);var i=o.index;var s=o.offset;var a=t.maybeChild(i);var l=t.findIndex(r);var c=l.index;var u=l.offset;if(s==n||a.isText){if(u!=r&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(e(a.content,n-s-1,r-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},f.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},f.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},f.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},f.fromJSON=function(e,t){if(!t)return f.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(i.fromJSON(e,t.content),t.openStart||0,t.openEnd||0)},f.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new f(e,n,r)},Object.defineProperties(f.prototype,d),f.empty=new f(i.empty,0,0);var _=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},E={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};_.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},_.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},_.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},_.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},_.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},_.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},_.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},_.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},E.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},_.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return u.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},_.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},_.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},_.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new k(this,e,n)},_.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},_.prototype.max=function(e){return e.pos>this.pos?e:this},_.prototype.min=function(e){return e.pos<this.pos?e:this},_.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},_.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var s=i.content.findIndex(o),a=s.index,l=s.offset,c=o-l;if(n.push(i,a,r+l),!c)break;if((i=i.child(a)).isText)break;o=c-1,r+=l+1}return new _(t,n,o)},_.resolveCached=function(e,t){for(var n=0;n<S.length;n++){var r=S[n];if(r.pos==t&&r.doc==e)return r}var o=S[C]=_.resolve(e,t);return C=(C+1)%T,o},Object.defineProperties(_.prototype,E);var S=[],C=0,T=12,k=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},O={start:{},end:{},parent:{},startIndex:{},endIndex:{}};O.start.get=function(){return this.$from.before(this.depth+1)},O.end.get=function(){return this.$to.after(this.depth+1)},O.parent.get=function(){return this.$from.node(this.depth)},O.startIndex.get=function(){return this.$from.index(this.depth)},O.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(k.prototype,O);var x=Object.create(null),I=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||i.empty,this.marks=r||u.none},D={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};D.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},D.childCount.get=function(){return this.content.childCount},I.prototype.child=function(e){return this.content.child(e)},I.prototype.maybeChild=function(e){return this.content.maybeChild(e)},I.prototype.forEach=function(e){this.content.forEach(e)},I.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},I.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},D.textContent.get=function(){return this.textBetween(0,this.content.size,"")},I.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},D.firstChild.get=function(){return this.content.firstChild},D.lastChild.get=function(){return this.content.lastChild},I.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},I.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},I.prototype.hasMarkup=function(e,t,n){return this.type==e&&c(this.attrs,t||e.defaultAttrs||x)&&u.sameSet(this.marks,n||u.none)},I.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},I.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},I.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},I.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return f.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new f(a,r.depth-i,o.depth-i)},I.prototype.replace=function(e,t,n){return h(this.resolve(e),this.resolve(t),n)},I.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}},I.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},I.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},I.prototype.resolve=function(e){return _.resolveCached(this,e)},I.prototype.resolveNoCache=function(e){return _.resolve(this,e)},I.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,function(e){return n.isInSet(e.marks)&&(r=!0),!r}),r},D.isBlock.get=function(){return this.type.isBlock},D.isTextblock.get=function(){return this.type.isTextblock},D.inlineContent.get=function(){return this.type.inlineContent},D.isInline.get=function(){return this.type.isInline},D.isText.get=function(){return this.type.isText},D.isLeaf.get=function(){return this.type.isLeaf},D.isAtom.get=function(){return this.type.isAtom},I.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),A(this.marks,e)},I.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},I.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(e).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var l=r;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0},I.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},I.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},I.prototype.defaultContentType=function(e){return this.contentMatchAt(e).defaultType},I.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(e){return e.check()})},I.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(e){return e.toJSON()})),e},I.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=i.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(I.prototype,D);var M=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{},nodeSize:{}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):A(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(I);function A(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var R=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},N={inlineContent:{},defaultType:{},edgeCount:{}};R.parse=function(e,t){var n=new L(e,t);if(null==n.next)return R.empty;var r=F(n);n.next&&n.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var o=[];r.forEach(function(t){e[t].forEach(function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];G(e,r).forEach(function(e){s||o.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)})}})});var i=t[r.join(",")]=new R(r.indexOf(e.length-1)>-1);for(var s=0;s<o.length;s+=2){var a=o[s+1].sort(V);i.next.push(o[s],t[a.join(",")]||n(a))}return i}(G(e,0))}(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce(function(t,n){return t.concat(e(n,i))},[]);if("seq"==t.type)for(var s=0;;s++){var a=e(t.exprs[s],i);if(s==t.exprs.length-1)return a;o(a,i=n())}else{if("star"==t.type){var l=n();return r(i,l),o(e(t.expr,l),l),[r(l)]}if("plus"==t.type){var c=n();return o(e(t.expr,i),c),o(e(t.expr,c),c),[r(c)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,p=0;p<t.min;p++){var f=n();o(e(t.expr,u),f),u=f}if(-1==t.max)o(e(t.expr,u),u);else for(var d=t.min;d<t.max;d++){var h=n();r(u,h),o(e(t.expr,u),h),u=h}return[r(u)]}if("name"==t.type)return[r(i,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach(function(e){return e.to=t})}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],c=o.next[a+1];s.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(o,n),o},R.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},R.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},N.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},N.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},R.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},R.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var l=s.matchFragment(e,n);if(l&&(!t||l.validEnd))return i.from(a.map(function(e){return e.createAndFill()}));for(var c=0;c<s.next.length;c+=2){var u=s.next[c],p=s.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var f=o(p,a.concat(u));if(f)return f}}}(this,[])},R.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},R.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var l=o.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!o.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}},N.edgeCount.get=function(){return this.next.length>>1},R.prototype.edge=function(e){var t=e<<1;if(t>this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},R.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map(function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r}).join("\n")},Object.defineProperties(R.prototype,N),R.empty=new R(!0);var L=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},P={next:{}};function F(e){var t=[];do{t.push(q(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function q(e){var t=[];do{t.push(z(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function z(e){for(var t=function(e){if(e.eat("(")){var t=F(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map(function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}});return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=j(e,t)}return t}function B(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function j(e,t){var n=B(e),r=n;return e.eat(",")&&(r="}"!=e.next?B(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function V(e,t){return e-t}function G(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(V)}function U(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function H(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function $(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new J(e[n]);return t}P.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},L.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,P);var W=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=$(n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},Y={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};Y.isInline.get=function(){return!this.isBlock},Y.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Y.isLeaf.get=function(){return this.contentMatch==R.empty},Y.isAtom.get=function(){return this.isLeaf||this.spec.atom},W.prototype.hasRequiredAttrs=function(e){for(var t in this.attrs)if(this.attrs[t].isRequired&&(!e||!(t in e)))return!0;return!1},W.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},W.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:H(this.attrs,e)},W.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(e),i.from(t),u.setFrom(n))},W.prototype.createChecked=function(e,t,n){if(t=i.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new I(this,this.computeAttrs(e),t,u.setFrom(n))},W.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=i.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(i.empty,!0);return o?new I(this,e,t.append(o),u.setFrom(n)):null},W.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},W.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},W.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},W.prototype.allowedMarks=function(e){var t;if(null==this.markSet)return e;for(var n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:u.empty:e},W.compile=function(e,t){var n=Object.create(null);e.forEach(function(e,r){return n[e]=new W(e,t,r)});var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(W.prototype,Y);var J=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},X={isRequired:{}};X.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(J.prototype,X);var K=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=$(r.attrs),this.rank=t,this.excluded=null;var o=U(this.attrs);this.instance=o&&new u(this,o)};K.prototype.create=function(e){return!e&&this.instance?this.instance:new u(this,H(this.attrs,e))},K.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach(function(e,o){return n[e]=new K(e,r++,t,o)}),n},K.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},K.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},K.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Q=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=o.from(e.nodes),this.spec.marks=o.from(e.marks),this.nodes=W.compile(this.spec.nodes,this),this.marks=K.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=R.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?Z(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:Z(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Z(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var l=e.marks[a];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Q.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof W))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Q.prototype.text=function(e,t){var n=this.nodes.text;return new M(n,n.defaultAttrs,e,u.setFrom(t))},Q.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Q.prototype.nodeFromJSON=function(e){return I.fromJSON(this,e)},Q.prototype.markFromJSON=function(e){return u.fromJSON(this,e)},Q.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var ee=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})};ee.prototype.parse=function(e,t){void 0===t&&(t={});var n=new le(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},ee.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new le(this,t,!0);return n.addAll(e,null,t.from,t.to),f.maxOpen(n.finish())},ee.prototype.matchTag=function(e,t){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ue(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(e);if(!1===o)continue;r.attrs=o}return r}}},ee.prototype.matchStyle=function(e,t,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},ee.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach(function(e){n(e=pe(e)),e.mark=t})};for(var o in e.marks)r(o);var i;for(var s in e.nodes)i=void 0,(i=e.nodes[s].spec.parseDOM)&&i.forEach(function(e){n(e=pe(e)),e.node=s});return t},ee.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new ee(e,ee.schemaRules(e)))};var te={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ne={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},re={ol:!0,ul:!0},oe=1,ie=2;function se(e){return(e?oe:0)|("full"===e?ie:0)}var ae=function(e,t,n,r,o,i){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&i?null:e.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=u.none};ae.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(i.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ae.prototype.finish=function(e){if(!(this.options&oe)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/\s+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=i.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var le=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.pendingMarks=[];var r,o=t.topNode,i=se(t.preserveWhitespace)|(n?4:0);r=o?new ae(o.type,o.attrs,u.none,!0,t.topMatch||o.type.contentMatch,i):new ae(n?null:e.schema.topNodeType,null,u.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},ce={top:{},currentPos:{}};function ue(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function pe(e){var t={};for(var n in e)t[n]=e[n];return t}ce.top.get=function(){return this.nodes[this.open]},le.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}},le.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(t)){if(n.options&oe)n.options&ie||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/\s+/g," "),/^\s/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/\s$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},le.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();re.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&re.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:ne.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,i=this.needsBlock;te.hasOwnProperty(t)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(e),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(e,n)},le.prototype.readStyles=function(e){for(var t=u.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t},le.prototype.addElementByRule=function(e,t){var n,r,o,i=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs)):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var s=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return i.insertNode(e)});else{var a=t.contentElement;"string"==typeof a?a=e.querySelector(a):"function"==typeof a&&(a=a(e)),a||(a=e),this.findAround(e,a,!0),this.addAll(a,n)}return n&&(this.sync(s),this.open--),o&&this.removePendingMark(o),!0},le.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&te.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},le.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},le.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));n.content.push(e.mark(r))}},le.prototype.applyPendingMarks=function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.type.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}},le.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),r},le.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:se(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new ae(e,t,o.activeMarks,n,null,i)),this.open++},le.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},le.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},le.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},le.prototype.addPendingMark=function(e){this.pendingMarks.push(e)},le.prototype.removePendingMark=function(e){var t=this.pendingMarks.lastIndexOf(e);if(t>-1)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}},ce.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},le.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},le.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},le.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},le.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},le.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&o?t.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},le.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Object.defineProperties(le.prototype,ce);var fe=function(e,t){this.nodes=e||{},this.marks=t||{}};function de(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function he(e){return e.document||window.document}fe.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=he(t).createDocumentFragment());var o=n,i=null;return e.forEach(function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<e.marks.length;){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n]))break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=r.serializeMark(l,e.isInline,t);c&&(i.push(l,o),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNode(e,t))}),n},fe.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=fe.renderSpec(he(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},fe.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},fe.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&fe.renderSpec(he(n),r(e,t))},fe.renderSpec=function(e,t){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var n=e.createElement(t[0]),r=null,o=t[1],i=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o))for(var s in i=2,o)"style"==s?n.style.cssText=o[s]:null!=o[s]&&n.setAttribute(s,o[s]);for(var a=i;a<t.length;a++){var l=t[a];if(0===l){if(a<t.length-1||a>i)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=fe.renderSpec(e,l),u=c.dom,p=c.contentDOM;if(n.appendChild(u),p){if(r)throw new RangeError("Multiple content holes");r=p}}return{dom:n,contentDOM:r}},fe.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new fe(this.nodesFromSchema(e),this.marksFromSchema(e)))},fe.nodesFromSchema=function(e){var t=de(e.nodes);return t.text||(t.text=function(e){return e.text}),t},fe.marksFromSchema=function(e){return de(e.marks)},t.Node=I,t.ResolvedPos=_,t.NodeRange=k,t.Fragment=i,t.Slice=f,t.ReplaceError=p,t.Mark=u,t.Schema=Q,t.NodeType=W,t.MarkType=K,t.ContentMatch=R,t.DOMParser=ee,t.DOMSerializer=fe},function(e,t,n){"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=n(10),a=(r=s)&&r.__esModule?r:{default:r};var l=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];e.exports=function(e,t,n){"object"===(void 0===e?"undefined":i(e))&&(n=t,t=e,e="div");var r=l.indexOf((""+e).toLowerCase())>=0,s="<"+e;return t=o({},t),Object.keys(t).forEach(function(e){var n=t[e];"string"==typeof n?(n=(0,a.default)(""+n),s+=" "+e+'="'+n+'"'):n&&(s+=" "+e)}),s+=r?">":void 0!==n?">"+n+"</"+e+">":"/>"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=65535,i=Math.pow(2,16);function s(e){return e&o}var a=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},l=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};l.prototype.recover=function(e){var t=0,n=s(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(e&o))/i}(e)},l.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},l.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},l.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,s=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;var u=this.ranges[l+o],p=this.ranges[l+s],f=c+u;if(e<=f){var d=c+r+((u?e==c?-1:e==f?1:t:t)<0?0:p);if(n)return d;var h=l/3+(e-c)*i;return new a(d,t<0?e!=c:e!=f,h)}r+=p-u}return n?e+r:new a(e+r)},l.prototype.touches=function(e,t){for(var n=0,r=s(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;var c=this.ranges[a+o];if(e<=l+c&&a==3*r)return!0;n+=this.ranges[a+i]-c}return!1},l.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}},l.prototype.invert=function(){return new l(this.ranges,!this.inverted)},l.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},l.offset=function(e){return 0==e?l.empty:new l(e<0?[0,-e,0]:[0,0,e])},l.empty=new l([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function u(e){var t=Error.call(this,e);return t.__proto__=u.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var s=this.maps[i],l=o&&o[i];if(null!=l&&s.touches(e,l))e=s.recover(l);else{var c=s.mapResult(e,t);if(null!=c.recover){var u=this.getMirror(i);if(null!=u&&u>i&&u<this.to){if(c.deleted){i=u,e=this.maps[u].recover(c.recover);continue}(o||(o=Object.create(null)))[u]=c.recover}}c.deleted&&(r=!0),e=c.pos}}return n?e:new a(e,r)},u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="TransformError";var p=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},f={before:{},docChanged:{}};function d(){throw new Error("Override me")}f.before.get=function(){return this.docs.length?this.docs[0]:this.doc},p.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new u(t.failed);return this},p.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},f.docChanged.get=function(){return this.steps.length>0},p.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(p.prototype,f);var h=Object.create(null),m=function(){};m.prototype.apply=function(e){return d()},m.prototype.getMap=function(){return l.empty},m.prototype.invert=function(e){return d()},m.prototype.map=function(e){return d()},m.prototype.merge=function(e){return null},m.prototype.toJSON=function(){return d()},m.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},m.jsonID=function(e,t){if(e in h)throw new RangeError("Duplicate use of step JSON ID "+e);return h[e]=t,t.prototype.jsonID=e,t};var v=function(e,t){this.doc=e,this.failed=t};v.ok=function(e){return new v(e,null)},v.fail=function(e){return new v(null,e)},v.fromReplace=function(e,t,n,o){try{return v.ok(e.replace(t,n,o))}catch(e){if(e instanceof r.ReplaceError)return v.fail(e.message);throw e}};var g=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&b(e,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new l([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),o,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(m);m.jsonID("replace",g);var y=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(b(e,this.from,this.gapFrom)||b(e,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return v.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?v.fromReplace(e,this.from,this.to,n):v.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(m);function b(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function w(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function _(e){return{type:e,attrs:null}}function E(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function S(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function C(e,t,n){for(var o=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(C(s.content,t,s))),s.isInline&&(s=t(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}m.jsonID("replaceAround",y),p.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,i=e.depth,s=n.before(i+1),a=o.after(i+1),l=s,c=a,u=r.Fragment.empty,p=0,f=i,d=!1;f>t;f--)d||n.index(f)>0?(d=!0,u=r.Fragment.from(n.node(f).copy(u)),p++):l--;for(var h=r.Fragment.empty,m=0,v=i,g=!1;v>t;v--)g||o.after(v+1)<o.end(v)?(g=!0,h=r.Fragment.from(o.node(v).copy(h)),m++):c++;return this.step(new y(l,c,s,a,new r.Slice(u.append(h),p,m),u.size-p,!0))},p.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,o=t.length-1;o>=0;o--)n=r.Fragment.from(t[o].type.create(t[o].attrs,n));var i=e.start,s=e.end;return this.step(new y(i,s,i,s,new r.Slice(n,0,0),t.length,!0))},p.prototype.setBlockType=function(e,t,n,o){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),l=a.map(t,1),c=a.map(t+e.nodeSize,1);return i.step(new y(l,c,l+1,c-1,new r.Slice(r.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}}),this},p.prototype.setNodeMarkup=function(e,t,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new y(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},p.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,l=o.depth-t,c=t-1;a>l;a--,c--){i=r.Fragment.from(o.node(a).copy(i));var u=n&&n[c];s=r.Fragment.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new g(e,e,new r.Slice(i.append(s),t,t,!0)))},p.prototype.join=function(e,t){void 0===t&&(t=1);var n=new g(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var T=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(C(n.content,function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e},i),n.openStart,n.openEnd);return v.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new k(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(m);m.jsonID("addMark",T);var k=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=new r.Slice(C(n.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))}),n.openStart,n.openEnd);return v.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new T(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(m);function O(e,t,n,o){if(void 0===n&&(n=t),void 0===o&&(o=r.Slice.empty),t==n&&!o.size)return null;var i=e.resolve(t),s=e.resolve(n);if(D(i,s,o))return new g(t,n,o);var a=function(e,t){var n=function e(t,n,o,i){var s=r.Fragment.empty,a=0,l=o[n];if(t.depth>n){var c=e(t,n+1,o,i||l);a=c.openEnd+1,s=r.Fragment.from(t.node(n+1).copy(c.content))}l&&(s=s.append(l.content),a=l.openEnd);i&&(s=s.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),a=0);return{content:s,openEnd:a}}(e,0,t,!1),o=n.content,i=n.openEnd;return new r.Slice(o,e.depth,i||0)}(i,function(e,t){for(var n=new M(e),r=1;t.size&&r<=3;r++)t=n.placeSlice(t.content,t.openStart,t.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(i,o)),l=I(i,s,a);if(!l)return null;if(a.size!=l.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,o=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=t.index();i<t.parent.childCount;i++)if(!o.type.allowsMarks(t.parent.child(i).marks))return!1;n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(i,s,a)){for(var c=s.depth,u=s.after(c);c>1&&u==s.end(--c);)++u;var p=I(i,e.resolve(u),a);if(p)return new y(t,u,n,s.end(),p,a.size)}return l.size||t!=n?new g(t,n,l):null}function x(e,t,n,o,i,s,a){var l,c=e.childCount,u=c-(a>0?1:0),p=s<0?t:n.node(i);l=s<0?p.contentMatchAt(u):1==c&&a>0?p.contentMatchAt(s?n.index(i):n.indexAfter(i)):p.contentMatchAt(n.indexAfter(i)).matchFragment(e,c>0&&s?1:0,u);var f=o.node(i);if(a>0&&i<o.depth){var d=f.content.cutByIndex(o.indexAfter(i)).addToStart(e.lastChild),h=l.fillBefore(d,!0);if(h&&h.size&&s>0&&1==c&&(h=null),h){var m=x(e.lastChild.content,e.lastChild,n,o,i+1,1==c?s-1:-1,a-1);if(m){var v=e.lastChild.copy(m);return h.size?e.cutByIndex(0,c-1).append(h).addToEnd(v):e.replaceChild(c-1,v)}}}a>0&&(l=l.matchType((1==c&&s>0?n.node(i+1):e.lastChild).type));var g=o.index(i);if(g==f.childCount&&!f.type.compatibleContent(t.type))return null;for(var y=l.fillBefore(f.content,!0,g),b=g;y&&b<f.content.childCount;b++)p.type.allowsMarks(f.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var w=function e(t,n,o,i,s){var a,l=t.content,c=l.childCount;a=s>=0?o.node(i).contentMatchAt(o.indexAfter(i)).matchFragment(l,s>0?1:0,c):t.contentMatchAt(c);if(n>0){var u=e(l.lastChild,n-1,o,i+1,1==c?s-1:-1);l=l.replaceChild(c-1,u)}return t.copy(l.append(a.fillBefore(r.Fragment.empty,!0)))}(e.lastChild,a-1,n,i+1,1==c?s-1:-1);e=e.replaceChild(c-1,w)}return e=e.append(y),o.depth>i&&(e=e.addToEnd(function e(t,n){var r=t.node(n);var o=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));t.depth>n&&(o=o.addToEnd(e(t,n+1)));return r.copy(o)}(o,i+1))),e}function I(e,t,n){var o=x(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return o?function(e,t,n){for(;t>0&&n>0&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new r.Slice(e,t,n)}(o,n.openStart,t.depth):null}function D(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}m.jsonID("removeMark",k),p.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,function(r,l,c){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(l,e),f=Math.min(l+r.nodeSize,t),d=n.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(d)||(s&&s.to==p&&s.mark.eq(u[h])?s.to=f:o.push(s=new k(p,f,u[h])));a&&a.to==p?a.to=f:i.push(a=new T(p,f,n))}}}),o.forEach(function(e){return r.step(e)}),i.forEach(function(e){return r.step(e)}),this},p.prototype.removeMark=function(e,t,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(e,t,function(o,a){if(o.isInline){s++;var l=null;if(n instanceof r.MarkType){var c=n.isInSet(o.marks);c&&(l=[c])}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length)for(var u=Math.min(a+o.nodeSize,t),p=0;p<l.length;p++){for(var f=l[p],d=void 0,h=0;h<i.length;h++){var m=i[h];m.step==s-1&&f.eq(i[h].style)&&(d=m)}d?(d.to=u,d.step=s):i.push({style:f,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(function(e){return o.step(new k(e.from,e.to,e.style))}),this},p.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<o.childCount;a++){var l=o.child(a),c=s+l.nodeSize,u=n.matchType(l.type,l.attrs);if(u){n=u;for(var p=0;p<l.marks.length;p++)t.allowsMarkType(l.marks[p].type)||this.step(new k(s,c,l.marks[p]))}else i.push(new g(s,c,r.Slice.empty));s=c}if(!n.validEnd){var f=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(f,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},p.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var o=O(this.doc,e,t,n);return o&&this.step(o),this},p.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},p.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},p.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var M=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),o=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:o,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function A(e,t,n){var r=e.content;if(t>1){var o=A(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,o)}var i=e.type.contentMatch.fillBefore(r,0==n);return e.copy(i.append(r))}function R(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(R(i.content,t+1,n,r,i)))}return t>r&&(e=o.contentMatchAt(0).fillBefore(e,!0).append(e)),e}function N(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}M.prototype.placeSlice=function(e,t,n,o,i){if(t>0){var s=e.firstChild,a=this.placeSlice(s.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,o,s);a.content!=s.content&&(a.content.size?(e=e.replaceChild(0,s.copy(a.content)),t=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),t=0))}var l=this.placeContent(e,t,n,o,i);if(o>2&&l.size&&0==t){for(var c=0;c<l.content.childCount;c++){var u=l.content.child(c);this.placeContent(u.content,0,n&&c==l.content.childCount.length-1?n-1:0,o,u)}l=r.Fragment.empty}return l},M.prototype.placeContent=function(e,t,n,o,i){for(var s=0;s<e.childCount;s++){for(var a=e.child(s),l=!1,c=s==e.childCount-1,u=this.open.length-1;u>=0;u--){var p=this.open[u],f=void 0;if(o>1&&(f=p.match.findWrapping(a.type))&&(!i||!f.length||f[f.length-1]!=i.type)){for(;this.open.length-1>u;)this.closeNode();for(var d=0;d<f.length;d++)p.match=p.match.matchType(f[d]),u++,p={parent:f[d].create(),match:f[d].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:u+d},this.open.push(p)}var h=p.match.matchType(a.type);if(!h){var m=p.match.fillBefore(r.Fragment.from(a));if(!m){if(i&&p.match.matchType(i.type))break;continue}for(var v=0;v<m.childCount;v++){var g=m.child(v);this.addNode(p,g,0),h=p.match.matchFragment(g)}}for(;this.open.length-1>u;)this.closeNode();a=a.mark(p.parent.type.allowedMarks(a.marks)),t&&(a=A(a,t,c?n:0),t=0),this.addNode(p,a,c?n:0),p.match=h,c&&(n=0),l=!0;break}if(!l)break}return this.open.length>1&&(s>0&&s==e.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new r.Slice(e.cutByIndex(s),t,n)},M.prototype.addNode=function(e,t,n){var o,i;e.content=(o=e.content,i=e.openEnd,i?o.replaceChild(o.childCount-1,function e(t,n){var o=t.content;if(n>1){var i=e(t.lastChild,n-1);o=t.content.replaceChild(t.childCount-1,i)}var s=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(o.append(s))}(o.lastChild,i)):o).addToEnd(t),e.openEnd=n},M.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},p.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var o=this.doc.resolve(e),i=this.doc.resolve(t);if(D(o,i,n))return this.step(new g(e,t,n));var s=N(o,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var u=o.node(l).type.spec;if(u.defining||u.isolating)break;s.indexOf(l)>-1?a=l:o.before(l)==c&&s.splice(1,0,-l)}for(var p=s.indexOf(a),f=[],d=n.openStart,h=n.content,m=0;;m++){var v=h.firstChild;if(f.push(v),m==n.openStart)break;h=v.content}d>0&&f[d-1].type.spec.defining&&o.node(p).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&o.node(p).type!=f[d-2].type&&(d-=2);for(var y=n.openStart;y>=0;y--){var b=(y+d+1)%(n.openStart+1),w=f[b];if(w)for(var _=0;_<s.length;_++){var E=s[(_+p)%s.length],S=!0;E<0&&(S=!1,E=-E);var C=o.node(E-1),T=o.index(E-1);if(C.canReplaceWith(T,T,w.type,w.marks))return this.replace(o.before(E),S?i.after(E):t,new r.Slice(R(n.content,0,n.openStart,b),b,n.openEnd))}}return this.replace(e,t,n)},p.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=S(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},p.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=N(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l))return this.delete(n.before(l),t);return this.delete(e,t)},t.Transform=p,t.TransformError=u,t.Step=m,t.StepResult=v,t.joinPoint=function(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,s=void 0;if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),s=r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),s=r.node(o+1)),i&&!i.isTextblock&&E(i,s))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}},t.canJoin=function(e,t){var n=e.resolve(t),r=n.index();return E(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},t.canSplit=function(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),u=o.index(a);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),f=r&&r[l]||c;if(f!=c&&(p=p.replaceChild(0,f.type.create(f.attrs))),!c.canReplace(u+1,c.childCount)||!f.type.validContent(p))return!1}var d=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(d,d,h?h.type:o.node(i+1).type)},t.insertPoint=S,t.dropPoint=function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0);if(1==s?r.node(a).canReplace(c,c,o):r.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null},t.liftTarget=function(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!w(r,o,i))break}},t.findWrapping=function(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,t);return i?o.map(_).concat({type:t,attrs:n}).concat(i.map(_)):null},t.StepMap=l,t.MapResult=a,t.Mapping=c,t.AddMarkStep=T,t.RemoveMarkStep=k,t.ReplaceStep=g,t.ReplaceAroundStep=y,t.replaceStep=O},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var s=o.apply(null,r);s&&e.push(s)}else if("object"===i)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(1),i=n(7),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),l=/MSIE \d/.test(navigator.userAgent),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(l||c||a);s.ie_version=l?document.documentMode||6:c?+c[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!p,s.chrome_version=p&&+p[1],s.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit=!u&&"WebkitAppearance"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var f=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},h=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},m=function(e,t,n,r){return n&&(g(e,t,n,r,-1)||g(e,t,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function g(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:y(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||(s=void 0,(s=e.pmViewDesc)&&s.node&&s.node.isBlock)||v.test(e.nodeName)||"false"==e.contentEditable)return!1;t=f(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(o<0?-1:0)],t=o<0?y(e):0}}var s}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var b=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function w(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function _(e,t){return"number"==typeof e?e:e[t]}function E(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=i.defaultView,a=n||e.dom;a;a=d(a))if(1==a.nodeType){var l=a==i.body||1!=a.nodeType,c=l?w(s):a.getBoundingClientRect(),u=0,p=0;if(t.top<c.top+_(r,"top")?p=-(c.top-t.top+_(o,"top")):t.bottom>c.bottom-_(r,"bottom")&&(p=t.bottom-c.bottom+_(o,"bottom")),t.left<c.left+_(r,"left")?u=-(c.left-t.left+_(o,"left")):t.right>c.right-_(r,"right")&&(u=t.right-c.right+_(o,"right")),(u||p)&&(l?s.scrollBy(u,p):(p&&(a.scrollTop+=p),u&&(a.scrollLeft+=u))),l)break}}function S(e,t){for(var n,r,o=2e8,i=0,s=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=h(l).getClientRects()}for(var p=0;p<u.length;p++){var f=u[p];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var d=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(d<o){n=l,o=d,r=d&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==l.nodeType&&d&&(i=c+(t.left>=(f.left+f.right)/2?1:0));continue}}!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=T(r,1);if(i.top!=i.bottom&&(i.left-1<=t.left&&i.right+1>=t.left&&i.top-1<=t.top&&i.bottom+1>=t.top))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:S(n,r)}function C(e,t){var n,r,o=e.root;if(o.caretPositionFromPoint){var i,s=o.caretPositionFromPoint(t.left,t.top);if(s)n=(i=s).offsetNode,r=i.offset}if(!n&&o.caretRangeFromPoint){var a,l=o.caretRangeFromPoint(t.left,t.top);if(l)n=(a=l).startContainer,r=a.startOffset}var c,u=o.elementFromPoint(t.left,t.top+1);if(!u)return null;if(u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),n&&(n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,n,r,t))),null==c&&null==(c=function(e,t,n){if(!e.dom.contains(1!=t.nodeType?t.parentNode:t))return null;var r=S(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,u,t)))return null;var p=e.docView.nearestDesc(u,!0);return{pos:c,inside:p?p.posAtStart-p.border:-1}}function T(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function k(e,t){var n,r,o=e.docView.domFromPos(t),i=o.node,s=o.offset;if(3==i.nodeType)s<i.nodeValue.length&&(r=T(h(i,s,s+1),-1),n="left"),r&&r.left!=r.right||!s||(r=T(h(i,s-1,s),1),n="right");else if(i.firstChild){if(s<i.childNodes.length){var a=i.childNodes[s];r=T(3==a.nodeType?h(a):a,-1),n="left"}if((!r||r.top==r.bottom)&&s){var l=i.childNodes[s-1];r=T(3==l.nodeType?h(l):l,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var c=r[n];return{top:r.top,bottom:r.bottom,left:c,right:c}}function O(e,t,n){var r=e.state,o=e.root.activeElement;r==t&&e.inDOMChange||e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o.focus()}}var x=/[\u0590-\u08ac]/;var I=null,D=null,M=!1;function A(e,t,n){return I==t&&D==n?M:(I=t,D=n,M="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return!!o.depth&&O(e,t,function(){for(var t=e.docView.domFromPos(o.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r||r.node.isBlock)break;t=r.dom.parentNode}for(var i=k(e,o.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=h(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0})}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock||!r.depth)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return x.test(r.parent.textContent)&&a.modify?O(e,t,function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset;a.modify("move",n,"character");var s=!e.docView.domAfterPos(r.before()).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),s}):"left"==n||"backward"==n?i:s}(e,t,n))}var R=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},N={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};R.prototype.matchesWidget=function(){return!1},R.prototype.matchesMark=function(){return!1},R.prototype.matchesNode=function(){return!1},R.prototype.matchesHack=function(){return!1},N.beforePosition.get=function(){return!1},R.prototype.parseRule=function(){return null},R.prototype.stopEvent=function(){return!1},N.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},N.border.get=function(){return 0},R.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},R.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},N.posBefore.get=function(){return this.parent.posBeforeChild(this)},N.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},N.posAfter.get=function(){return this.posBefore+this.size},N.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},R.prototype.localPosFromDOM=function(e,t,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){r=!1;break}if(l.parentNode.firstChild!=l)break}if(null==r&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){r=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart},R.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(e):o.nodeDOM==e))return o;n=!1}}},R.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},R.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}},R.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},R.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},R.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&e<=l){var c=i+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e-c,t-c,n+c);e=n+i;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=f(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(r>-1&&t<=l){t=n+l;for(var d=s+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=f(h.dom);break}t+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},R.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},R.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},R.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}var u=this.domFromPos(e),p=this.domFromPos(t),f=n.getSelection(),d=document.createRange();if(r||!m(u.node,u.offset,f.anchorNode,f.anchorOffset)||!m(p.node,p.offset,f.focusNode,f.focusOffset)){if(f.extend)d.setEnd(u.node,u.offset),d.collapse(!1);else{if(e>t){var h=u;u=p,p=h}d.setEnd(p.node,p.offset),d.setStart(u.node,u.offset)}f.removeAllRanges(),f.addRange(d),f.extend&&f.extend(p.node,p.offset)}},R.prototype.ignoreMutation=function(e){return!this.contentDOM},N.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},R.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e==s&&t==a&&o.contentLost?o.dirty=3:o.markDirty(e-s,t-s));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(R.prototype,N);var L=[],P=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o})),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,L,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(R),F=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){for(var t,n=this.dom.firstChild;n;n=n.nextSibling){var r=void 0;if(3==n.nodeType){var o=n.nodeValue.replace(/\ufeff/g,"");if(!o)continue;r=document.createTextNode(o)}else{if("\ufeff"==n.textContent)continue;r=n.cloneNode(!0)}t||(t=document.createDocumentFragment()),t.appendChild(r)}return t?{skip:t}:e.prototype.parseRule.call(this)},t.prototype.ignoreMutation=function(){return!1},t}(P),q=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,o,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,o);return a&&a.dom||(a=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,o))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t}(R),z=function(e){function t(t,n,r,o,i,s,a,l,c){e.call(this,t,n.isLeaf?L:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{},border:{}};return t.create=function(e,n,o,i,s,a){var l,c=s.nodeViews[n.type.name],u=c&&c(n,s,function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a},o),p=u&&u.dom,f=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else if(!p){var d;p=(d=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,f=d.contentDOM}f||n.isText||"BR"==p.nodeName||(p.contentEditable=!1,n.type.spec.draggable&&(p.draggable=!0));var h=p;return p=J(p,o,n),u?l=new G(e,n,o,i,p,f,h,u,s):n.isText?new j(e,n,o,i,p,h,s):new t(e,n,o,i,p,f,h,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?r.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&X(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,o=new Q(this),i=this.node.inlineContent;!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],u=null,p=0;;){if(l<o.length&&o[l].to==i){for(var f=o[l++],d=void 0;l<o.length&&o[l].to==i;)(d||(d=[f])).push(o[l++]);if(d){d.sort(Z);for(var h=0;h<d.length;h++)n(d[h],p)}else n(f,p)}var m=void 0;if(u)m=u,u=null;else{if(!(p<e.childCount))break;m=e.child(p++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from==i;)c.push(o[l++]);var g=i+m.nodeSize;if(m.isText){var y=g;l<o.length&&o[l].from<y&&(y=o[l].from);for(var b=0;b<c.length;b++)c[b].to<y&&(y=c[b].to);y<g&&(u=m.cut(y-i),m=m.cut(0,y-i),g=y)}r(m,c.length?c.slice():L,t.forChild(i,m),p-1),i=g}}(this.node,this.innerDeco,function(s,a){s.spec.marks?o.syncToMarks(s.spec.marks,i,e):s.type.side>=0&&o.syncToMarks(a==n.node.childCount?r.Mark.none:n.node.child(a).marks,i,e),o.placeWidget(s,e,t)},function(n,r,s,a){o.syncToMarks(n.marks,i,e),o.findNodeMatch(n,r,s,a)||o.updateNextNode(n,r,s,e,a)||o.addNode(n,r,s,e,t),t+=n.nodeSize}),o.syncToMarks(L,i,e),this.node.isTextblock&&o.addTextblockHacks(),o.destroyRest(),(o.changed||2==this.dirty)&&this.renderChildren()},t.prototype.renderChildren=function(){!function e(t,n){var r=t.firstChild;for(var o=0;o<n.length;o++){var i=n[o],s=i.dom;if(s.parentNode==t){for(;s!=r;)r=K(r);r=r.nextSibling}else t.insertBefore(s,r);if(i instanceof q){var a=r?r.previousSibling:t.lastChild;e(i.contentDOM,i.children),r=a?a.nextSibling:t.firstChild}}for(;r;)r=K(r)}(this.contentDOM,this.children,t.is),s.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!X(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=W(this.dom,this.nodeDOM,$(this.outerDeco,this.node,t),$(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode")},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode")},Object.defineProperties(t.prototype,n),t}(R);function B(e,t,n,r,o){return J(r,t,e),new z(null,e,t,n,r,r,r,o,0)}var j=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type},t}(z),V=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(R),G=function(e){function t(t,n,r,o,i,s,a,l,c){e.call(this,t,n,r,o,i,s,a,c),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(z);function U(e){e&&(this.nodeName=e)}U.prototype=Object.create(null);var H=[new U];function $(e,t,n){if(0==e.length)return H;for(var r=n?H[0]:new U,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs,a=r;if(s)for(var l in s.nodeName&&o.push(a=new U(s.nodeName)),s){var c=s[l];null!=c&&(n&&1==o.length&&o.push(a=r=new U(t.isInline?"span":"div")),"class"==l?a.class=(a.class?a.class+" ":"")+c:"style"==l?a.style=(a.style?a.style+";":"")+c:"nodeName"!=l&&(a[l]=c))}}return o}function W(e,t,n,r){if(n==H&&r==H)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==s.nodeName?o=l:((l=document.createElement(s.nodeName)).appendChild(o),o=l)}Y(o,a||H[0],s)}return o}function Y(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):L,s=n.class?n.class.split(" "):L,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&e.classList.add(s[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function J(e,t,n){return W(e,e,H,$(t,n,1!=e.nodeType))}function X(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function K(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Q=function(e){this.top=e,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;r>0&&o>=0;o--){var i=t[o],s=i.node;if(s){if(s!=e.child(r-1))break;n[--r]=i}}return n}(e.node.content,e.children)};function Z(e,t){return e.type.side-t.type.side}function ee(e,t){var n=e.selection,r=n.$anchor,i=n.$head,s=t>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&o.Selection.findFrom(a,t)}function te(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ne(e,t){var n=e.state.selection;if(n instanceof o.TextSelection){if(n.empty){if(e.endOfTextblock(t>0?"right":"left")){var r=ee(e.state,t);return!!(r&&r instanceof o.NodeSelection)&&te(e,r)}var i,s=n.$head,a=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(a&&o.NodeSelection.isSelectable(a)){var l=t<0?s.pos-a.nodeSize:s.pos;if(a.isAtom||(i=e.docView.descAt(l))&&!i.contentDOM)return te(e,new o.NodeSelection(t<0?e.state.doc.resolve(s.pos-a.nodeSize):s))}return!1}return!1}if(n instanceof o.NodeSelection&&n.node.isInline)return te(e,new o.TextSelection(t>0?n.$to:n.$from));var c=ee(e.state,t);return!!c&&te(e,c)}function re(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function oe(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function ie(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<re(n)&&oe(n.childNodes[r])&&(a=!0);;)if(r>0)if(1!=n.nodeType){if(3!=n.nodeType||"\ufeff"!=n.nodeValue.charAt(r-1))break;s.ie&&s.ie_version<=11&&(a=!0),o=n,i=--r}else{var l=n.childNodes[r-1];if(oe(l))o=n,i=--r;else{if(3!=l.nodeType)break;r=(n=l).nodeValue.length}}else{if(ae(n))break;for(var c=n.previousSibling;c&&oe(c);)o=n.parentNode,i=f(c),c=c.previousSibling;if(c)r=re(n=c);else{if((n=n.parentNode)==e.dom)break;r=0}}a?le(e,t,n,r):o&&le(e,t,o,i)}}function se(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=re(n);;)if(r<s){if(1!=n.nodeType)break;if(!oe(n.childNodes[r]))break;o=n,i=++r}else{if(ae(n))break;for(var a=n.nextSibling;a&&oe(a);)o=a.parentNode,i=f(a)+1,a=a.nextSibling;if(a)r=0,s=re(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}o&&le(e,t,o,i)}}function ae(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function le(e,t,n,r){if(b(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.selectionReader.storeDOMState(e.selection)}function ce(e,t){var n=e.state.selection;if(n instanceof o.TextSelection&&!n.empty)return!1;var r=n.$from,i=n.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=ee(e.state,t);if(s&&s instanceof o.NodeSelection)return te(e,s)}if(!r.parent.inlineContent){var a=o.Selection.findFrom(t<0?r:i,t);return!a||te(e,a)}return!1}function ue(e,t){if(!(e.state.selection instanceof o.TextSelection))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var l=e.state.tr;return t<0?l.delete(r.pos-a.nodeSize,r.pos):l.delete(r.pos,r.pos+a.nodeSize),e.dispatch(l),!0}return!1}function pe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function fe(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==r?ue(e,-1)||ie(e):46==n||s.mac&&68==n&&"c"==r?ue(e,1)||se(e):13==n||27==n||(37==n?ne(e,-1)||ie(e):39==n?ne(e,1)||se(e):38==n?ce(e,-1)||ie(e):40==n?function(e){if(s.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;pe(e,o,!0),setTimeout(function(){return pe(e,o,!1)},20)}}}(e)||ce(e,1)||se(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}Q.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Q.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Q.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r]);)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.top.children.splice(this.index,s-this.index)),this.top=this.top.children[this.index];else{var l=q.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},Q.prototype.findNodeMatch=function(e,t,n,r){for(var o=this.index,i=this.top.children,s=Math.min(i.length,o+5);o<s;o++){var a=i[o],l=void 0;if(a.matchesNode(e,t,n)&&(-1==(l=this.preMatched.indexOf(a))||l==r))return this.destroyBetween(this.index,o),this.index++,!0}return!1},Q.prototype.updateNextNode=function(e,t,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof z){var s=this.preMatched.indexOf(i);if(s>-1&&s!=o)return!1;var a=i.dom;if(i.update(e,t,n,r))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},Q.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,z.create(this.top,e,t,n,r,o)),this.changed=!0},Q.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new(e.spec.isCursorWrapper?F:P)(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},Q.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof q;)e=e.children[e.children.length-1];if(!e||!(e instanceof j)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new V(this.top,L,t,null)),this.changed=!0}};var de=function(e,t,n){this.prev=e,this.mapping=t,this.state=n},he=function(e){this.seen=[new de(null,null,e)],o.EditorState.addApplyListener(this.track=this.track.bind(this))};he.prototype.destroy=function(){o.EditorState.removeApplyListener(this.track)},he.prototype.find=function(e){for(var t=this.seen.length-1;t>=0;t--){var n=this.seen[t];if(n.state==e)return n}},he.prototype.track=function(e,t,n){var r=this.seen.length<200?this.find(e):null;r&&this.seen.push(new de(r,t.docChanged?t.mapping:null,n))},he.prototype.getMapping=function(e,t){var n=this.find(e);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var s=t||new i.Mapping,a=r.length-1;a>=0;a--)s.appendMapping(r[a]);return s};var me=function(e){var t=this;this.view=e,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=e.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?ve:ge)(this),this.focusFunc=function(){return t.poller.start(Se(t.view))}.bind(this),this.blurFunc=this.poller.stop,e.dom.addEventListener("focus",this.focusFunc),e.dom.addEventListener("blur",this.blurFunc),e.editable||this.poller.start(!1)};me.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},me.prototype.poll=function(e){this.poller.poll(e)},me.prototype.editableChanged=function(){this.view.editable?Se(this.view)||this.poller.stop():this.poller.start()},me.prototype.domChanged=function(){var e=this.view.root.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset},me.prototype.storeDOMState=function(e){var t=this.view.root.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastHeadNode=t.focusNode,this.lastHeadOffset=t.focusOffset,this.lastSelection=e},me.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},me.prototype.readFromDOM=function(e){if(!this.ignoreUpdates&&this.domChanged()&&Se(this.view)){if(this.suppressUpdates)return ye(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var t,n,r=this.view.root.getSelection(),i=this.view.state.doc,s=this.view.docView.nearestDesc(r.focusNode),a=s&&0==s.size,l=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),c=i.resolve(l);if(b(r)){for(t=c;s&&!s.node;)s=s.parent;if(s&&s.node.isAtom&&o.NodeSelection.isSelectable(s.node)&&s.parent){var u=s.posBefore;n=new o.NodeSelection(l==u?c:i.resolve(u))}}else t=i.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var p="pointer"==e||this.view.state.selection.head<c.pos&&!a?1:-1;n=Ee(this.view,t,c,p)}if(this.view.state.selection.eq(n))ye(this.view);else{var f=this.view.state.tr.setSelection(n);"pointer"==e?f.setMeta("pointer",!0):"key"==e&&f.scrollIntoView(),this.view.dispatch(f)}}}};var ve=function(e){var t=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=e,this.readFunc=function(){return e.readFromDOM(t.originTime>Date.now()-50?t.curOrigin:null)}};ve.prototype.poll=function(e){this.curOrigin=e,this.originTime=Date.now()},ve.prototype.start=function(e){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,e&&this.readFunc())},ve.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var ge=function(e){this.polling=null,this.reader=e,this.pollFunc=this.doPoll.bind(this,null)};function ye(e,t,n){var r=e.state.selection;if(function(e,t){if(t instanceof o.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(_e(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else _e(e)}(e,r),e.editable&&!e.hasFocus()){if(!t)return;s.gecko&&s.gecko_version<=55&&(e.selectionReader.ignoreUpdates=!0,e.dom.focus(),e.selectionReader.ignoreUpdates=!1)}else if(!e.editable&&!Ce(e)&&!t)return;var i=e.selectionReader;if(!i.lastSelection||!i.lastSelection.eq(r)||i.domChanged()){if(i.ignoreUpdates=!0,e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom;n.setEnd(r,r.childNodes.length),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var a,l,c=r.anchor,u=r.head;!be||r instanceof o.TextSelection||(r.$from.parent.inlineContent||(a=we(e,r.from)),r.empty||r.$from.parent.inlineContent||(l=we(e,r.to))),e.docView.setSelection(c,u,e.root,n),be&&(a&&(a.contentEditable="false"),l&&(l.contentEditable="false")),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):c!=u&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}i.storeDOMState(r),i.ignoreUpdates=!1}}ge.prototype.doPoll=function(e){var t=this.reader.view;t.focused||!t.editable?(this.reader.readFromDOM(e),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},ge.prototype.poll=function(e){clearTimeout(this.polling),this.polling=setTimeout(e?this.doPoll.bind(this,e):this.pollFunc,0)},ge.prototype.start=function(){null==this.polling&&this.poll()},ge.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var be=s.safari||s.chrome&&s.chrome_version<63;function we(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return i.contentEditable="true",i;if(s)return s.contentEditable="true",s}}function _e(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ee(e,t,n,r){return e.someProp("createSelectionBetween",function(r){return r(e,t,n)})||o.TextSelection.between(t,n,r)}function Se(e){return(!e.editable||e.root.activeElement==e.dom)&&Ce(e)}function Ce(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Te(e){return!1===e.type.spec.inclusive}function ke(e){var t=e.selection,n=t.$head,r=t.$anchor,o=t.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Te))?i:null}var Oe=function e(t,n){var r=this;this.view=t,this.state=t.state,this.composing=n,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout(function(){return r.finish()},e.commitTimeout),this.trackMappings=new he(t.state),this.mapping=new i.Mapping,this.mappingTo=t.state};function xe(e,t){return function(n){var r=n.pmViewDesc;if(r)return r.parseRule();if("BR"==n.nodeName&&n.parentNode){if(s.safari&&/^(ul|ol)$/i.test(n.parentNode.nodeName))return e.matchTag(document.createElement("li"),t);if(n.parentNode.lastChild==n||s.safari&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}}}function Ie(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(n)+1<e.node(n).childCount)return!1;return e.parentOffset==e.parent.content.size}function De(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(0)>0)return!1;return 0==e.parentOffset}function Me(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Ae(e,t,n,r){return Math.max(r.anchor,r.head)>t.content.size?null:Ee(e,t.resolve(n.map(r.anchor)),t.resolve(n.map(r.head)))}function Re(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Ne(e,t){for(var n=[],o=t.content,i=t.openStart,s=t.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),o=a.content}var l=e.someProp("clipboardSerializer")||r.DOMSerializer.fromSchema(e.state.schema),c=document.createElement("div");c.appendChild(l.serializeFragment(o));for(var u,p=c.firstChild;p&&1==p.nodeType&&(u=Fe[p.nodeName.toLowerCase()]);){for(var f=u.length-1;f>=0;f--){for(var d=document.createElement(u[f]);c.firstChild;)d.appendChild(c.firstChild);c.appendChild(d)}p=c.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:c,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function Le(e,t,n,o,i){var s,a,l=i.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(o||l||!n);if(c){if(e.someProp("transformPastedText",function(e){t=e(t)}),l)return new r.Slice(r.Fragment.from(e.state.schema.text(t)),0,0);var u=e.someProp("clipboardTextParser",function(e){return e(t,i)});u?a=u:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){s.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){return n=e(n)}),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(qe||(qe=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Fe[o[1].toLowerCase()])&&(e=n.map(function(e){return"<"+e+">"}).join("")+e+n.map(function(e){return"</"+e+">"}).reverse().join(""),i=n.length);r.innerHTML=e;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var p=s&&s.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!c&&!f),context:i})}return a=f?function(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,l=n.length-2;l>=0;l-=2){var c=o.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;i=r.Fragment.from(c.create(n[l+1],i)),s++,a++}return new r.Slice(i,s,a)}(new r.Slice(a.content,Math.min(a.openStart,+f[1]),Math.min(a.openEnd,+f[2])),f[3]):r.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var o=t.node(n),i=o.contentMatchAt(t.index(n)),s=void 0,a=[];if(e.forEach(function(e){if(a){var t,n=i.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&s.length&&function e(t,n,o,i,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,o,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));var l=i.contentMatchAt(i.childCount);if(l.matchType(s==t.length-1?o.type:t[s+1]))return i.copy(i.content.append(r.Fragment.from(Pe(o,t,s+1))))}}(n,s,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=function e(t,n){if(0==n)return t;var o=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1));var i=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(o.append(i))}(a[a.length-1],s.length));var o=Pe(e,n);a.push(o),i=i.matchType(o.type,o.attrs),s=n}}}),a)return{v:r.Fragment.from(a)}},o=t.depth;o>=0;o--){var i=n(o);if(i)return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function Pe(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,r.Fragment.from(e));return e}Oe.prototype.addRange=function(e,t){null==this.from?(this.from=e,this.to=t):(this.from=Math.min(e,this.from),this.to=Math.max(t,this.to))},Oe.prototype.changedRange=function(){if(null==this.from)return function(e){var t=e.$anchor.min(e.$head),n=e.$anchor.max(e.$head);if(t.sameParent(n)&&t.parent.inlineContent&&t.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,t.parentOffset),o=t.parent.content.size,i=Math.min(o,n.parentOffset);if(r>0&&(r=t.parent.childBefore(r).offset),i<o){var s=t.parent.childAfter(i);i=s.offset+s.node.nodeSize}var a=t.start();return{from:a+r,to:a+i}}for(var l=0;;l++){var c=De(t,l+1),u=Ie(n,l+1);if(c||u||t.index(l)!=n.index(l)||n.node(l).isTextblock){var p=t.before(l+1),f=n.after(l+1);return c&&t.index(l)>0&&(p-=t.node(l).child(t.index(l)-1).nodeSize),u&&n.index(l)+1<n.node(l).childCount&&(f+=n.node(l).child(n.index(l)+1).nodeSize),{from:p,to:f}}}}(this.state.selection);var e=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),t=this.state.doc.resolve(this.to),n=e.sharedDepth(this.to);return{from:e.before(n+1),to:t.after(n+1)}},Oe.prototype.markDirty=function(e){null==this.from?this.view.docView.markDirty((e=e||this.changedRange()).from,e.to):this.view.docView.markDirty(this.from,this.to)},Oe.prototype.stateUpdated=function(e){return this.trackMappings.getMapping(e,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new he(e),this.mappingTo=e,!0):(this.markDirty(),this.destroy(),!1)},Oe.prototype.finish=function(e){if(clearTimeout(this.timeout),!this.composing||e){this.view.domObserver.flush();var t=this.changedRange();this.markDirty(t),this.destroy();var n=this.state.selection,i=this.typeOver&&n instanceof o.TextSelection&&!n.empty&&n.$head.sameParent(n.$anchor);!function(e,t,n,i,a){var l,c,u=function(e,t,n){var o=e.docView.parseRange(n.from,n.to),i=o.node,a=o.fromOffset,l=o.toOffset,c=o.from,u=o.to,p=e.root.getSelection(),f=null,d=p.anchorNode;d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(f=[{node:d,offset:p.anchorOffset}],b(p)||f.push({node:p.focusNode,offset:p.focusOffset}));if(s.chrome&&8===e.lastKeyCode)for(var h=l;h>a;h--){var m=i.childNodes[h-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){l=h;break}if(!v||v.size)break}var g=t.doc,y=e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema),w=g.resolve(c),_=null,E=y.parse(i,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:l,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:xe(y,w),context:w});if(f&&null!=f[0].pos){var S=f[0].pos,C=f[1]&&f[1].pos;null==C&&(C=S),_={anchor:S+c,head:C+c}}return{doc:E,sel:_,from:c,to:u}}(e,n,i),p=n.doc,f=p.slice(u.from,u.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(l=n.selection.to,c="end"):(l=n.selection.from,c="start");e.lastKeyCode=null;var d=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));r-=a+c-i}if(a<i&&e.size<t.size){var u=r<=i&&r>=a?i-r:0;l=(i-=u)+(l-a),a=i}else if(l<i){var p=r<=i&&r>=l?i-r:0;a=(i-=p)+(a-l),l=i}return{start:i,endA:a,endB:l}}(f.content,u.doc.content,u.from,l,c);if(!d){if(a){var h=e.state,m=h.selection;e.dispatch(h.tr.replaceSelectionWith(h.schema.text(h.doc.textBetween(m.from,m.to)),!0).scrollIntoView())}else if(u.sel){var v=Ae(e,e.state.doc,t,u.sel);v&&!v.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(v))}return}var g,y=u.doc.resolveNoCache(d.start-u.from),w=u.doc.resolveNoCache(d.endB-u.from);if(!y.sameParent(w)&&y.pos<u.doc.content.size&&(g=o.Selection.findFrom(u.doc.resolve(y.pos+1),1,!0))&&g.head==w.pos&&e.someProp("handleKeyDown",function(t){return t(e,Me(13,"Enter"))}))return;if(n.selection.anchor>d.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Re(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Re(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||Re(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(p,d.start,d.endA,y,w)&&e.someProp("handleKeyDown",function(t){return t(e,Me(8,"Backspace"))}))return void(s.android&&s.chrome&&(e.selectionReader.suppressUpdates=!0,setTimeout(function(){return e.selectionReader.suppressUpdates=!1},50)));var _,E,S,C,T=t.map(d.start),k=t.map(d.endA,-1);if(y.sameParent(w)&&y.parent.inlineContent)if(y.pos==w.pos)_=e.state.tr.delete(T,k),E=p.resolve(d.start).marksAcross(p.resolve(d.endA));else if(d.endA==d.endB&&(C=p.resolve(d.start))&&(S=function(e,t){for(var n,o,i,s=e.firstChild.marks,a=t.firstChild.marks,l=s,c=a,u=0;u<a.length;u++)l=a[u].removeFromSet(l);for(var p=0;p<s.length;p++)c=s[p].removeFromSet(c);if(1==l.length&&0==c.length)o=l[0],n="add",i=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=l.length||1!=c.length)return null;o=c[0],n="remove",i=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(i(t.child(d)));if(r.Fragment.from(f).eq(e))return{mark:o,type:n}}(y.parent.content.cut(y.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,d.endA-C.start()))))_=e.state.tr,"add"==S.type?_.addMark(T,k,S.mark):_.removeMark(T,k,S.mark);else if(y.parent.child(y.index()).isText&&y.index()==w.index()-(w.textOffset?0:1)){var O=y.parent.textBetween(y.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",function(t){return t(e,T,k,O)}))return;_=e.state.tr.insertText(O,T,k)}_||(_=e.state.tr.replace(T,k,u.doc.slice(d.start-u.from,d.endB-u.from)));if(u.sel){var x=Ae(e,_.doc,t,u.sel);x&&_.setSelection(x)}E&&_.ensureMarks(E);e.dispatch(_.scrollIntoView())}(this.view,this.mapping,this.state,t,i),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Oe.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Oe.prototype.compositionEnd=function(){var e=this;this.composing&&(this.composing=!1,this.timeout=setTimeout(function(){return e.finish()},50))},Oe.start=function(e,t){return e.inDOMChange?t&&(clearTimeout(e.inDOMChange.timeout),e.inDOMChange.composing=!0):e.inDOMChange=new Oe(e,t),e.inDOMChange},Oe.commitTimeout=20;var Fe={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},qe=null;var ze={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},Be=s.ie&&s.ie_version<=11,je=function(e){var t=this;this.view=e,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){return t.registerMutations(e)}),Be&&(this.onCharData=function(e){return t.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})})};je.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,ze),Be&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},je.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),Be&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},je.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},je.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},je.prototype.registerMutation=function(e){if(this.view.editable){var t=this.view.docView.nearestDesc(e.target);if(("attributes"!=e.type||t!=this.view.docView&&"contenteditable"!=e.attributeName)&&t&&!t.ignoreMutation(e)){var n,r;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?f(e.previousSibling)+1:0;if(-1==o)return;n=t.localPosFromDOM(e.target,o,-1);var i=e.nextSibling&&e.nextSibling.parentNode==e.target?f(e.nextSibling):e.target.childNodes.length;if(-1==i)return;r=t.localPosFromDOM(e.target,i,1)}else"attributes"==e.type?(n=t.posAtStart-t.border,r=t.posAtEnd+t.border):(n=t.posAtStart,r=t.posAtEnd,e.target.nodeValue==e.oldValue&&(Oe.start(this.view).typeOver=!0));Oe.start(this.view).addRange(n,r)}}};var Ve={},Ge={};function Ue(e){e.someProp("handleDOMEvents",function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return He(e,t)})})}function He(e,t){return e.someProp("handleDOMEvents",function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function $e(e){return{left:e.clientX,top:e.clientY}}Ge.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,e.inDOMChange){if(e.inDOMChange.composing)return;e.inDOMChange.finish()}e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",function(n){return n(e,t)})||fe(e,t)?t.preventDefault():e.selectionReader.poll("key")},Ge.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Ge.keypress=function(e,t){if(!(e.inDOMChange||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",function(n){return n(e,t)}))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof o.TextSelection&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(t){return t(e,n.$from.pos,n.$to.pos,r)})||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var We={time:0,x:0,y:0,type:""};function Ye(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Je(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Xe(e,t,n,r,i){return Ye(e,"handleClickOn",t,n,r)||e.someProp("handleClick",function(n){return n(e,t,r)})||(i?function(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof o.NodeSelection&&(n=i.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var l=a>s.depth?s.nodeAfter:s.node(a);if(o.NodeSelection.isSelectable(l)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(Je(e,o.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.NodeSelection.isSelectable(r))&&(Je(e,new o.NodeSelection(n),"pointer"),!0)}(e,n))}function Ke(e,t,n,r){return Ye(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",function(n){return n(e,t,r)})||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Je(e,o.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)Je(e,o.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(s))continue;Je(e,o.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function Qe(e){return!!e.inDOMChange&&(e.inDOMChange.finish(!0),!0)}var Ze=s.mac?"metaKey":"ctrlKey";Ve.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Qe(e),r=Date.now(),o="singleClick";r-We.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,We)&&!t[Ze]&&("singleClick"==We.type?o="doubleClick":"doubleClick"==We.type&&(o="tripleClick")),We={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords($e(t));i&&("singleClick"==o?e.mouseDown=new et(e,i,t,n):("doubleClick"==o?function(e,t,n,r){return Ye(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",function(n){return n(e,t,r)})}:Ke)(e,i.pos,i.inside,t)?t.preventDefault():e.selectionReader.poll("pointer"))};var et=function(e,t,n,r){var i,a,l=this;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[Ze],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var c=e.state.doc.resolve(t.pos);i=c.parent,a=c.depth?c.before():0}this.mightDrag=null,this.target=r?null:n.target,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof o.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return l.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e.selectionReader.poll("pointer")};et.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},et.prototype.up=function(e){this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)&&(this.allowDefault?(s.ie&&ke(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Xe(this.view,this.pos.pos,this.pos.inside,e,this.selectNode)?e.preventDefault():this.flushed?(Je(this.view,o.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),e.preventDefault()):this.view.selectionReader.poll("pointer"))},et.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Ve.touchdown=function(e){Qe(e),e.selectionReader.poll("pointer")},Ve.contextmenu=function(e){return Qe(e)},Ge.compositionstart=Ge.compositionupdate=function(e){Oe.start(e,!0)},Ge.compositionend=function(e,t){if(!e.inDOMChange){if(!t.data)return;Oe.start(e,!0)}e.inDOMChange.compositionEnd()},Ge.input=function(e){var t=Oe.start(e);t.composing||t.finish()};var tt=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function nt(e,t,n,r){var o=Le(e,t,n,e.shiftKey,e.state.selection.$from);if(!o)return!1;if(e.someProp("handlePaste",function(t){return t(e,r,o)}))return!0;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ve.copy=Ge.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=tt?null:t.clipboardData,i=Ne(e,n.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){var n=t.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(function(){n.body.removeChild(r),e.focus()},50)}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Ge.paste=function(e,t){var n=tt?null:t.clipboardData;n&&(nt(e,n.getData("text/plain"),n.getData("text/html"),t)||n.files.length>0)?t.preventDefault():function(e,t){var n=e.dom.ownerDocument,r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(function(){e.focus(),n.body.removeChild(o),r?nt(e,o.value,null,t):nt(e,o.textContent,o.innerHTML,t)},50)}(e,t)};var rt=function(e,t){this.slice=e,this.move=t},ot=s.mac?"altKey":"ctrlKey";for(var it in Ve.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords($e(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof o.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),l=Ne(e,a),c=l.dom,u=l.text;t.dataTransfer.clearData(),t.dataTransfer.setData(tt?"Text":"text/html",c.innerHTML),tt||t.dataTransfer.setData("text/plain",u),e.dragging=new rt(a,!t[ot])}},Ve.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},Ge.dragover=Ge.dragenter=function(e,t){return t.preventDefault()},Ge.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords($e(t));if(r){var s=e.state.doc.resolve(r.pos);if(s){var a=n&&n.slice||Le(e,t.dataTransfer.getData(tt?"Text":"text/plain"),tt?null:t.dataTransfer.getData("text/html"),!1,s);if(a&&(t.preventDefault(),!e.someProp("handleDrop",function(r){return r(e,t,a,n&&n.move)}))){var l=a?i.dropPoint(e.state.doc,s.pos,a):s.pos;null==l&&(l=s.pos);var c=e.state.tr;n&&n.move&&c.deleteSelection();var u=c.mapping.map(l),p=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,f=c.doc;if(p?c.replaceRangeWith(u,u,a.content.firstChild):c.replaceRange(u,u,a),!c.doc.eq(f)){var d=c.doc.resolve(u);p&&o.NodeSelection.isSelectable(a.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(a.content.firstChild)?c.setSelection(new o.NodeSelection(d)):c.setSelection(Ee(e,d,c.doc.resolve(c.mapping.map(l)))),e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},Ve.focus=function(e){e.focused||(e.dom.classList.add("ProseMirror-focused"),e.focused=!0)},Ve.blur=function(e){e.focused&&(e.dom.classList.remove("ProseMirror-focused"),e.focused=!1)},Ge)Ve[it]=Ge[it];function st(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var at=function(e,t){this.spec=t||dt,this.side=this.spec.side||0,this.toDOM=e};at.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new ut(i-n,i-n,this)},at.prototype.valid=function(){return!0},at.prototype.eq=function(e){return this==e||e instanceof at&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&st(this.spec,e.spec))};var lt=function(e,t){this.spec=t||dt,this.attrs=e};lt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new ut(o,i,this)},lt.prototype.valid=function(e,t){return t.from<t.to},lt.prototype.eq=function(e){return this==e||e instanceof lt&&st(this.attrs,e.attrs)&&st(this.spec,e.spec)},lt.is=function(e){return e.type instanceof lt};var ct=function(e,t){this.spec=t||dt,this.attrs=e};ct.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new ut(o.pos-n,i.pos-n,this)},ct.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},ct.prototype.eq=function(e){return this==e||e instanceof ct&&st(this.attrs,e.attrs)&&st(this.spec,e.spec)};var ut=function(e,t,n){this.from=e,this.to=t,this.type=n},pt={spec:{}};ut.prototype.copy=function(e,t){return new ut(e,t,this.type)},ut.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},ut.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},ut.widget=function(e,t,n){return new ut(e,e,new at(t,n))},ut.inline=function(e,t,n,r){return new ut(e,t,new lt(n,r))},ut.node=function(e,t,n,r){return new ut(e,t,new ct(n,r))},pt.spec.get=function(){return this.type.spec},Object.defineProperties(ut.prototype,pt);var ft=[],dt={},ht=function(e,t){this.local=e&&e.length?e:ft,this.children=t&&t.length?t:ft};ht.create=function(e,t){return t.length?wt(t,e,0,dt):mt},ht.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ht.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,n,r+l,o)}},ht.prototype.map=function(e,t,n){return this==mt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||dt)},ht.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){for(var a=e.slice(),l=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+i||(t>=a[s]+i?a[s+1]=-1:(c=r-n-(t-e)+(i-o))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var f=n.map(a[p]+i),d=f-o;if(d<0||d>=r.content.size){u=!0;continue}var h=n.map(e[p+1]+i,-1),m=h-o,v=r.content.findIndex(d),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==d&&y+b.nodeSize==m){var w=a[p+2].mapInner(n,b,f+1,a[p]+i+1,s);w!=mt?(a[p]=d,a[p+1]=m,a[p+2]=w):(a[p+1]=-2,u=!0)}else u=!0}if(u){var _=function(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t||[],n,o,i,s),E=wt(_,r,0,s);t=E.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var C=0,T=0;C<E.children.length;C+=3){for(var k=E.children[C];T<a.length&&a[T]<k;)T+=3;a.splice(T,0,E.children[C],E.children[C+1],E.children[C+2])}}return new ht(t&&t.sort(_t),a)}(this.children,i,e,t,n,r,o):i?new ht(i.sort(_t)):mt},ht.prototype.add=function(e,t){return t.length?this==mt?ht.create(e,t):this.addInner(e,t,0):this},ht.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach(function(e,s){var a,l=s+n;if(a=yt(t,e,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,l+1):r.splice(i,0,s,s+e.nodeSize,wt(a,e,l+1,dt)),i+=3}});var s=gt(i?bt(t):t,-n);return new ht(s.length?this.local.concat(s).sort(_t):this.local,r||this.children)},ht.prototype.remove=function(e){return 0==e.length||this==mt?this:this.removeInner(e,0)},ht.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<a&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=mt?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,f=void 0;p<e.length;p++)if(f=e[p])for(var d=0;d<r.length;d++)r[d].type.eq(f.type)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ht(r,n):mt},ht.prototype.forChild=function(e,t){var n,r;if(this==mt)return this;if(t.isLeaf)return ht.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof lt){var c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var p=new ht(r.sort(_t));return n?new vt([p,n]):p}return n||mt},ht.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!1},ht.prototype.locals=function(e){return Et(this.localsInner(e))},ht.prototype.localsInner=function(e){if(this==mt)return ft;if(e.inlineContent||!this.local.some(lt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof lt||t.push(this.local[n]);return t};var mt=new ht;ht.empty=mt,ht.removeOverlap=Et;var vt=function(e){this.members=e};function gt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new ut(o.from+t,o.to+t,o.type))}return n}function yt(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function bt(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function wt(e,t,n,r){var o=[],i=!1;t.forEach(function(t,s){var a=yt(e,t,s+n);if(a){i=!0;var l=wt(a,t,n+s+1,r);l!=mt&&o.push(s,s+t.nodeSize,l)}});for(var s=gt(i?bt(e):e,-n).sort(_t),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ht(s,o):mt}function _t(e,t){return e.from-t.from||e.to-t.to}function Et(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),St(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),St(t,o+1,i.copy(r.to,i.to)))}}return t}function St(e,t,n){for(;t<e.length&&_t(n,e[t])>0;)t++;e.splice(t,0,n)}function Ct(e){var t=[];return e.someProp("decorations",function(n){var r=n(e.state);r&&r!=mt&&t.push(r)}),e.cursorWrapper&&t.push(ht.create(e.state.doc,[e.cursorWrapper.deco])),vt.from(t)}vt.prototype.forChild=function(e,t){if(t.isLeaf)return ht.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=mt&&(o instanceof vt?n=n.concat(o.members):n.push(o))}return vt.from(n)},vt.prototype.eq=function(e){if(!(e instanceof vt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},vt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Et(n?t:t.sort(_t)):ft},vt.from=function(e){switch(e.length){case 0:return mt;case 1:return e[0];default:return new vt(e)}};var Tt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=It(this),this.redraw=!1,this.cursorWrapper=null,xt(this),this.nodeViews=Mt(this),this.docView=B(this.state.doc,Ot(this),Ct(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.inDOMChange=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.domObserver=new je(e),e.domObserver.start(),e.eventHandlers=Object.create(null);var t=function(t){var n=Ve[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||He(e,t)||!e.editable&&t.type in Ge||n(e,t)})};for(var n in Ve)t(n);Ue(e)}(this),this.selectionReader=new me(this),this.pluginViews=[],this.updatePluginViews()},kt={props:{},root:{}};function Ot(e){var t=Object.create(null);return t.class="ProseMirror"+(e.focused?" ProseMirror-focused":""),t.contenteditable=String(e.editable),e.someProp("attributes",function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))}),[ut.node(0,e.state.doc.content.size,t)]}function xt(e){var t=ke(e.state);if(!t||s.ie&&e.mouseDown)e.cursorWrapper=null;else{var n,o=e.state.selection.visible,i=e.state.storedMarks||t.marks();e.cursorWrapper&&r.Mark.sameSet(e.cursorWrapper.deco.spec.marks,i)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==o?e.cursorWrapper.deco.pos!=t.pos&&(n=e.cursorWrapper.dom):n=function(e){var t=document.createElement("span");return t.textContent="\ufeff",e||(t.style.position="absolute",t.style.left="-100000px"),t}(o),n&&(e.cursorWrapper={dom:n,deco:ut.widget(t.pos,n,{isCursorWrapper:!0,marks:i,raw:!0,visible:o})})}}function It(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function Dt(e){var t=e.getSelection(),n=t.focusOffset,r=t.focusNode;return r&&3!=r.nodeType?[r,n,1==r.nodeType?r.childNodes[n-1]:null,1==r.nodeType?r.childNodes[n]:null]:null}function Mt(e){var t={};return e.someProp("nodeViews",function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}),t}kt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Tt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ue(this),this._props=e;var t=Mt(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(t,this.nodeViews)&&(this.nodeViews=t,this.redraw=!0),this.updateState(e.state)},Tt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Tt.prototype.updateState=function(e){var t=this,n=this.state;if(this.state=e,n.plugins!=e.plugins&&Ue(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(e)){var r=this.editable;this.editable=It(this),xt(this);var i=Ct(this),a=Ot(this),l=n.config!=e.config?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",c=this.redraw||!this.docView.matchesNode(e.doc,a,i),u=c||!e.selection.eq(n.selection)||this.selectionReader.domChanged(),p="preserve"==l&&u&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=e.dom.ownerDocument,s=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var l=e.root.elementFromPoint(s,a);if(l!=e.dom&&e.dom.contains(l)){var c=l.getBoundingClientRect();if(c.top>=o-20){t=l,n=c.top;break}}}for(var u=[],p=e.dom;p&&(u.push({dom:p,top:p.scrollTop,left:p.scrollLeft}),p!=i.body);p=d(p));return{refDOM:t,refTop:n,stack:u}}(this);if(u){this.domObserver.stop();var f=!1;if(c){var h=s.chrome&&Dt(this.root);!this.redraw&&this.docView.update(e.doc,a,i,this)||(this.docView.destroy(),this.docView=B(e.doc,a,i,this.dom,this),this.redraw=!1),this.selectionReader.clearDOMState(),h&&(f=function(e,t){var n=Dt(t);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<e.length;r++)if(n[r]!=e[r])return!0;return!1}(h,this.root))}ye(this,!1,f),this.domObserver.start()}if(r!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(n),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(t)})||(e.selection instanceof o.NodeSelection?E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),m):E(this,this.coordsAtPos(e.selection.head),m))}else p&&function(e){for(var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0,i=0==o?0:o-n,s=0;s<r.length;s++){var a=r[s],l=a.dom,c=a.top,u=a.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=u&&(l.scrollLeft=u)}}(p)}},Tt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Tt.prototype.updatePluginViews=function(e){var t=this.state.plugins;if(e&&e.plugins==t)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<t.length;o++){var i=t[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Tt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},Tt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Tt.prototype.focus=function(){this.domObserver.stop(),ye(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},kt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},Tt.prototype.posAtCoords=function(e){var t=C(this,e);return this.inDOMChange&&t&&(t.pos=this.inDOMChange.mapping.map(t.pos),-1!=t.inside&&(t.inside=this.inDOMChange.mapping.map(t.inside))),t},Tt.prototype.coordsAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),k(this,e)},Tt.prototype.domAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),this.docView.domFromPos(e)},Tt.prototype.nodeDOM=function(e){this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e));var t=this.docView.descAt(e);return t?t.nodeDOM:null},Tt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},Tt.prototype.endOfTextblock=function(e,t){return A(this,t||this.state,e)},Tt.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.inDOMChange&&e.inDOMChange.destroy(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],Ct(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Tt.prototype.dispatchEvent=function(e){return function(e,t){He(e,t)||!Ve[t.type]||!e.editable&&t.type in Ge||Ve[t.type](e,t)}(this,e)},Tt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Tt.prototype,kt),t.EditorView=Tt,t.Decoration=ut,t.DecorationSet=ht,t.__serializeForClipboard=Ne,t.__parseFromClipboard=Le},function(e,t,n){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,o=r.exec(n);if(!o)return n;var i="",s=0,a=0;for(s=o.index;s<n.length;s++){switch(n.charCodeAt(s)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==s&&(i+=n.substring(a,s)),a=s+1,i+=t}return a!==s?i+n.substring(a,s):i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(5),i=["ol",0],s=["ul",0],a=["li",0],l={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?i:["ol",{start:e.attrs.order},0]}},c={parseDOM:[{tag:"ul"}],toDOM:function(){return s}},u={parseDOM:[{tag:"li"}],toDOM:function(){return a},defining:!0};function p(e,t){var n={};for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n}t.orderedList=l,t.bulletList=c,t.listItem=u,t.addListNodes=function(e,t,n){return e.append({ordered_list:p(l,{content:"list_item+",group:n}),bullet_list:p(c,{content:"list_item+",group:n}),list_item:p(u,{content:t})})},t.wrapInList=function(e,t){return function(n,i){var s=n.selection,a=s.$from,l=s.$to,c=a.blockRange(l),u=!1,p=c;if(!c)return!1;if(c.depth>=2&&a.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==a.index(c.depth-1))return!1;var f=n.doc.resolve(c.start-2);p=new o.NodeRange(f,f,c.depth),c.endIndex<c.parent.childCount&&(c=new o.NodeRange(a,n.doc.resolve(l.end(c.depth)),c.depth)),u=!0}var d=r.findWrapping(p,e,t,c);return!!d&&(i&&i(function(e,t,n,i,s){for(var a=o.Fragment.empty,l=n.length-1;l>=0;l--)a=o.Fragment.from(n[l].type.create(n[l].attrs,a));e.step(new r.ReplaceAroundStep(t.start-(i?2:0),t.end,t.start,t.end,new o.Slice(a,0,0),n.length,!0));for(var c=0,u=0;u<n.length;u++)n[u].type==s&&(c=u+1);for(var p=n.length-c,f=t.start+n.length-(i?2:0),d=t.parent,h=t.startIndex,m=t.endIndex,v=!0;h<m;h++,v=!1)!v&&r.canSplit(e.doc,f,p)&&(e.split(f,p),f+=2*p),f+=d.child(h).nodeSize;return e}(n.tr,c,d,u,e).scrollIntoView()),!0)}},t.splitListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=i.node;if(l&&l.isBlock||s.depth<2||!s.sameParent(a))return!1;var c=s.node(-1);if(c.type!=e)return!1;if(0==s.parent.content.size){if(2==s.depth||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var u=o.Fragment.empty,p=s.index(-1)>0,f=s.depth-(p?1:2);f>=s.depth-3;f--)u=o.Fragment.from(s.node(f).copy(u));u=u.append(o.Fragment.from(e.createAndFill()));var d=t.tr.replace(s.before(p?null:-1),s.after(-3),new o.Slice(u,p?3:2,2));d.setSelection(t.selection.constructor.near(d.doc.resolve(s.pos+(p?3:2)))),n(d.scrollIntoView())}return!0}var h=a.pos==s.end()?c.defaultContentType(0):null,m=t.tr.delete(s.pos,a.pos),v=h&&[null,{type:h}];return!!r.canSplit(m.doc,s.pos,2,v)&&(n&&n(m.split(s.pos,2,v).scrollIntoView()),!0)}},t.liftListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=s.blockRange(a,function(t){return t.childCount&&t.firstChild.type==e});return!!l&&(!n||(s.node(l.depth-1).type==e?function(e,t,n,i){var s=e.tr,a=i.end,l=i.$to.end(i.depth);return a<l&&(s.step(new r.ReplaceAroundStep(a-1,l,a,l,new o.Slice(o.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.NodeRange(s.doc.resolve(i.$from.pos),s.doc.resolve(l),i.depth)),t(s.lift(i,r.liftTarget(i)).scrollIntoView()),!0}(t,n,e,l):function(e,t,n){for(var i=e.tr,s=n.parent,a=n.end,l=n.endIndex-1,c=n.startIndex;l>c;l--)a-=s.child(l).nodeSize,i.delete(a-1,a+1);var u=i.doc.resolve(n.start),p=u.nodeAfter,f=0==n.startIndex,d=n.endIndex==s.childCount,h=u.node(-1),m=u.index(-1);if(!h.canReplace(m+(f?0:1),m+1,p.content.append(d?o.Fragment.empty:o.Fragment.from(s))))return!1;var v=u.pos,g=v+p.nodeSize;return i.step(new r.ReplaceAroundStep(v-(f?1:0),g+(d?1:0),v+1,g-1,new o.Slice((f?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))).append(d?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))),f?0:1,d?0:1),f?0:1)),t(i.scrollIntoView()),!0}(t,n,l)))}},t.sinkListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=s.blockRange(a,function(t){return t.childCount&&t.firstChild.type==e});if(!l)return!1;var c=l.startIndex;if(0==c)return!1;var u=l.parent,p=u.child(c-1);if(p.type!=e)return!1;if(n){var f=p.lastChild&&p.lastChild.type==u.type,d=o.Fragment.from(f?e.create():null),h=new o.Slice(o.Fragment.from(e.create(null,o.Fragment.from(u.copy(d)))),f?3:1,0),m=l.start,v=l.end;n(t.tr.step(new r.ReplaceAroundStep(m-(f?3:1),v,m,v,h,1,!0)).scrollIntoView())}return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(5),i=n(1);function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var s=u(o);if(!s){var a=o.blockRange(),c=a&&r.liftTarget(a);return null!=c&&(t&&t(e.tr.lift(a,c).scrollIntoView()),!0)}var p=s.nodeBefore;if(!p.type.spec.isolating&&w(e,s,t))return!0;if(0==o.parent.content.size&&(l(p,"end")||i.NodeSelection.isSelectable(p))){if(t){var f=e.tr.deleteRange(o.before(),o.after());f.setSelection(l(p,"end")?i.Selection.findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(f.doc,s.pos-p.nodeSize)),t(f.scrollIntoView())}return!0}return!(!p.isAtom||s.depth!=o.depth-1)&&(t&&t(e.tr.delete(s.pos-p.nodeSize,s.pos).scrollIntoView()),!0)}function l(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var o=u(r),s=o&&o.nodeBefore;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function u(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function p(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=d(r);if(!o)return!1;var s=o.nodeAfter;if(w(e,o,t))return!0;if(0==r.parent.content.size&&(l(s,"start")||i.NodeSelection.isSelectable(s))){if(t){var a=e.tr.deleteRange(r.before(),r.after());a.setSelection(l(s,"start")?i.Selection.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):i.NodeSelection.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0)}function f(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=d(r),s=o&&o.nodeAfter;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,o.pos)).scrollIntoView()),!0)}function d(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function h(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),l=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,l))return!1;if(t){var c=r.after(),u=e.tr.replaceWith(c,c,l.createAndFill());u.setSelection(i.Selection.near(u.doc.resolve(c),1)),t(u.scrollIntoView())}return!0}function v(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!s||!s.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=e.tr.insert(a,s.createAndFill());l.setSelection(i.TextSelection.create(l.doc,a+1)),t(l.scrollIntoView())}return!0}function g(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(r.canSplit(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),s=i&&r.liftTarget(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function y(e,t){var n=e.selection,s=n.$from,a=n.$to;if(e.selection instanceof i.NodeSelection&&e.selection.node.isBlock)return!(!s.parentOffset||!r.canSplit(e.doc,s.pos))&&(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(t){var l=a.parentOffset==a.parent.content.size,c=e.tr;e.selection instanceof i.TextSelection&&c.deleteSelection();var u=0==s.depth?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType,p=l&&u?[{type:u}]:null,f=r.canSplit(c.doc,s.pos,1,p);p||f||!r.canSplit(c.doc,c.mapping.map(s.pos),1,u&&[{type:u}])||(p=[{type:u}],f=!0),f&&(c.split(c.mapping.map(s.pos),1,p),l||s.parentOffset||s.parent.type==u||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o.Fragment.from(u.create(),s.parent))||c.setNodeMarkup(c.mapping.map(s.before()),u)),t(c.scrollIntoView())}return!0}function b(e,t){return t&&t(e.tr.setSelection(new i.AllSelection(e.doc))),!0}function w(e,t,n){var s,a,l=t.nodeBefore,c=t.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(function(e,t,n){var o=t.nodeBefore,i=t.nodeAfter,s=t.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!i.isTextblock&&!r.canJoin(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(s=(a=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&a.matchType(s[0]||c.type).validEnd){if(n){for(var u=t.pos+c.nodeSize,p=o.Fragment.empty,f=s.length-1;f>=0;f--)p=o.Fragment.from(s[f].create(null,p));p=o.Fragment.from(l.copy(p));var d=e.tr.step(new r.ReplaceAroundStep(t.pos-1,u,t.pos,u,new o.Slice(p,1,0),s.length,!0)),h=u+2*s.length;r.canJoin(d.doc,h)&&d.join(h),n(d.scrollIntoView())}return!0}var m=i.Selection.findFrom(t,1),v=m&&m.$from.blockRange(m.$to),g=v&&r.liftTarget(v);return null!=g&&g>=t.depth&&(n&&n(e.tr.lift(v,g).scrollIntoView()),!0)}function _(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var E=_(s,a,c),S=_(s,p,f),C={Enter:_(h,v,g,y),"Mod-Enter":m,Backspace:E,"Mod-Backspace":E,Delete:S,"Mod-Delete":S,"Mod-a":b},T={"Ctrl-h":C.Backspace,"Alt-Backspace":C["Mod-Backspace"],"Ctrl-d":C.Delete,"Ctrl-Alt-Backspace":C["Mod-Delete"],"Alt-Delete":C["Mod-Delete"],"Alt-d":C["Mod-Delete"]};for(var k in C)T[k]=C[k];var O=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?T:C;t.deleteSelection=s,t.joinBackward=a,t.selectNodeBackward=c,t.joinForward=p,t.selectNodeForward=f,t.joinUp=function(e,t){var n,o=e.selection,s=o instanceof i.NodeSelection;if(s){if(o.node.isTextblock||!r.canJoin(e.doc,o.from))return!1;n=o.from}else if(null==(n=r.joinPoint(e.doc,o.from,-1)))return!1;if(t){var a=e.tr.join(n);s&&a.setSelection(i.NodeSelection.create(a.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},t.joinDown=function(e,t){var n,o=e.selection;if(o instanceof i.NodeSelection){if(o.node.isTextblock||!r.canJoin(e.doc,o.to))return!1;n=o.to}else if(null==(n=r.joinPoint(e.doc,o.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},t.lift=function(e,t){var n=e.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&r.liftTarget(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)},t.newlineInCode=h,t.exitCode=m,t.createParagraphNear=v,t.liftEmptyBlock=g,t.splitBlock=y,t.splitBlockKeepMarks=function(e,t){return y(e,t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})},t.selectParentNode=function(e,t){var n,r=e.selection,o=r.$from,s=r.to,a=o.sharedDepth(s);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,n))),!0)},t.selectAll=b,t.wrapIn=function(e,t){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,l=s.blockRange(a),c=l&&r.findWrapping(l,e,t);return!!c&&(o&&o(n.tr.wrap(l,c).scrollIntoView()),!0)}},t.setBlockType=function(e,t){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}}),!!a&&(r&&r(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}},t.toggleMark=function(e,t){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)}),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,e))return!1;if(r)if(s)e.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=n.tr,u=0;!l&&u<a.length;u++){var p=a[u],f=p.$from,d=p.$to;l=n.doc.rangeHasMark(f.pos,d.pos,e)}for(var h=0;h<a.length;h++){var m=a[h],v=m.$from,g=m.$to;l?c.removeMark(v.pos,g.pos,e):c.addMark(v.pos,g.pos,e.create(t))}r(c.scrollIntoView())}return!0}},t.autoJoin=function(e,t){if(Array.isArray(t)){var n=t;t=function(e){return n.indexOf(e.type.name)>-1}}return function(n,o){return e(n,o&&function(e,t){return function(n){if(!n.isGeneric)return e(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var s=n.mapping.maps[i],a=0;a<o.length;a++)o[a]=s.map(o[a]);s.forEach(function(e,t,n,r){return o.push(n,r)})}for(var l=[],c=0;c<o.length;c+=2)for(var u=o[c],p=o[c+1],f=n.doc.resolve(u),d=f.sharedDepth(p),h=f.node(d),m=f.indexAfter(d),v=f.after(d+1);v<=p;++m){var g=h.maybeChild(m);if(!g)break;if(m&&-1==l.indexOf(v)){var y=h.child(m-1);y.type==g.type&&t(y,g)&&l.push(v)}v+=g.nodeSize}l.sort(function(e,t){return e-t});for(var b=l.length-1;b>=0;b--)r.canJoin(n.doc,l[b])&&n.join(l[b]);e(n)}}(o,t))}},t.chainCommands=_,t.pcBaseKeymap=C,t.macBaseKeymap=T,t.baseKeymap=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(41))&&"object"==typeof r&&"default"in r?r.default:r,i=n(1),s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function a(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var l=0;l<i.length-1;l++){var c=i[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);s?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function l(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function c(e){var t=function(e){var t=Object.create(null);for(var n in e)t[a(n)]=e[n];return t}(e);return function(e,n){var r,i=o(n),s=1==i.length&&" "!=i,a=t[l(i,n,!s)];if(a&&a(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(r=o.base[n.keyCode])&&r!=i){var c=t[l(r,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}t.keymap=function(e){return new i.Plugin({props:{handleKeyDown:c(e)}})},t.keydownHandler=c},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E49\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))})})},r.prototype.at=function(e,t,n){var r=this.__find__(e),o=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=o.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var o=this.__find__(e),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var o=this.__find__(e),i=r||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)},this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)},this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(7),i=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){var i=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);i+=t[0].slice(s+t[1].length);var a=(r+=s)-o;a>0&&(i=t[0].slice(s-a,s)+i,r=o)}var l=e.doc.resolve(r).marks();return e.tr.replaceWith(r,o,e.schema.text(i,l))}):t};var s=500;var a=new i(/--$/,"—"),l=new i(/\.\.\.$/,"…"),c=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),u=new i(/"$/,"”"),p=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),f=new i(/'$/,"’"),d=[c,u,p,f];t.InputRule=i,t.inputRules=function(e){var t=e.rules;return new r.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,n,r,o){var i=e.state,a=i.doc.resolve(n);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-s),a.parentOffset,null,"￼")+o,c=0;c<t.length;c++){var u=t[c].match.exec(l),p=u&&t[c].handler(i,u,n-(u[0].length-o.length),r);if(p)return e.dispatch(p.setMeta(this,{transform:p,from:n,to:r,text:o})),!0}return!1}},isInputRules:!0})},t.undoInputRule=function(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){for(var s=e.tr,a=i.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));var c=s.doc.resolve(i.from).marks();t(s.replaceWith(i.from,i.to,e.schema.text(i.text,c)))}return!0}}return!1},t.emDash=a,t.ellipsis=l,t.openDoubleQuote=c,t.closeDoubleQuote=u,t.openSingleQuote=p,t.closeSingleQuote=f,t.smartQuotes=d,t.wrappingInputRule=function(e,t,n,r){return new i(e,function(e,i,s,a){var l=n instanceof Function?n(i):n,c=e.tr.delete(s,a),u=c.doc.resolve(s).blockRange(),p=u&&o.findWrapping(u,t,l);if(!p)return null;c.wrap(u,p);var f=c.doc.resolve(s-1).nodeBefore;return f&&f.type==t&&o.canJoin(c.doc,s-1)&&(!r||r(i,f))&&c.join(s-1),c})},t.textblockTypeInputRule=function(e,t,n){return new i(e,function(e,r,o,i){var s=e.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null})}},function(e,t,n){
/*!
 * FilePond 4.8.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */
!function(e){"use strict";var t,n,r,o=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},i=function(e){var t={};return o(e,function(n){!function(e,t,n){"function"!=typeof n?Object.defineProperty(e,t,Object.assign({},n)):e[t]=n}(t,n,e[n])}),t},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===n)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},a=["svg","path"],l=function(e){return a.includes(e)},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof t&&(n=t,t=null);var r=l(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(l(e)?s(r,"class",t):r.className=t),o(n,function(e,t){s(r,e,t)}),r},u=function(e,t){return function(e,n){return void 0!==n?t.splice(n,0,e):t.push(e),e}},p=function(e,t){return function(n){return t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n}},f=function(e,t,n,r){var o=n[0]||e.left,i=n[1]||e.top,s=o+e.width,a=i+e.height*(r[1]||1),l={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:i,right:s,bottom:a}};return t.filter(function(e){return!e.isRectIgnored()}).map(function(e){return e.rect}).forEach(function(e){d(l.inner,Object.assign({},e.inner)),d(l.outer,Object.assign({},e.outer))}),h(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,h(l.outer),l},d=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},h=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},m=function(e){return"number"==typeof e},v=function(e){return e<.5?2*e*e:(4-2*e)*e-1},g={spring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiffness,n=void 0===t?.5:t,r=e.damping,o=void 0===r?.75:r,s=e.mass,a=void 0===s?10:s,l=null,c=null,u=0,p=!1,f=i({interpolate:function(){if(!p)return m(l)&&m(c)?void(!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(e-t)<r&&Math.abs(n)<r}(c+=u+=-(c-l)*n/a,l,u*=o)?f.onupdate(c):(c=l,u=0,p=!0,f.onupdate(c),f.oncomplete(c))):(p=!0,void(u=0))},target:{set:function(e){if(m(e)&&!m(c)&&(c=e),null===l&&(l=e,c=e),c===(l=e)||void 0===l)return p=!0,u=0,f.onupdate(c),void f.oncomplete(c);p=!1},get:function(){return l}},resting:{get:function(){return p}},onupdate:function(e){},oncomplete:function(e){}});return f},tween:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.duration,o=void 0===r?500:r,s=n.easing,a=void 0===s?v:s,l=n.delay,c=void 0===l?0:l,u=null,p=!0,f=!1,d=null,h=i({interpolate:function(n){p||null===d||(null===u&&(u=n),n-u<c||((e=n-u-c)<o?(t=e/o,h.onupdate((e>=0?a(f?1-t:t):0)*d)):(e=1,t=f?0:1,h.onupdate(t*d),h.oncomplete(t*d),p=!0)))},target:{get:function(){return f?0:d},set:function(e){if(null===d)return d=e,h.onupdate(e),void h.oncomplete(e);e<d?(d=1,f=!0):(f=!1,d=e),p=!1,u=null}},resting:{get:function(){return p}},onupdate:function(e){},oncomplete:function(e){}});return h}},y=function(e,t,n){var r=e[t]&&"object"==typeof e[t][n]?e[t][n]:e[t]||e,o="string"==typeof r?r:r.type,i="object"==typeof r?Object.assign({},r):{};return g[o]?g[o](i):null},b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach(function(t){e.forEach(function(e){var o=e,i=function(){return n[e]},s=function(t){return n[e]=t};"object"==typeof e&&(o=e.key,i=e.getter||i,s=e.setter||s),t[o]&&!r||(t[o]={get:i,set:s})})})},w=function(e){return null!=e},_={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},E=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var n in t)if(t[n]!==e[n])return!0;return!1},S=function(e,t){var n=t.opacity,r=t.perspective,o=t.translateX,i=t.translateY,s=t.scaleX,a=t.scaleY,l=t.rotateX,c=t.rotateY,u=t.rotateZ,p=t.originX,f=t.originY,d=t.width,h=t.height,m="",v="";(w(p)||w(f))&&(v+="transform-origin: "+(p||0)+"px "+(f||0)+"px;"),w(r)&&(m+="perspective("+r+"px) "),(w(o)||w(i))&&(m+="translate3d("+(o||0)+"px, "+(i||0)+"px, 0) "),(w(s)||w(a))&&(m+="scale3d("+(w(s)?s:1)+", "+(w(a)?a:1)+", 1) "),w(u)&&(m+="rotateZ("+u+"rad) "),w(l)&&(m+="rotateX("+l+"rad) "),w(c)&&(m+="rotateY("+c+"rad) "),m.length&&(v+="transform:"+m+";"),w(n)&&(v+="opacity:"+n+";",0===n&&(v+="visibility:hidden;"),n<1&&(v+="pointer-events:none;")),w(h)&&(v+="height:"+h+"px;"),w(d)&&(v+="width:"+d+"px;");var g=e.elementCurrentStyle||"";v.length===g.length&&v===g||(e.style.cssText=v,e.elementCurrentStyle=v)},C={styles:function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewInternalAPI,o=e.viewExternalAPI,i=e.view,s=Object.assign({},n),a={};b(t,[r,o],n);var l=function(){return i.rect?f(i.rect,i.childViews,[n.translateX||0,n.translateY||0],[n.scaleX||0,n.scaleY||0]):null};return r.rect={get:l},o.rect={get:l},t.forEach(function(e){n[e]=void 0===s[e]?_[e]:s[e]}),{write:function(){if(E(a,n))return S(i.element,n),Object.assign(a,Object.assign({},n)),!0},destroy:function(){}}},listeners:function(e){e.mixinConfig,e.viewProps,e.viewInternalAPI;var t,n=e.viewExternalAPI,r=(e.viewState,e.view),o=[],i=(t=r.element,function(e,n){t.addEventListener(e,n)}),s=function(e){return function(t,n){e.removeEventListener(t,n)}}(r.element);return n.on=function(e,t){o.push({type:e,fn:t}),i(e,t)},n.off=function(e,t){o.splice(o.findIndex(function(n){return n.type===e&&n.fn===t}),1),s(e,t)},{write:function(){return!0},destroy:function(){o.forEach(function(e){s(e.type,e.fn)})}}},animations:function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewInternalAPI,i=e.viewExternalAPI,s=(e.viewState,Object.assign({},n)),a=[];return o(t,function(e,t){var o=y(t);if(o){o.onupdate=function(t){n[e]=t},o.target=s[e];var l={key:e,setter:function(e){o.target!==e&&(o.target=e)},getter:function(){return n[e]}};b([l],[r,i],n,!0),a.push(o)}}),{write:function(e){var t=!0;return a.forEach(function(n){n.resting||(t=!1),n.interpolate(e)}),t},destroy:function(){}}},apis:function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewExternalAPI;b(t,r,n)}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tag,n=void 0===t?"div":t,r=e.name,o=void 0===r?null:r,s=e.attributes,a=void 0===s?{}:s,l=e.read,d=void 0===l?function(){}:l,h=e.write,m=void 0===h?function(){}:h,v=e.create,g=void 0===v?function(){}:v,y=e.destroy,b=void 0===y?function(){}:y,w=e.filterFrameActionsForChild,_=void 0===w?function(e,t){return t}:w,E=e.didCreateView,S=void 0===E?function(){}:E,k=e.didWriteView,O=void 0===k?function(){}:k,x=e.ignoreRect,I=void 0!==x&&x,D=e.ignoreRectUpdate,M=void 0!==D&&D,A=e.mixins,R=void 0===A?[]:A;return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=c(n,"filepond--"+o,a),l=window.getComputedStyle(s,null),h=T(),v=null,y=!1,w=[],E=[],k={},x={},D=[m],A=[d],N=[b],L=function(){return s},P=function(){return w.concat()},F=function(){return v||(v=f(h,w,[0,0],[1,1]))},q={element:{get:L},style:{get:function(){return l}},childViews:{get:P}},z=Object.assign({},q,{rect:{get:F},ref:{get:function(){return k}},is:function(e){return o===e},appendChild:(t=s,function(e,n){void 0!==n&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)}),createChildView:function(e){return function(t,n){return t(e,n)}}(e),linkView:function(e){return w.push(e),e},unlinkView:function(e){w.splice(w.indexOf(e),1)},appendChildView:u(0,w),removeChildView:p(s,w),registerWriter:function(e){return D.push(e)},registerReader:function(e){return A.push(e)},registerDestroyer:function(e){return N.push(e)},invalidateLayout:function(){return s.layoutCalculated=!1},dispatch:e.dispatch,query:e.query}),B={element:{get:L},childViews:{get:P},rect:{get:F},resting:{get:function(){return y}},isRectIgnored:function(){return I},_read:function(){v=null,w.forEach(function(e){return e._read()}),M&&h.width&&h.height||T(h,s,l);var e={root:V,props:r,rect:h};A.forEach(function(t){return t(e)})},_write:function(e,t,n){var o=0===t.length;return D.forEach(function(i){!1===i({props:r,root:V,actions:t,timestamp:e,shouldOptimize:n})&&(o=!1)}),E.forEach(function(t){!1===t.write(e)&&(o=!1)}),w.filter(function(e){return!!e.element.parentNode}).forEach(function(r){r._write(e,_(r,t),n)||(o=!1)}),w.forEach(function(r,i){r.element.parentNode||(V.appendChild(r.element,i),r._read(),r._write(e,_(r,t),n),o=!1)}),y=o,O({props:r,root:V,actions:t,timestamp:e}),o},_destroy:function(){E.forEach(function(e){return e.destroy()}),N.forEach(function(e){e({root:V,props:r})}),w.forEach(function(e){return e._destroy()})}},j=Object.assign({},q,{rect:{get:function(){return h}}});Object.keys(R).sort(function(e,t){return"styles"===e?1:"styles"===t?-1:0}).forEach(function(e){var t=C[e]({mixinConfig:R[e],viewProps:r,viewState:x,viewInternalAPI:z,viewExternalAPI:B,view:i(j)});t&&E.push(t)});var V=i(z);g({root:V,props:r});var G=s.children.length;return w.forEach(function(e,t){V.appendChild(e.element,G+t)}),S(V),i(B)}},O=function(e,t){return function(n){var r=n.root,o=n.props,i=n.actions,s=void 0===i?[]:i,a=n.timestamp,l=n.shouldOptimize;s.filter(function(t){return e[t.type]}).forEach(function(t){return e[t.type]({root:r,props:o,action:t.data,timestamp:a,shouldOptimize:l})}),t&&t({root:r,props:o,actions:s,timestamp:a,shouldOptimize:l})}},x=function(e,t){return t.parentNode.insertBefore(e,t)},I=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},D=function(e){return Array.isArray(e)},M=function(e){return null==e},A=function(e){return e.trim()},R=function(e){return""+e},N=function(e){return"boolean"==typeof e},L=function(e){return N(e)?e:"true"===e},P=function(e){return"string"==typeof e},F=function(e){return m(e)?e:P(e)?R(e).replace(/[a-z]+/gi,""):0},q=function(e){return parseInt(F(e),10)},z=function(e){return parseFloat(F(e))},B=function(e){return m(e)&&isFinite(e)&&Math.floor(e)===e},j=function(e){if(B(e))return e;var t=R(e).trim();return/MB$/i.test(t)?(t=t.replace(/MB$i/,"").trim(),1e3*q(t)*1e3):/KB/i.test(t)?(t=t.replace(/KB$i/,"").trim(),1e3*q(t)):q(t)},V=function(e){return"function"==typeof e},G={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},U=function(e,t,n,r,o){if(null===t)return null;if("function"==typeof t)return t;var i={url:"GET"===n||"PATCH"===n?"?"+e+"=":"",method:n,headers:o,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(P(t))return i.url=t,i;if(Object.assign(i,t),P(i.headers)){var s=i.headers.split(/:(.+)/);i.headers={header:s[0],value:s[1]}}return i.withCredentials=L(i.withCredentials),i},H=function(e){return"object"==typeof e&&null!==e},$=function(e){return D(e)?"array":function(e){return null===e}(e)?"null":B(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":function(e){return H(e)&&P(e.url)&&H(e.process)&&H(e.revert)&&H(e.restore)&&H(e.fetch)}(e)?"api":typeof e},W={array:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return M(e)?[]:D(e)?e:R(e).split(t).map(A).filter(function(e){return e.length})},boolean:L,int:function(e){return"bytes"===$(e)?j(e):q(e)},number:z,float:z,bytes:j,string:function(e){return V(e)?e:R(e)},function:function(e){return function(e){for(var t=self,n=e.split("."),r=null;r=n.shift();)if(!(t=t[r]))return null;return t}(e)},serverapi:function(e){return(n={}).url=P(t=e)?t:t.url||"",n.timeout=t.timeout?parseInt(t.timeout,10):0,n.headers=t.headers?t.headers:{},o(G,function(e){n[e]=U(e,t[e],G[e],n.timeout,n.headers)}),n.remove=t.remove||null,delete n.headers,n;var t,n},object:function(e){try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(e){return null}}},Y=function(e,t,n){if(e===t)return e;var r,o=$(e);if(o!==n){var i=(r=e,W[n](r));if(o=$(i),null===i)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+n+'"';e=i}return e},J=function(e){var t={};return o(e,function(n){var r,o,i,s=e[n];t[n]=(r=s[0],o=s[1],i=r,{enumerable:!0,get:function(){return i},set:function(e){i=Y(e,r,o)}})}),i(t)},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(e){return e.toLowerCase()}).join(t)},K=function(e){return function(t,n,r){var i={};return o(e,function(e){var n=X(e,"_").toUpperCase();i["SET_"+n]=function(o){try{r.options[e]=o.value}catch(e){}t("DID_SET_"+n,{value:r.options[e]})}}),i}},Q=function(e){return function(t){var n={};return o(e,function(e){n["GET_"+X(e,"_").toUpperCase()]=function(n){return t.options[e]}}),n}},Z={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},ee=function(){return Math.random().toString(36).substr(2,9)},te=function(e,t){return e.splice(t,1)},ne=function(){var e=[],t=function(t,n){te(e,e.findIndex(function(e){return e.event===t&&(e.cb===n||!n)}))};return{fire:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.filter(function(e){return e.event===t}).map(function(e){return e.cb}).forEach(function(e){setTimeout(function(){e.apply(void 0,r)},0)})},on:function(t,n){e.push({event:t,cb:n})},onOnce:function(n,r){e.push({event:n,cb:function(){t(n,r),r.apply(void 0,arguments)}})},off:t}},re=function(e,t,n){Object.getOwnPropertyNames(e).filter(function(e){return!n.includes(e)}).forEach(function(n){return Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})},oe=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ie=function(e){var t={};return re(e,t,oe),t},se={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ae={INPUT:1,LIMBO:2,LOCAL:3},le=function(e){return/[^0-9]+/.exec(e)},ce=function(){return le(1.1.toLocaleString())[0]},ue={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},pe=[],fe=function(e,t,n){return new Promise(function(r,o){var i=pe.filter(function(t){return t.key===e}).map(function(e){return e.cb});if(0!==i.length){var s=i.shift();i.reduce(function(e,t){return e.then(function(e){return t(e,n)})},s(t,n)).then(function(e){return r(e)}).catch(function(e){return o(e)})}else r(t)})},de=function(e,t,n){return pe.filter(function(t){return t.key===e}).map(function(e){return e.cb(t,n)})},he=function(e,t){return pe.push({key:e,cb:t})},me=function(){return Object.assign({},ve)},ve={id:[null,ue.STRING],name:["filepond",ue.STRING],disabled:[!1,ue.BOOLEAN],className:[null,ue.STRING],required:[!1,ue.BOOLEAN],captureMethod:[null,ue.STRING],allowDrop:[!0,ue.BOOLEAN],allowBrowse:[!0,ue.BOOLEAN],allowPaste:[!0,ue.BOOLEAN],allowMultiple:[!1,ue.BOOLEAN],allowReplace:[!0,ue.BOOLEAN],allowRevert:[!0,ue.BOOLEAN],forceRevert:[!1,ue.BOOLEAN],maxFiles:[null,ue.INT],checkValidity:[!1,ue.BOOLEAN],itemInsertLocationFreedom:[!0,ue.BOOLEAN],itemInsertLocation:["before",ue.STRING],itemInsertInterval:[75,ue.INT],dropOnPage:[!1,ue.BOOLEAN],dropOnElement:[!0,ue.BOOLEAN],dropValidation:[!1,ue.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],ue.ARRAY],instantUpload:[!0,ue.BOOLEAN],maxParallelUploads:[2,ue.INT],chunkUploads:[!1,ue.BOOLEAN],chunkForce:[!1,ue.BOOLEAN],chunkSize:[5e6,ue.INT],chunkRetryDelays:[[500,1e3,3e3],ue.Array],server:[null,ue.SERVER_API],labelDecimalSeparator:[ce(),ue.STRING],labelThousandsSeparator:[(t=ce(),n=1e3.toLocaleString(),r=1e3.toString(),n!==r?le(n)[0]:"."===t?",":"."),ue.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',ue.STRING],labelInvalidField:["Field contains invalid files",ue.STRING],labelFileWaitingForSize:["Waiting for size",ue.STRING],labelFileSizeNotAvailable:["Size not available",ue.STRING],labelFileCountSingular:["file in list",ue.STRING],labelFileCountPlural:["files in list",ue.STRING],labelFileLoading:["Loading",ue.STRING],labelFileAdded:["Added",ue.STRING],labelFileLoadError:["Error during load",ue.STRING],labelFileRemoved:["Removed",ue.STRING],labelFileRemoveError:["Error during remove",ue.STRING],labelFileProcessing:["Uploading",ue.STRING],labelFileProcessingComplete:["Upload complete",ue.STRING],labelFileProcessingAborted:["Upload cancelled",ue.STRING],labelFileProcessingError:["Error during upload",ue.STRING],labelFileProcessingRevertError:["Error during revert",ue.STRING],labelTapToCancel:["tap to cancel",ue.STRING],labelTapToRetry:["tap to retry",ue.STRING],labelTapToUndo:["tap to undo",ue.STRING],labelButtonRemoveItem:["Remove",ue.STRING],labelButtonAbortItemLoad:["Abort",ue.STRING],labelButtonRetryItemLoad:["Retry",ue.STRING],labelButtonAbortItemProcessing:["Cancel",ue.STRING],labelButtonUndoItemProcessing:["Undo",ue.STRING],labelButtonRetryItemProcessing:["Retry",ue.STRING],labelButtonProcessItem:["Upload",ue.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',ue.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',ue.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',ue.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',ue.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',ue.STRING],oninit:[null,ue.FUNCTION],onwarning:[null,ue.FUNCTION],onerror:[null,ue.FUNCTION],onactivatefile:[null,ue.FUNCTION],onaddfilestart:[null,ue.FUNCTION],onaddfileprogress:[null,ue.FUNCTION],onaddfile:[null,ue.FUNCTION],onprocessfilestart:[null,ue.FUNCTION],onprocessfileprogress:[null,ue.FUNCTION],onprocessfileabort:[null,ue.FUNCTION],onprocessfilerevert:[null,ue.FUNCTION],onprocessfile:[null,ue.FUNCTION],onprocessfiles:[null,ue.FUNCTION],onremovefile:[null,ue.FUNCTION],onpreparefile:[null,ue.FUNCTION],onupdatefiles:[null,ue.FUNCTION],beforeDropFile:[null,ue.FUNCTION],beforeAddFile:[null,ue.FUNCTION],beforeRemoveFile:[null,ue.FUNCTION],stylePanelLayout:[null,ue.STRING],stylePanelAspectRatio:[null,ue.STRING],styleItemPanelAspectRatio:[null,ue.STRING],styleButtonRemoveItemPosition:["left",ue.STRING],styleButtonProcessItemPosition:["right",ue.STRING],styleLoadIndicatorPosition:["right",ue.STRING],styleProgressIndicatorPosition:["right",ue.STRING],files:[[],ue.ARRAY]},ge=function(e,t){return M(t)?e[0]||null:B(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find(function(e){return e.id===t})||null)},ye=function(e){if(M(e))return e;if(/:/.test(e)){var t=e.split(":");return t[1]/t[0]}return parseFloat(e)},be=function(e){return e.filter(function(e){return!e.archived})},we={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},_e=[se.LOAD_ERROR,se.PROCESSING_ERROR,se.PROCESSING_REVERT_ERROR],Ee=[se.LOADING,se.PROCESSING,se.PROCESSING_QUEUED,se.INIT],Se=[se.PROCESSING_COMPLETE],Ce=function(e){return _e.includes(e.status)},Te=function(e){return Ee.includes(e.status)},ke=function(e){return Se.includes(e.status)},Oe=function(e){return{GET_STATUS:function(){var t=be(e.items),n=we.EMPTY,r=we.ERROR,o=we.BUSY,i=we.IDLE,s=we.READY;return 0===t.length?n:t.some(Ce)?r:t.some(Te)?o:t.some(ke)?s:i},GET_ITEM:function(t){return ge(e.items,t)},GET_ACTIVE_ITEM:function(t){return ge(be(e.items),t)},GET_ACTIVE_ITEMS:function(){return be(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(t){var n=ge(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:function(t){var n=ge(e.items,t);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter(function(e){return/^style/.test(e)}).map(function(t){return{name:t,value:e.options[t]}})},GET_PANEL_ASPECT_RATIO:function(){var t=/circle/.test(e.options.stylePanelLayout),n=t?1:ye(e.options.stylePanelAspectRatio);return n},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(t){return be(e.items).filter(function(e){return e.status===t})},GET_TOTAL_ITEMS:function(){return be(e.items).length},IS_ASYNC:function(){return H(e.options.server)&&(H(e.options.server.process)||V(e.options.server.process))}}},xe=function(e,t,n){return M(t)?null:void 0===n?(e.push(t),t):(r=n,o=0,i=e.length,n=Math.max(Math.min(i,r),o),function(e,t,n){e.splice(t,0,n)}(e,n,t),t);var r,o,i},Ie=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},De=function(e){return e.split("/").pop().split("?").shift()},Me=function(e){return e.split(".").pop()},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t+e).slice(-t.length)},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+Ae(e.getMonth()+1,"00")+"-"+Ae(e.getDate(),"00")+"_"+Ae(e.getHours(),"00")+"-"+Ae(e.getMinutes(),"00")+"-"+Ae(e.getSeconds(),"00")},Ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o="string"==typeof n?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,P(t)||(t=Re()),t&&null===r&&Me(t)?o.name=t:(r=r||function(e){if("string"!=typeof e)return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""}(o.type),o.name=t+(r?"."+r:"")),o},Le=function(e,t){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Pe=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},Fe=function(e){var t=Pe(e),n=function(e){return atob(function(e){return e.split(",")[1].replace(/\s/g,"")}(e))}(e);return function(e,t){for(var n=new ArrayBuffer(e.length),r=new Uint8Array(n),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return Le(n,t)}(n,t)},qe=function(e){if(!/^content-disposition:/i.test(e))return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(function(e){return e.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(e){return e.length});return t.length?decodeURI(t[t.length-1]):null},ze=function(e){if(/content-length:/i.test(e)){var t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Be=function(e){if(/x-content-transfer-id:/i.test(e)){var t=(e.split(":")[1]||"").trim();return t||null}return null},je=function(e){var t={source:null,name:null,size:null},n=e.split("\n"),r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value,c=qe(l);if(c)t.name=c;else{var u=ze(l);if(u)t.size=u;else{var p=Be(l);p&&(t.source=p)}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return t},Ve=function(e){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=function(n){e?(t.timestamp=Date.now(),t.request=e(n,function(e){t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=Ne(e,e.name||De(n))),r.fire("load",e instanceof Blob?e:e.body)},function(e){r.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)},function(e,n,o){o&&(t.size=o),t.duration=Date.now()-t.timestamp,e?(t.progress=n/o,r.fire("progress",t.progress)):t.progress=null},function(){r.fire("abort")},function(e){var n=je("string"==typeof e?e:e.headers);r.fire("meta",{size:t.size||n.size,filename:n.name,source:n.source})})):r.fire("error",{type:"error",body:"Can't load URL",code:400})},r=Object.assign({},ne(),{setSource:function(e){return t.source=e},getProgress:function(){return t.progress},abort:function(){t.request&&t.request.abort&&t.request.abort()},load:function(){var e,o,i=t.source;r.fire("init",i),i instanceof File?r.fire("load",i):i instanceof Blob?r.fire("load",Ne(i,i.name)):Ie(i)?r.fire("load",Ne(Fe(i),e,null,o)):n(i)}});return r},Ge=function(e){return/GET|HEAD/.test(e)},Ue=function(e,t,n){var r={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){o=!0,s.abort()}},o=!1,i=!1;n=Object.assign({method:"POST",headers:{},withCredentials:!1},n),t=encodeURI(t),Ge(n.method)&&e&&(t=""+t+encodeURIComponent("string"==typeof e?e:JSON.stringify(e)));var s=new XMLHttpRequest,a=Ge(n.method)?s:s.upload;return a.onprogress=function(e){o||r.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=function(){s.readyState<2||4===s.readyState&&0===s.status||i||(i=!0,r.onheaders(s))},s.onload=function(){s.status>=200&&s.status<300?r.onload(s):r.onerror(s)},s.onerror=function(){return r.onerror(s)},s.onabort=function(){o=!0,r.onabort()},s.ontimeout=function(){return r.ontimeout(s)},s.open(n.method,t,!0),B(n.timeout)&&(s.timeout=n.timeout),Object.keys(n.headers).forEach(function(e){var t=unescape(encodeURIComponent(n.headers[e]));s.setRequestHeader(e,t)}),n.responseType&&(s.responseType=n.responseType),n.withCredentials&&(s.withCredentials=!0),s.send(e),r},He=function(e,t,n,r){return{type:e,code:t,body:n,headers:r}},$e=function(e){return function(t){e(He("error",0,"Timeout",t.getAllResponseHeaders()))}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!P(t.url))return null;var n=t.onload||function(e){return e},r=t.onerror||function(e){return null};return function(o,i,s,a,l,c){var u=Ue(o,e+t.url,Object.assign({},t,{responseType:"blob"}));return u.onload=function(e){var t=e.getAllResponseHeaders(),r=je(t).name||De(o);i(He("load",e.status,Ne(n(e.response),r),t))},u.onerror=function(e){s(He("error",e.status,r(e.response)||e.statusText,e.getAllResponseHeaders()))},u.onheaders=function(e){c(He("headers",e.status,null,e.getAllResponseHeaders()))},u.ontimeout=$e(s),u.onprogress=a,u.onabort=l,u}};function Ye(e){this.wrapped=e}function Je(e){var t,n;function r(t,n){try{var i=e[t](n),s=i.value,a=s instanceof Ye;Promise.resolve(a?s.wrapped:s).then(function(e){a?r("next",e):o(i.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,s){var a={key:e,arg:o,resolve:i,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ke(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(Je.prototype[Symbol.asyncIterator]=function(){return this}),Je.prototype.next=function(e){return this._invoke("next",e)},Je.prototype.throw=function(e){return this._invoke("throw",e)},Je.prototype.return=function(e){return this._invoke("return",e)};var Qe={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Ze=function(e,t,n,r,o,i,s,a,l,c,u){for(var p=[],f=u.chunkTransferId,d=u.chunkServer,h=u.chunkSize,m=u.chunkRetryDelays,v={serverId:f,aborted:!1},g=t.ondata||function(e){return e},y=t.onload||function(e,t){return"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response},b=t.onerror||function(e){return null},w=Math.floor(r.size/h),_=0;_<=w;_++){var E=_*h,S=r.slice(E,E+h,"application/offset+octet-stream");p[_]={index:_,size:S.size,offset:E,data:S,file:r,progress:0,retries:Xe(m),status:Qe.QUEUED,error:null,request:null,timeout:null}}var C,T,k,O,x=function(e){return e.status===Qe.QUEUED||e.status===Qe.ERROR},I=function(t){if(!v.aborted)if(t=t||p.find(x)){t.status=Qe.PROCESSING,t.progress=null;var n=d.ondata||function(e){return e},o=d.onerror||function(e){return null},a=e+d.url+v.serverId,c="function"==typeof d.headers?d.headers(t):Object.assign({},d.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":r.size,"Upload-Name":r.name}),u=t.request=Ue(n(t.data),a,Object.assign({},d,{headers:c}));u.onload=function(){t.status=Qe.COMPLETE,t.request=null,A()},u.onprogress=function(e,n,r){t.progress=e?n:null,M()},u.onerror=function(e){t.status=Qe.ERROR,t.request=null,t.error=o(e.response)||e.statusText,D(t)||s(He("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},u.ontimeout=function(e){t.status=Qe.ERROR,t.request=null,D(t)||$e(s)(e)},u.onabort=function(){t.status=Qe.QUEUED,t.request=null,l()}}else p.every(function(e){return e.status===Qe.COMPLETE})&&i(v.serverId)},D=function(e){return 0!==e.retries.length&&(e.status=Qe.WAITING,clearTimeout(e.timeout),e.timeout=setTimeout(function(){I(e)},e.retries.shift()),!0)},M=function(){var e=p.reduce(function(e,t){return null===e||null===t.progress?null:e+t.progress},0);if(null===e)return a(!1,0,0);var t=p.reduce(function(e,t){return e+t.size},0);a(!0,e,t)},A=function(){var e=p.filter(function(e){return e.status===Qe.PROCESSING}).length;e>=1||I()};return v.serverId?(C=function(e){v.aborted||(p.filter(function(t){return t.offset<e}).forEach(function(e){e.status=Qe.COMPLETE,e.progress=e.size}),A())},T=e+d.url+v.serverId,k={headers:"function"==typeof t.headers?t.headers(v.serverId):Object.assign({},t.headers),method:"HEAD"},(O=Ue(null,T,k)).onload=function(e){return C(y(e,k.method))},O.onerror=function(e){return s(He("error",e.status,b(e.response)||e.statusText,e.getAllResponseHeaders()))},O.ontimeout=$e(s)):function(i){var a=new FormData;H(o)&&a.append(n,JSON.stringify(o));var l="function"==typeof t.headers?t.headers(r,o):Object.assign({},t.headers,{"Upload-Length":r.size}),c=Object.assign({},t,{headers:l}),u=Ue(g(a),e+t.url,c);u.onload=function(e){return i(y(e,c.method))},u.onerror=function(e){return s(He("error",e.status,b(e.response)||e.statusText,e.getAllResponseHeaders()))},u.ontimeout=$e(s)}(function(e){v.aborted||(c(e),v.serverId=e,A())}),{abort:function(){v.aborted=!0,p.forEach(function(e){clearTimeout(e.timeout),e.request&&e.request.abort()})}}},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return"function"==typeof t?function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return t.apply(void 0,[n].concat(o,[r]))}:t&&P(t.url)?function(e,t,n,r){return function(o,i,s,a,l,c,u){if(o){var p=r.chunkUploads,f=p&&o.size>r.chunkSize,d=p&&(f||r.chunkForce);if(o instanceof Blob&&d)return Ze(e,t,n,o,i,s,a,l,c,u,r);var h=t.ondata||function(e){return e},m=t.onload||function(e){return e},v=t.onerror||function(e){return null},g=new FormData;H(i)&&g.append(n,JSON.stringify(i)),(o instanceof Blob?[{name:null,file:o}]:o).forEach(function(e){g.append(n,e.file,null===e.name?e.file.name:""+e.name+e.file.name)});var y=Ue(h(g),e+t.url,t);return y.onload=function(e){s(He("load",e.status,m(e.response),e.getAllResponseHeaders()))},y.onerror=function(e){a(He("error",e.status,v(e.response)||e.statusText,e.getAllResponseHeaders()))},y.ontimeout=$e(a),y.onprogress=l,y.onabort=c,y}}}(e,t,n,r):null},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!P(t.url))return function(e,t){return t()};var n=t.onload||function(e){return e},r=t.onerror||function(e){return null};return function(o,i,s){var a=Ue(o,e+t.url,t);return a.onload=function(e){i(He("load",e.status,n(e.response),e.getAllResponseHeaders()))},a.onerror=function(e){s(He("error",e.status,r(e.response)||e.statusText,e.getAllResponseHeaders()))},a.ontimeout=$e(s),a}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+Math.random()*(t-e)},rt=function(e){var t={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},n=function(){t.request&&(t.perceivedPerformanceUpdater.clear(),t.request.abort(),t.complete=!0)},r=Object.assign({},ne(),{process:function(n,o){var i=function(){0!==t.duration&&null!==t.progress&&r.fire("progress",r.getProgress())},s=function(){t.complete=!0,r.fire("load-perceived",t.response.body)};r.fire("start"),t.timestamp=Date.now(),t.perceivedPerformanceUpdater=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:25),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,o=null,i=Date.now();return function s(){var a=Date.now()-i,l=nt(n,r);a+l>t&&(l=a+l-t);var c=a/t;c>=1?e(1):(e(c),o=setTimeout(s,l))}(),{clear:function(){clearTimeout(o)}}}(function(e){t.perceivedProgress=e,t.perceivedDuration=Date.now()-t.timestamp,i(),t.response&&1===t.perceivedProgress&&!t.complete&&s()},nt(750,1500)),t.request=e(n,o,function(e){t.response=H(e)?e:{type:"load",code:200,body:""+e,headers:{}},t.duration=Date.now()-t.timestamp,t.progress=1,r.fire("load",t.response.body),1===t.perceivedProgress&&s()},function(e){t.perceivedPerformanceUpdater.clear(),r.fire("error",H(e)?e:{type:"error",code:0,body:""+e})},function(e,n,r){t.duration=Date.now()-t.timestamp,t.progress=e?n/r:null,i()},function(){t.perceivedPerformanceUpdater.clear(),r.fire("abort",t.response?t.response.body:null)},function(e){r.fire("transfer",e)})},abort:n,getProgress:function(){return t.progress?Math.min(t.progress,t.perceivedProgress):null},getDuration:function(){return Math.min(t.duration,t.perceivedDuration)},reset:function(){n(),t.complete=!1,t.perceivedProgress=0,t.progress=0,t.timestamp=null,t.perceivedDuration=0,t.duration=0,t.request=null,t.response=null}});return r},ot=function(e){return e.substr(0,e.lastIndexOf("."))||e},it=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=ee(),o={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?se.PROCESSING_COMPLETE:se.INIT,activeLoader:null,activeProcessor:null},s=null,a={},l=function(e){return o.status=e},c=function(e){if(!o.released&&!o.frozen){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p.fire.apply(p,[e].concat(n))}},u=function(e,t,n){var r=e.split("."),o=r[0],i=r.pop(),s=a;r.forEach(function(e){return s=s[e]}),JSON.stringify(s[i])!==JSON.stringify(t)&&(s[i]=t,n||c("metadata-update",{key:o,value:a[o]}))},p=Object.assign({id:{get:function(){return r}},origin:{get:function(){return e}},serverId:{get:function(){return o.serverFileReference}},transferId:{get:function(){return o.transferId}},status:{get:function(){return o.status}},filename:{get:function(){return o.file.name}},filenameWithoutExtension:{get:function(){return ot(o.file.name)}},fileExtension:{get:function(){return Me(o.file.name)}},fileType:{get:function(){return o.file.type}},fileSize:{get:function(){return o.file.size}},file:{get:function(){return o.file}},source:{get:function(){return o.source}},getMetadata:function(e){return function e(t){if(!H(t))return t;var n=D(t)?[]:{};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];n[r]=o&&H(o)?e(o):o}return n}(e?a[e]:a)},setMetadata:function(e,t,n){if(H(e)){var r=e;return Object.keys(r).forEach(function(e){u(e,r[e],t)}),e}return u(e,t,n),t},extend:function(e,t){return f[e]=t},abortLoad:function(){o.activeLoader?o.activeLoader.abort():(l(se.INIT),c("load-abort"))},retryLoad:function(){o.activeLoader&&o.activeLoader.load()},requestProcessing:function(){o.processingAborted=!1,l(se.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise(function(e){if(!o.activeProcessor)return o.processingAborted=!0,l(se.IDLE),c("process-abort"),void e();s=function(){e()},o.activeProcessor.abort()})},load:function(t,n,r){o.source=t,o.file?c("load-skip"):(o.file=function(e){var t=[e.name,e.size,e.type];return e instanceof Blob||Ie(e)?t[0]=e.name||Re():Ie(e)?(t[1]=e.length,t[2]=Pe(e)):P(e)&&(t[0]=De(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}}(t),n.on("init",function(){c("load-init")}),n.on("meta",function(t){o.file.size=t.size,o.file.filename=t.filename,t.source&&(e=ae.LIMBO,o.serverFileReference=t.source,o.status=se.PROCESSING_COMPLETE),c("load-meta")}),n.on("progress",function(e){l(se.LOADING),c("load-progress",e)}),n.on("error",function(e){l(se.LOAD_ERROR),c("load-request-error",e)}),n.on("abort",function(){l(se.INIT),c("load-abort")}),n.on("load",function(t){o.activeLoader=null;var n=function(t){o.file=it(t)?t:o.file,e===ae.LIMBO&&o.serverFileReference?l(se.PROCESSING_COMPLETE):l(se.IDLE),c("load")};o.serverFileReference?n(t):r(t,n,function(e){o.file=t,c("load-meta"),l(se.LOAD_ERROR),c("load-file-error",e)})}),n.setSource(t),o.activeLoader=n,n.load())},process:function e(t,n){if(o.processingAborted)o.processingAborted=!1;else if(l(se.PROCESSING),s=null,o.file instanceof Blob){t.on("load",function(e){o.transferId=null,o.serverFileReference=e}),t.on("transfer",function(e){o.transferId=e}),t.on("load-perceived",function(e){o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,l(se.PROCESSING_COMPLETE),c("process-complete",e)}),t.on("start",function(){c("process-start")}),t.on("error",function(e){o.activeProcessor=null,l(se.PROCESSING_ERROR),c("process-error",e)}),t.on("abort",function(e){o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,l(se.IDLE),c("process-abort"),s&&s()}),t.on("progress",function(e){c("process-progress",e)});var r=console.error;n(o.file,function(e){o.archived||t.process(e,Object.assign({},a))},r),o.activeProcessor=t}else p.on("load",function(){e(t,n)})},revert:function(e,t){return new Promise(function(n,r){null!==o.serverFileReference?(e(o.serverFileReference,function(){o.serverFileReference=null,n()},function(e){t?(l(se.PROCESSING_REVERT_ERROR),c("process-revert-error"),r(e)):n()}),l(se.IDLE),c("process-revert")):n()})}},ne(),{freeze:function(){return o.frozen=!0},release:function(){return o.released=!0},released:{get:function(){return o.released}},archive:function(){return o.archived=!0},archived:{get:function(){return o.archived}}}),f=i(p);return f},at=function(e,t){var n=function(e,t){return M(t)?0:P(t)?e.findIndex(function(e){return e.id===t}):-1}(e,t);if(!(n<0))return e[n]||null},lt=function(e,t,n,r,o,i){var s=Ue(null,e,{method:"GET",responseType:"blob"});return s.onload=function(n){var r=n.getAllResponseHeaders(),o=je(r).name||De(e);t(He("load",n.status,Ne(n.response,o),r))},s.onerror=function(e){n(He("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=function(e){i(He("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=$e(n),s.onprogress=r,s.onabort=o,s},ct=function(e){return 0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},ut=function(e){return function(){return V(e)?e.apply(void 0,arguments):e}},pt=function(e,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(function(){e("DID_UPDATE_ITEMS",{items:be(t.items)})},0)},ft=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(function(t){if(!e)return t(!0);var r=e.apply(void 0,n);return null==r?t(!0):"boolean"==typeof r?t(r):void("function"==typeof r.then&&r.then(t))})},dt=function(e,t){e.items.sort(function(e,n){return t(ie(e),ie(n))})},ht=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.query,o=n.success,i=void 0===o?function(){}:o,s=n.failure,a=void 0===s?function(){}:s,l=ge(e.items,r);l?t(l,i,a):a({error:He("error",0,"Item not found"),file:null})}},mt=function(e,t,n){return{ABORT_ALL:function(){be(n.items).forEach(function(e){e.freeze(),e.abortLoad(),e.abortProcessing()})},DID_SET_FILES:function(t){var r=t.value,o=void 0===r?[]:r,i=o.map(function(e){return{source:e.source?e.source:e,options:e.options}}),s=be(n.items);s.forEach(function(t){i.find(function(e){return e.source===t.source||e.source===t.file})||e("REMOVE_ITEM",{query:t})}),s=be(n.items),i.forEach(function(t,n){s.find(function(e){return e.source===t.source||e.file===t.source})||e("ADD_ITEM",Object.assign({},t,{interactionMethod:Z.NONE,index:n}))})},DID_UPDATE_ITEM_METADATA:function(r){var o=r.id;clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(function(){var r=at(n.items,o);if(t("IS_ASYNC")){var i,s=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:o})},32)};return r.status===se.PROCESSING_COMPLETE?(i=n.options.instantUpload,void r.revert(tt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(i?s:function(){}).catch(function(){})):r.status===se.PROCESSING?function(e){r.abortProcessing().then(e?s:function(){})}(n.options.instantUpload):void(n.options.instantUpload&&s())}fe("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:t}).then(function(t){t&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:r,success:function(t){e("DID_PREPARE_OUTPUT",{id:o,file:t})}},!0)})},0)},SORT:function(e){var t=e.compare;dt(n,t)},ADD_ITEMS:function(n){var r=n.items,o=n.index,i=n.interactionMethod,s=n.success,a=void 0===s?function(){}:s,l=n.failure,c=void 0===l?function(){}:l,u=o;if(-1===o||void 0===o){var p=t("GET_ITEM_INSERT_LOCATION"),f=t("GET_TOTAL_ITEMS");u="before"===p?0:f}var d=t("GET_IGNORED_FILES"),h=r.filter(function(e){return it(e)?!d.includes(e.name.toLowerCase()):!M(e)}),m=h.map(function(t){return new Promise(function(n,r){e("ADD_ITEM",{interactionMethod:i,source:t.source||t,success:n,failure:r,index:u++,options:t.options||{}})})});Promise.all(m).then(a).catch(c)},ADD_ITEM:function(r){var o=r.source,i=r.index,s=void 0===i?-1:i,a=r.interactionMethod,l=r.success,c=void 0===l?function(){}:l,u=r.failure,p=void 0===u?function(){}:u,f=r.options,d=void 0===f?{}:f;if(M(o))p({error:He("error",0,"No source"),file:null});else if(!it(o)||!n.options.ignoredFiles.includes(o.name.toLowerCase())){if(!function(e){var t=be(e.items).length;if(!e.options.allowMultiple)return 0===t;var n=e.options.maxFiles;return null===n||t<n}(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){var h=He("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:o,error:h}),void p({error:h,file:null})}var m=be(n.items)[0];if(m.status===se.PROCESSING_COMPLETE||m.status===se.PROCESSING_REVERT_ERROR){var v=t("GET_FORCE_REVERT");if(m.revert(tt(n.options.server.url,n.options.server.revert),v).then(function(){v&&e("ADD_ITEM",{source:o,index:s,interactionMethod:a,success:c,failure:p,options:d})}).catch(function(){}),v)return}e("REMOVE_ITEM",{query:m.id})}var g="local"===d.type?ae.LOCAL:"limbo"===d.type?ae.LIMBO:ae.INPUT,y=st(g,g===ae.INPUT?null:o,d.file);Object.keys(d.metadata||{}).forEach(function(e){y.setMetadata(e,d.metadata[e])}),de("DID_CREATE_ITEM",y,{query:t,dispatch:e});var b=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s="before"===b?-1:n.items.length),xe(n.items,y,s),V(b)&&o&&dt(n,b);var w=y.id;y.on("load-init",function(){e("DID_START_ITEM_LOAD",{id:w})}),y.on("load-meta",function(){e("DID_UPDATE_ITEM_META",{id:w})}),y.on("load-progress",function(t){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:w,progress:t})}),y.on("load-request-error",function(t){var r=ut(n.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:w,error:t,status:{main:r,sub:t.code+" ("+t.body+")"}}),void p({error:t,file:ie(y)});e("DID_THROW_ITEM_LOAD_ERROR",{id:w,error:t,status:{main:r,sub:n.options.labelTapToRetry}})}),y.on("load-file-error",function(t){e("DID_THROW_ITEM_INVALID",{id:w,error:t.status,status:t.status}),p({error:t.status,file:ie(y)})}),y.on("load-abort",function(){e("REMOVE_ITEM",{query:w})}),y.on("load-skip",function(){e("COMPLETE_LOAD_ITEM",{query:w,item:y,data:{source:o,success:c}})}),y.on("load",function(){var r=function(r){r?(y.on("metadata-update",function(t){e("DID_UPDATE_ITEM_METADATA",{id:w,change:t})}),fe("SHOULD_PREPARE_OUTPUT",!1,{item:y,query:t}).then(function(t){var r=function(){e("COMPLETE_LOAD_ITEM",{query:w,item:y,data:{source:o,success:c}}),pt(e,n)};t?e("REQUEST_PREPARE_OUTPUT",{query:w,item:y,success:function(t){e("DID_PREPARE_OUTPUT",{id:w,file:t}),r()}},!0):r()})):e("REMOVE_ITEM",{query:w})};fe("DID_LOAD_ITEM",y,{query:t,dispatch:e}).then(function(){ft(t("GET_BEFORE_ADD_FILE"),ie(y)).then(r)}).catch(function(){r(!1)})}),y.on("process-start",function(){e("DID_START_ITEM_PROCESSING",{id:w})}),y.on("process-progress",function(t){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:w,progress:t})}),y.on("process-error",function(t){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:w,error:t,status:{main:ut(n.options.labelFileProcessingError)(t),sub:n.options.labelTapToRetry}})}),y.on("process-revert-error",function(t){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:w,error:t,status:{main:ut(n.options.labelFileProcessingRevertError)(t),sub:n.options.labelTapToRetry}})}),y.on("process-complete",function(t){e("DID_COMPLETE_ITEM_PROCESSING",{id:w,error:null,serverFileReference:t})}),y.on("process-abort",function(){e("DID_ABORT_ITEM_PROCESSING",{id:w})}),y.on("process-revert",function(){e("DID_REVERT_ITEM_PROCESSING",{id:w})}),e("DID_ADD_ITEM",{id:w,index:s,interactionMethod:a}),pt(e,n);var _=n.options.server||{},E=_.url,S=_.load,C=_.restore,T=_.fetch;y.load(o,Ve(g===ae.INPUT?P(o)&&function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&ct(location.href)!==ct(e)}(o)?We(E,T):lt:We(E,g===ae.LIMBO?C:S)),function(e,n,r){fe("LOAD_FILE",e,{query:t}).then(n).catch(r)})}},REQUEST_PREPARE_OUTPUT:function(e){var n=e.item,r=e.success,o=e.failure,i=void 0===o?function(){}:o,s={error:He("error",0,"Item not found"),file:null};if(n.archived)return i(s);fe("PREPARE_OUTPUT",n.file,{query:t,item:n}).then(function(e){fe("COMPLETE_PREPARE_OUTPUT",e,{query:t,item:n}).then(function(e){if(n.archived)return i(s);r(e)})})},COMPLETE_LOAD_ITEM:function(r){var o=r.item,i=r.data,s=i.success,a=i.source,l=t("GET_ITEM_INSERT_LOCATION");V(l)&&a&&dt(n,l),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===ae.INPUT?null:a}),s(ie(o)),o.origin!==ae.LOCAL?o.origin!==ae.LIMBO?t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id}):e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:a}):e("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:ht(n,function(e){e.retryLoad()}),REQUEST_ITEM_PREPARE:ht(n,function(t,n,r){e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:function(r){e("DID_PREPARE_OUTPUT",{id:t.id,file:r}),n({file:t,output:r})},failure:r},!0)}),REQUEST_ITEM_PROCESSING:ht(n,function(r,o,i){var s=r.status===se.IDLE||r.status===se.PROCESSING_ERROR;if(s)r.status!==se.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:o,failure:i},!0));else{var a=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:r,success:o,failure:i})},32)};r.status===se.PROCESSING_COMPLETE||r.status===se.PROCESSING_REVERT_ERROR?r.revert(tt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch(function(){}):r.status===se.PROCESSING&&r.abortProcessing().then(a)}}),PROCESS_ITEM:ht(n,function(r,o,i){var s=t("GET_MAX_PARALLEL_UPLOADS"),a=t("GET_ITEMS_BY_STATUS",se.PROCESSING).length;if(a!==s){if(r.status!==se.PROCESSING){var l=function t(){var r=n.processingQueue.shift();if(r){var o=r.id,i=r.success,s=r.failure,a=ge(n.items,o);a&&!a.archived?e("PROCESS_ITEM",{query:o,success:i,failure:s},!0):t()}};r.onOnce("process-complete",function(){o(ie(r)),l();var i=t("GET_ITEMS_BY_STATUS",se.PROCESSING_COMPLETE).length===n.items.length;i&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",function(e){i({error:e,file:ie(r)}),l()});var c=n.options;r.process(rt(et(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays})),function(n,o,i){fe("PREPARE_OUTPUT",n,{query:t,item:r}).then(function(t){e("DID_PREPARE_OUTPUT",{id:r.id,file:t}),o(t)}).catch(i)})}}else n.processingQueue.push({id:r.id,success:o,failure:i})}),RETRY_ITEM_PROCESSING:ht(n,function(t){e("REQUEST_ITEM_PROCESSING",{query:t})}),REQUEST_REMOVE_ITEM:ht(n,function(n){ft(t("GET_BEFORE_REMOVE_FILE"),ie(n)).then(function(t){t&&e("REMOVE_ITEM",{query:n})})}),RELEASE_ITEM:ht(n,function(e){e.release()}),REMOVE_ITEM:ht(n,function(t,r){var o=function(){var o=t.id;at(n.items,o).archive(),e("DID_REMOVE_ITEM",{error:null,id:o,item:t}),pt(e,n),r(ie(t))},i=n.options.server;t.origin===ae.LOCAL&&i&&V(i.remove)?(e("DID_START_ITEM_REMOVE",{id:t.id}),i.remove(t.source,function(){return o()},function(r){e("DID_THROW_ITEM_REMOVE_ERROR",{id:t.id,error:He("error",0,r,null),status:{main:ut(n.options.labelFileRemoveError)(r),sub:n.options.labelTapToRetry}})})):o()}),ABORT_ITEM_LOAD:ht(n,function(e){e.abortLoad()}),ABORT_ITEM_PROCESSING:ht(n,function(t){t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then(function(){var r=n.options.instantUpload;r&&e("REMOVE_ITEM",{query:t.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ht(n,function(r){if(n.options.instantUpload){var o=function(t){t&&e("REVERT_ITEM_PROCESSING",{query:r})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return o(!0);var s=i(ie(r));return null==s?o(!0):"boolean"==typeof s?o(s):void("function"==typeof s.then&&s.then(o))}e("REVERT_ITEM_PROCESSING",{query:r})}),REVERT_ITEM_PROCESSING:ht(n,function(r){r.revert(tt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(function(){var t=n.options.instantUpload||function(e){return!it(e.file)}(r);t&&e("REMOVE_ITEM",{query:r.id})}).catch(function(){})}),SET_OPTIONS:function(t){var n=t.options;o(n,function(t,n){e("SET_"+X(t,"_").toUpperCase(),{value:n})})}}},vt=function(e){return e},gt=function(e){return document.createElement(e)},yt=function(e,t){var n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},bt=function(e,t,n,r){var o=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},wt=function(e,t,n,r,o){var i=1;return o>r&&o-r<=.5&&(i=0),r>o&&r-o>=.5&&(i=0),function(e,t,n,r,o,i){var s=bt(e,t,n,o),a=bt(e,t,n,r);return["M",s.x,s.y,"A",n,n,0,i,0,a.x,a.y].join(" ")}(e,t,n,360*Math.min(.9999,r),360*Math.min(.9999,o),i)},_t=k({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(e){var t=e.root,n=e.props;n.spin=!1,n.progress=0,n.opacity=0;var r=c("svg");t.ref.path=c("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(t.ref.path),t.ref.svg=r,t.appendChild(r)},write:function(e){var t=e.root,n=e.props;if(0!==n.opacity){n.align&&(t.element.dataset.align=n.align);var r=parseInt(s(t.ref.path,"stroke-width"),10),o=.5*t.rect.element.width,i=0,a=0;n.spin?(i=0,a=.5):(i=0,a=n.progress);var l=wt(o,o,o-r,i,a);s(t.ref.path,"d",l),s(t.ref.path,"stroke-opacity",n.spin||n.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Et=k({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(e){var t=e.root,n=e.props;t.element.innerHTML=(n.icon||"")+"<span>"+n.label+"</span>",n.isDisabled=!1},write:function(e){var t=e.root,n=e.props,r=n.isDisabled,o=t.query("GET_DISABLED")||0===n.opacity;o&&!r?(n.isDisabled=!0,s(t.element,"disabled","disabled")):!o&&r&&(n.isDisabled=!1,t.element.removeAttribute("disabled"))}}),St=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return(e=Math.round(Math.abs(e)))<1e3?e+" bytes":e<Tt?Math.floor(e/Ct)+" KB":e<kt?Ot(e/Tt,1,t)+" MB":Ot(e/kt,2,t)+" GB"},Ct=1e3,Tt=1e6,kt=1e9,Ot=function(e,t,n){return e.toFixed(t).split(".").filter(function(e){return"0"!==e}).join(n)},xt=function(e){var t=e.root,n=e.props;yt(t.ref.fileSize,St(t.query("GET_ITEM_SIZE",n.id))),yt(t.ref.fileName,vt(t.query("GET_ITEM_NAME",n.id)))},It=function(e){var t=e.root,n=e.props;B(t.query("GET_ITEM_SIZE",n.id))||yt(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Dt=k({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:O({DID_LOAD_ITEM:xt,DID_UPDATE_ITEM_META:xt,DID_THROW_ITEM_LOAD_ERROR:It,DID_THROW_ITEM_INVALID:It}),didCreateView:function(e){de("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,n=e.props,r=gt("span");r.className="filepond--file-info-main",s(r,"aria-hidden","true"),t.appendChild(r),t.ref.fileName=r;var o=gt("span");o.className="filepond--file-info-sub",t.appendChild(o),t.ref.fileSize=o,yt(o,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),yt(r,vt(t.query("GET_ITEM_NAME",n.id)))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Mt=function(e){return Math.round(100*e)},At=function(e){var t=e.root,n=e.action,r=null===n.progress?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+Mt(n.progress)+"%";yt(t.ref.main,r),yt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},Rt=function(e){var t=e.root;yt(t.ref.main,""),yt(t.ref.sub,"")},Nt=function(e){var t=e.root,n=e.action;yt(t.ref.main,n.status.main),yt(t.ref.sub,n.status.sub)},Lt=k({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:O({DID_LOAD_ITEM:Rt,DID_REVERT_ITEM_PROCESSING:Rt,DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;yt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),yt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(e){var t=e.root;yt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),yt(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root;yt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),yt(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,n=e.action,r=null===n.progress?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+Mt(n.progress)+"%";yt(t.ref.main,r),yt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:At,DID_THROW_ITEM_LOAD_ERROR:Nt,DID_THROW_ITEM_INVALID:Nt,DID_THROW_ITEM_PROCESSING_ERROR:Nt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Nt,DID_THROW_ITEM_REMOVE_ERROR:Nt}),didCreateView:function(e){de("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,n=(e.props,gt("span"));n.className="filepond--file-status-main",t.appendChild(n),t.ref.main=n;var r=gt("span");r.className="filepond--file-status-sub",t.appendChild(r),t.ref.sub=r,At({root:t,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Pt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Ft=[];o(Pt,function(e){Ft.push(e)});var qt,zt=function(e){var t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Bt=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},jt=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},Vt=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Gt={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ut={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:zt},status:{translateX:zt}},Ht={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},$t={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:zt},status:{translateX:zt,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:zt},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Vt},info:{translateX:zt},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Vt},buttonRemoveItem:{opacity:1},info:{translateX:zt},status:{opacity:1,translateX:zt}},DID_LOAD_ITEM:Ut,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:zt},status:{translateX:zt}},DID_START_ITEM_PROCESSING:Ht,DID_REQUEST_ITEM_PROCESSING:Ht,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ht,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:zt}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:zt},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ut},Wt=k({create:function(e){var t=e.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Yt=O({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemProcessing.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemLoad.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemRemoval.label=n.value},DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var t=e.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var t=e.root,n=e.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=n.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,n=e.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=n.progress}}),Jt=k({create:function(e){var t=e.root,n=e.props.id,r=t.query("GET_ALLOW_REVERT"),i=t.query("GET_INSTANT_UPLOAD"),s=t.query("IS_ASYNC"),a=s?Ft.concat():Ft.filter(function(e){return!/Process/.test(e)});if(s&&!r){a.splice(-1,1);var l=$t.DID_COMPLETE_ITEM_PROCESSING;l.info.translateX=jt,l.info.translateY=Bt,l.status.translateY=Bt,l.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i&&r&&(Pt.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",Pt.RevertItemProcessing.icon="GET_ICON_REMOVE"),o(Pt,function(e,r){var o=t.createChildView(Et,{label:t.query(r.label),icon:t.query(r.icon),opacity:0});a.includes(e)&&t.appendChildView(o),o.element.dataset.align=t.query("GET_STYLE_"+r.align),o.element.classList.add(r.className),o.on("click",function(e){e.stopPropagation(),t.dispatch(r.action,{query:n})}),t.ref["button"+e]=o}),t.ref.info=t.appendChildView(t.createChildView(Dt,{id:n})),t.ref.status=t.appendChildView(t.createChildView(Lt,{id:n})),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(Wt)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION");var c=t.appendChildView(t.createChildView(_t,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));c.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=c;var u=t.appendChildView(t.createChildView(_t,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));u.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=u,t.ref.activeStyles=[]},write:function(e){var t=e.root,n=e.actions,r=e.props;Yt({root:t,actions:n,props:r});var i=n.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return $t[e.type]});if(i){t.ref.activeStyles=[];var s=$t[i.type];o(Gt,function(e,n){var r=t.ref[e];o(n,function(n,o){var i=s[e]&&void 0!==s[e][n]?s[e][n]:o;t.ref.activeStyles.push({control:r,key:n,value:i})})})}t.ref.activeStyles.forEach(function(e){var n=e.control,r=e.key,o=e.value;n[r]="function"==typeof o?o(t):o})},didCreateView:function(e){de("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),Xt=k({create:function(e){var t=e.root,n=e.props;t.ref.fileName=gt("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(Jt,{id:n.id}));var r=gt("input");r.type="hidden",r.name=t.query("GET_NAME"),r.disabled=t.query("GET_DISABLED"),t.ref.data=r,t.appendChild(r)},ignoreRect:!0,write:O({DID_SET_DISABLED:function(e){var t=e.root;t.ref.data.disabled=t.query("GET_DISABLED")},DID_LOAD_ITEM:function(e){var t=e.root,n=e.action,r=e.props;t.ref.data.value=n.serverFileReference,yt(t.ref.fileName,vt(t.query("GET_ITEM_NAME",r.id)))},DID_REMOVE_ITEM:function(e){var t=e.root;t.ref.data.removeAttribute("value")},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root,n=e.action;t.ref.data.value=n.serverFileReference},DID_REVERT_ITEM_PROCESSING:function(e){var t=e.root;t.ref.data.removeAttribute("value")}}),didCreateView:function(e){de("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),Kt={type:"spring",damping:.6,mass:7},Qt=function(e,t,n){var r=k({name:"panel-"+t.name+" filepond--"+n,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(o)},Zt=k({name:"panel",write:function(e){var t=e.root,n=e.props;if(null!==t.ref.scalable&&n.scalable===t.ref.scalable||(t.ref.scalable=!N(n.scalable)||n.scalable,t.element.dataset.scalable=t.ref.scalable),n.height){var r=t.ref.top.rect.element,o=t.ref.bottom.rect.element,i=Math.max(r.height+o.height,n.height);t.ref.center.translateY=r.height,t.ref.center.scaleY=(i-r.height-o.height)/100,t.ref.bottom.translateY=i-o.height}},create:function(e){var t=e.root,n=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Kt},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Kt},styles:["translateY"]}}].forEach(function(e){Qt(t,e,n.name)}),t.element.classList.add("filepond--"+n.name),t.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","scalable"]}}),en={type:"spring",stiffness:.75,damping:.45,mass:10},tn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy",DID_REQUEST_ITEM_PROCESSING:"busy",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},nn=O({DID_UPDATE_PANEL_HEIGHT:function(e){var t=e.root,n=e.action,r=n.height;t.height=r}}),rn=k({create:function(e){var t=e.root,n=e.props;t.ref.handleClick=function(){return t.dispatch("DID_ACTIVATE_ITEM",{id:n.id})},t.element.id="filepond--item-"+n.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Xt,{id:n.id})),t.ref.panel=t.appendChildView(t.createChildView(Zt,{name:"item-panel"})),t.ref.panel.height=null,n.markedForRemoval=!1},write:function(e){var t=e.root,n=e.actions,r=e.props,o=e.shouldOptimize,i=n.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return tn[e.type]});i&&i.type!==r.currentState&&(r.currentState=i.type,t.element.dataset.filepondItemState=tn[r.currentState]||"");var s=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");s?o||(t.height=t.rect.element.width*s):(nn({root:t,actions:n,props:r}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),o&&(t.ref.panel.height=null),t.ref.panel.height=t.height},destroy:function(e){var t=e.root,n=e.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:n.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:en,translateY:en,opacity:{type:"tween",duration:150}}}}),on=function(e,t){if(t){var n=e.rect.element.width,r=e.childViews,o=r.length,i=null;if(0===o||t.top<r[0].rect.element.top)return-1;var s=r[0],a=s.rect.element,l=a.marginLeft+a.marginRight,c=a.width+l,u=Math.round(n/c);if(1===u){for(var p=0;p<o;p++){var f=r[p],d=f.rect.outer.top+.5*f.rect.element.height;if(t.top<d)return p}return o}for(var h=a.marginTop+a.marginBottom,m=a.height+h,v=0;v<o;v++){var g=v%u,y=Math.floor(v/u),b=g*c,w=y*m,_=w-a.marginTop,E=b+c,S=w+m+a.marginBottom;if(t.top<S&&t.top>_){if(t.left<E)return v;i=v!==o-1?v:null}}return null!==i?i:o}},sn=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(0===e.opacity&&an(e,t,n,r,o),e.scaleX=1,e.scaleY=1,e.opacity=1)},an=function(e,t,n,r,o){e.interactionMethod===Z.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Z.DROP?(e.translateX=null,e.translateX=t-20*r,e.translateY=null,e.translateY=n-10*o,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Z.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Z.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},ln=O({DID_ADD_ITEM:function(e){var t=e.root,n=e.action,r=n.id,o=n.index,i=n.interactionMethod;t.ref.addIndex=o;var s=Date.now(),a=s,l=1;if(i!==Z.NONE){l=0;var c=t.query("GET_ITEM_INSERT_INTERVAL"),u=s-t.ref.lastItemSpanwDate;a=u<c?s+(c-u):s}t.ref.lastItemSpanwDate=a,t.appendChildView(t.createChildView(rn,{spawnDate:a,id:r,opacity:l,interactionMethod:i}),o)},DID_REMOVE_ITEM:function(e){var t=e.root,n=e.action,r=n.id,o=t.childViews.find(function(e){return e.id===r});o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)}}),cn=k({create:function(e){var t=e.root;s(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},write:function(e){var t=e.root,n=e.props,r=e.actions,o=e.shouldOptimize;ln({root:t,props:n,actions:r});var i=n.dragCoordinates,s=i?on(t,i):null,a=t.rect.element.width,l=t.childViews.filter(function(e){return e.rect.element.height}),c=t.query("GET_ACTIVE_ITEMS").map(function(e){return l.find(function(t){return t.id===e.id})}).filter(function(e){return e}),u=t.ref.addIndex||null;t.ref.addIndex=null;var p=0,f=0,d=0;if(0!==c.length){var h=c[0].rect.element,m=h.marginTop+h.marginBottom,v=h.marginLeft+h.marginRight,g=h.width+v,y=h.height+m,b=Math.round(a/g);if(1===b){var w=0,_=0;c.forEach(function(e,t){if(s){var n=t-s;_=-2===n?.25*-m:-1===n?.75*-m:0===n?.75*m:1===n?.25*m:0}o&&(e.translateX=null,e.translateY=null),e.markedForRemoval||sn(e,0,w+_);var r=e.rect.element.height+m,i=r*(e.markedForRemoval?e.opacity:1);w+=i})}else{var E=0,S=0;c.forEach(function(e,t){t===s&&(p=1),t===u&&(d+=1),e.markedForRemoval&&e.opacity<.5&&(f-=1);var n=t+d+p+f,r=n%b,i=Math.floor(n/b),a=r*g,l=i*y,c=Math.sign(a-E),h=Math.sign(l-S);E=a,S=l,e.markedForRemoval||(o&&(e.translateX=null,e.translateY=null),sn(e,a,l,c,h))})}}},tag:"ul",name:"list",didWriteView:function(e){var t=e.root;t.childViews.filter(function(e){return e.markedForRemoval&&0===e.opacity&&e.resting}).forEach(function(e){e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:function(e,t){return t.filter(function(t){return!t.data||!t.data.id||e.id===t.data.id})},mixins:{apis:["dragCoordinates"]}}),un=O({DID_DRAG:function(e){var t=e.root,n=e.props,r=e.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(n.dragCoordinates={left:r.position.scopeLeft-t.ref.list.rect.element.left,top:r.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},DID_END_DRAG:function(e){var t=e.props;t.dragCoordinates=null}}),pn=k({create:function(e){var t=e.root,n=e.props;t.ref.list=t.appendChildView(t.createChildView(cn)),n.dragCoordinates=null,n.overflowing=!1},write:function(e){var t=e.root,n=e.props,r=e.actions;if(un({root:t,props:n,actions:r}),t.ref.list.dragCoordinates=n.dragCoordinates,n.overflowing&&!n.overflow&&(n.overflowing=!1,t.element.dataset.state="",t.height=null),n.overflow){var o=Math.round(n.overflow);o!==t.height&&(n.overflowing=!0,t.element.dataset.state="overflow",t.height=o)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),fn=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n?s(e,t,r):e.removeAttribute(t)},dn=function(e){var t=e.root,n=(e.action,t.query("GET_DISABLED")),r=t.query("GET_ALLOW_BROWSE"),o=n||!r;fn(t.element,"disabled",o)},hn=function(e){var t=e.root,n=t.element;if(t.query("GET_TOTAL_ITEMS")>0)fn(n,"required",!1),fn(n,"name",!1);else{fn(n,"name",!0,t.query("GET_NAME"));var r=t.query("GET_CHECK_VALIDITY");r&&n.setCustomValidity(""),t.query("GET_REQUIRED")&&fn(n,"required",!0)}},mn=k({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(e){var t=e.root,n=e.props;t.element.id="filepond--browser-"+n.id,s(t.element,"name",t.query("GET_NAME")),s(t.element,"aria-controls","filepond--assistant-"+n.id),s(t.element,"aria-labelledby","filepond--drop-label-"+n.id),t.ref.handleChange=function(e){if(t.element.value){var r=Array.from(t.element.files);setTimeout(function(){n.onload(r),function(e){if(e&&""!==e.value){try{e.value=""}catch(e){}if(e.value){var t=gt("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}}(t.element)},250)}},t.element.addEventListener("change",t.ref.handleChange)},destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange)},write:O({DID_LOAD_ITEM:hn,DID_REMOVE_ITEM:hn,DID_THROW_ITEM_INVALID:function(e){var t=e.root,n=t.query("GET_CHECK_VALIDITY");n&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:dn,DID_SET_ALLOW_BROWSE:dn,DID_SET_ALLOW_MULTIPLE:function(e){var t=e.root,n=e.action;fn(t.element,"multiple",n.value)},DID_SET_ACCEPTED_FILE_TYPES:function(e){var t=e.root,n=e.action;fn(t.element,"accept",!!n.value,n.value?n.value.join(","):"")},DID_SET_CAPTURE_METHOD:function(e){var t=e.root,n=e.action;fn(t.element,"capture",!!n.value,!0===n.value?"":n.value)},DID_SET_REQUIRED:function(e){var t=e.root,n=e.action;n.value?0===t.query("GET_TOTAL_ITEMS")&&fn(t.element,"required",!0):fn(t.element,"required",!1)}})}),vn={ENTER:13,SPACE:32},gn=function(e,t){e.innerHTML=t;var n=e.querySelector(".filepond--label-action");return n&&s(n,"tabindex","0"),t},yn=k({name:"drop-label",ignoreRect:!0,create:function(e){var t=e.root,n=e.props,r=gt("label");s(r,"for","filepond--browser-"+n.id),s(r,"id","filepond--drop-label-"+n.id),s(r,"aria-hidden","true"),t.ref.handleKeyDown=function(e){var n=e.keyCode===vn.ENTER||e.keyCode===vn.SPACE;n&&(e.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(e){var n=e.target===r||r.contains(e.target);n||t.ref.label.click()},r.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),gn(r,n.caption),t.appendChild(r),t.ref.label=r},destroy:function(e){var t=e.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:O({DID_SET_LABEL_IDLE:function(e){var t=e.root,n=e.action;gn(t.ref.label,n.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),bn=k({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),wn=O({DID_DRAG:function(e){var t=e.root,n=e.action;t.ref.blob?(t.ref.blob.translateX=n.position.scopeLeft,t.ref.blob.translateY=n.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1):function(e){var t=e.root,n=.5*t.rect.element.width,r=.5*t.rect.element.height;t.ref.blob=t.appendChildView(t.createChildView(bn,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:n,translateY:r}))}({root:t})},DID_DROP:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},DID_END_DRAG:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.opacity=0)}}),_n=k({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(e){var t=e.root,n=e.props,r=e.actions;wn({root:t,props:n,actions:r});var o=t.ref.blob;0===r.length&&o&&0===o.opacity&&(t.removeChildView(o),t.ref.blob=null)}}),En=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Sn=["css","csv","html","txt"],Cn={zip:"zip|compressed",epub:"application/epub+zip"},Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.toLowerCase(),En.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):Sn.includes(e)?"text/"+e:Cn[e]||null},kn=function(e){return new Promise(function(t,n){var r=Pn(e);if(r.length&&!On(e))return t(r);xn(e).then(t)})},On=function(e){return!!e.files&&e.files.length>0},xn=function(e){return new Promise(function(t,n){var r=(e.items?Array.from(e.items):[]).filter(function(e){return In(e)}).map(function(e){return Dn(e)});r.length?Promise.all(r).then(function(e){var n=[];e.forEach(function(e){n.push.apply(n,e)}),t(n.filter(function(e){return e}))}).catch(console.error):t(e.files?Array.from(e.files):[])})},In=function(e){if(Nn(e)){var t=Ln(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},Dn=function(e){return new Promise(function(t,n){Rn(e)?Mn(Ln(e)).then(t).catch(n):t([e.getAsFile()])})},Mn=function(e){return new Promise(function(t,n){var r=[],o=0,i=0,s=function(){0===i&&0===o&&t(r)};!function e(t){o++;var a=t.createReader();!function t(){a.readEntries(function(n){if(0===n.length)return o--,void s();n.forEach(function(t){t.isDirectory?e(t):(i++,t.file(function(e){r.push(An(e)),i--,s()}))}),t()},n)}()}(e)})},An=function(e){if(e.type.length)return e;var t=e.lastModifiedDate,n=e.name;return(e=e.slice(0,e.size,Tn(Me(e.name)))).name=n,e.lastModifiedDate=t,e},Rn=function(e){return Nn(e)&&(Ln(e)||{}).isDirectory},Nn=function(e){return"webkitGetAsEntry"in e},Ln=function(e){return e.webkitGetAsEntry()},Pn=function(e){var t=[];try{if((t=qn(e)).length)return t;t=Fn(e)}catch(e){}return t},Fn=function(e){var t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},qn=function(e){var t=e.getData("text/html");if("string"==typeof t&&t.length){var n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},zn=[],Bn=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},jn=function(e){var t=zn.find(function(t){return t.element===e});if(t)return t;var n=Vn(e);return zn.push(n),n},Vn=function(e){var t=[],n={dragenter:$n,dragover:Wn,dragleave:Jn,drop:Yn},r={};o(n,function(n,o){r[n]=o(e,t),e.addEventListener(n,r[n],!1)});var i={element:e,addListener:function(s){return t.push(s),function(){t.splice(t.indexOf(s),1),0===t.length&&(zn.splice(zn.indexOf(i),1),o(n,function(t){e.removeEventListener(t,r[t],!1)}))}}};return i},Gn=function(e,t){var n,r="getRootNode"in(n=t)?n.getRootNode():document,o=function(e,t){return"elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)}(r,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return o===t||t.contains(o)},Un=null,Hn=function(e,t){try{e.dropEffect=t}catch(e){}},$n=function(e,t){return function(e){e.preventDefault(),Un=e.target,t.forEach(function(t){var n=t.element,r=t.onenter;Gn(e,n)&&(t.state="enter",r(Bn(e)))})}},Wn=function(e,t){return function(e){e.preventDefault();var n=e.dataTransfer;kn(n).then(function(r){var o=!1;t.some(function(t){var i=t.filterElement,s=t.element,a=t.onenter,l=t.onexit,c=t.ondrag,u=t.allowdrop;Hn(n,"copy");var p=u(r);if(p)if(Gn(e,s)){if(o=!0,null===t.state)return t.state="enter",void a(Bn(e));if(t.state="over",i&&!p)return void Hn(n,"none");c(Bn(e))}else i&&!o&&Hn(n,"none"),t.state&&(t.state=null,l(Bn(e)));else Hn(n,"none")})})}},Yn=function(e,t){return function(e){e.preventDefault();var n=e.dataTransfer;kn(n).then(function(n){t.forEach(function(t){var r=t.filterElement,o=t.element,i=t.ondrop,s=t.onexit,a=t.allowdrop;if(t.state=null,!r||Gn(e,o))return a(n)?void i(Bn(e),n):s(Bn(e))})})}},Jn=function(e,t){return function(e){Un===e.target&&t.forEach(function(t){var n=t.onexit;t.state=null,n(Bn(e))})}},Xn=function(e,t,n){e.classList.add("filepond--hopper");var r=n.catchesDropsOnPage,o=n.requiresDropOnElement,i=n.filterItems,s=void 0===i?function(e){return e}:i,a=function(e,t,n){var r=jn(t),o={element:e,filterElement:n,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return o.destroy=r.addListener(o),o}(e,r?document.documentElement:e,o),l="",c="";a.allowdrop=function(e){return t(s(e))},a.ondrop=function(e,n){var r=s(n);t(r)?(c="drag-drop",u.onload(r,e)):u.ondragend(e)},a.ondrag=function(e){u.ondrag(e)},a.onenter=function(e){c="drag-over",u.ondragstart(e)},a.onexit=function(e){c="drag-exit",u.ondragend(e)};var u={updateHopperState:function(){l!==c&&(e.dataset.hopperState=c,l=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){a.destroy()}};return u},Kn=!1,Qn=[],Zn=function(e){kn(e.clipboardData).then(function(e){e.length&&Qn.forEach(function(t){return t(e)})})},er=function(){var e=function(e){t.onload(e)},t={destroy:function(){var t;t=e,te(Qn,Qn.indexOf(t)),0===Qn.length&&(document.removeEventListener("paste",Zn),Kn=!1)},onload:function(){}};return function(e){Qn.includes(e)||(Qn.push(e),Kn||(Kn=!0,document.addEventListener("paste",Zn)))}(e),t},tr=null,nr=null,rr=[],or=function(e,t){e.element.textContent=t},ir=function(e,t,n){var r=e.query("GET_TOTAL_ITEMS");or(e,n+" "+t+", "+r+" "+(1===r?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(nr),nr=setTimeout(function(){!function(e){e.element.textContent=""}(e)},1500)},sr=function(e){return e.element.parentNode.contains(document.activeElement)},ar=function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename,i=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");or(t,o+" "+i)},lr=function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename;or(t,n.status.main+" "+o+" "+n.status.sub)},cr=k({create:function(e){var t=e.root,n=e.props;t.element.id="filepond--assistant-"+n.id,s(t.element,"role","status"),s(t.element,"aria-live","polite"),s(t.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:O({DID_LOAD_ITEM:function(e){var t=e.root,n=e.action;if(sr(t)){t.element.textContent="";var r=t.query("GET_ITEM",n.id);rr.push(r.filename),clearTimeout(tr),tr=setTimeout(function(){ir(t,rr.join(", "),t.query("GET_LABEL_FILE_ADDED")),rr.length=0},750)}},DID_REMOVE_ITEM:function(e){var t=e.root,n=e.action;if(sr(t)){var r=n.item;ir(t,r.filename,t.query("GET_LABEL_FILE_REMOVED"))}},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename,i=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");or(t,o+" "+i)},DID_ABORT_ITEM_PROCESSING:ar,DID_REVERT_ITEM_PROCESSING:ar,DID_THROW_ITEM_REMOVE_ERROR:lr,DID_THROW_ITEM_LOAD_ERROR:lr,DID_THROW_ITEM_INVALID:lr,DID_THROW_ITEM_PROCESSING_ERROR:lr}),tag:"span",name:"assistant"}),ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(new RegExp(t+".","g"),function(e){return e.charAt(1).toUpperCase()})},pr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Date.now(),o=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];clearTimeout(o);var l=Date.now()-r,c=function(){r=Date.now(),e.apply(void 0,s)};l<t?n||(o=setTimeout(c,t-l)):c()}},fr=function(e){var t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},dr=function(e){var t=0,n=0,r=e.ref.list,o=r.childViews[0],i=o.childViews;if(0===i.length)return{visual:t,bounds:n};var s=o.rect.element.width,a=on(o,r.dragCoordinates),l=i[0].rect.element,c=l.marginTop+l.marginBottom,u=l.marginLeft+l.marginRight,p=l.width+u,f=l.height+c,d=void 0!==a&&a>=0?1:0,h=i.find(function(e){return e.markedForRemoval&&e.opacity<.45})?-1:0,m=i.length+d+h,v=Math.round(s/p);return 1===v?i.forEach(function(e){var r=e.rect.element.height+c;n+=r,t+=r*e.opacity}):(n=Math.ceil(m/v)*f,t=n),{visual:t,bounds:n}},hr=function(e){var t=e.ref.measureHeight||null,n=parseInt(e.style.maxHeight,10)||null,r=0===t?null:t;return{cappedHeight:n,fixedHeight:r}},mr=function(e,t){var n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS"),i=e.query("GET_MAX_FILES"),s=t.length;if(!r&&s>1)return!0;var a=B(i=r?i:n?i:1);return!!(a&&o+s>i)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:He("warning",0,"Max files")}),!0)},vr=function(e,t){var n=e.childViews[0];return on(n,{left:t.scopeLeft-n.rect.element.left,top:t.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},gr=function(e){var t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){var o=Xn(e.element,function(t){if(mr(e,t))return!1;var n=e.query("GET_BEFORE_DROP_FILE")||function(){return!0},r=e.query("GET_DROP_VALIDATION");return!r||t.every(function(t){return de("ALLOW_HOPPER_ITEM",t,{query:e.query}).every(function(e){return!0===e})&&n(t)})},{filterItems:function(t){var n=e.query("GET_IGNORED_FILES");return t.filter(function(e){return!it(e)||!n.includes(e.name.toLowerCase())})},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=function(t,n){e.dispatch("ADD_ITEMS",{items:t,index:vr(e.ref.list,n),interactionMethod:Z.DROP}),e.dispatch("DID_DROP",{position:n}),e.dispatch("DID_END_DRAG",{position:n})},o.ondragstart=function(t){e.dispatch("DID_START_DRAG",{position:t})},o.ondrag=pr(function(t){e.dispatch("DID_DRAG",{position:t})}),o.ondragend=function(t){e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(_n))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},yr=function(e,t){var n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),o=n&&!r;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(mn,Object.assign({},t,{onload:function(t){if(mr(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:Z.BROWSE})}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},br=function(e){var t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=er(),e.ref.paster.onload=function(t){e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:Z.PASTE})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},wr=O({DID_SET_ALLOW_BROWSE:function(e){var t=e.root,n=e.props;yr(t,n)},DID_SET_ALLOW_DROP:function(e){var t=e.root;gr(t)},DID_SET_ALLOW_PASTE:function(e){var t=e.root;br(t)},DID_SET_DISABLED:function(e){var t=e.root,n=e.props;gr(t),br(t),yr(t,n);var r=t.query("GET_DISABLED");r?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),_r=k({name:"root",read:function(e){var t=e.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:function(e){var t=e.root,n=e.props,r=t.query("GET_ID");r&&(t.element.id=r);var o=t.query("GET_CLASS_NAME");o&&o.split(" ").forEach(function(e){t.element.classList.add(e)}),t.ref.label=t.appendChildView(t.createChildView(yn,Object.assign({},n,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(pn,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(Zt,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(cr,Object.assign({},n))),t.ref.measure=gt("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(function(e){return!M(e.value)}).map(function(e){var n=e.name,r=e.value;t.element.dataset[n]=r}),t.ref.widthPrevious=null,t.ref.widthUpdated=pr(function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[]},write:function(e){var t=e.root,n=e.props,r=e.actions;if(wr({root:t,props:n,actions:r}),r.filter(function(e){return/^DID_SET_STYLE_/.test(e.type)}).filter(function(e){return!M(e.data.value)}).map(function(e){var n=e.type,r=e.data,o=ur(n.substr(8).toLowerCase(),"_");t.element.dataset[o]=r.value,t.invalidateLayout()}),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var o=t.ref.bounds;o||(o=t.ref.bounds=hr(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var i=t.ref,s=i.hopper,a=i.label,l=i.list,c=i.panel;s&&s.updateHopperState();var u=t.query("GET_PANEL_ASPECT_RATIO"),p=t.query("GET_ALLOW_MULTIPLE"),f=t.query("GET_TOTAL_ITEMS"),d=p?t.query("GET_MAX_FILES")||1e6:1,h=f===d,m=r.find(function(e){return"DID_ADD_ITEM"===e.type});if(h&&m){var v=m.data.interactionMethod;a.opacity=0,p?a.translateY=-40:v===Z.API?a.translateX=40:a.translateY=v===Z.BROWSE?40:30}else h||(a.opacity=1,a.translateX=0,a.translateY=0);var g=fr(t),y=dr(t),b=a.rect.element.height,w=!p||h?0:b,_=h?l.rect.element.marginTop:0,E=0===f?0:l.rect.element.marginBottom,S=w+_+y.visual+E,C=w+_+y.bounds+E;if(l.translateY=Math.max(0,w-l.rect.element.marginTop)-g.top,u){var T=t.rect.element.width,k=T*u;u!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=u,t.ref.updateHistory=[]);var O=t.ref.updateHistory;if(O.push(T),O.length>4)for(var x=O.length,I=x-10,D=0,A=x;A>=I;A--)if(O[A]===O[A-2]&&D++,D>=2)return;c.scalable=!1,c.height=k;var R=k-w-(E-g.bottom)-(h?_:0);y.visual>R?l.overflow=R:l.overflow=null,t.height=k}else if(o.fixedHeight){c.scalable=!1;var N=o.fixedHeight-w-(E-g.bottom)-(h?_:0);y.visual>N?l.overflow=N:l.overflow=null}else if(o.cappedHeight){var L=S>=o.cappedHeight,P=Math.min(o.cappedHeight,S);c.scalable=!0,c.height=L?P:P-g.top-g.bottom;var F=P-w-(E-g.bottom)-(h?_:0);S>o.cappedHeight&&y.visual>F?l.overflow=F:l.overflow=null,t.height=Math.min(o.cappedHeight,C-g.top-g.bottom)}else{var q=f>0?g.top+g.bottom:0;c.scalable=!0,c.height=Math.max(b,S-q),t.height=Math.max(b,C-q)}}},destroy:function(e){var t=e.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy()},mixins:{styles:["height"]}}),Er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,n=me(),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object.assign({},e),o=[],i=[],s=function(e,t,n){n?i.push({type:e,data:t}):(u[e]&&u[e](t),o.push({type:e,data:t}))},a=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return c[e]?(t=c)[e].apply(t,r):null},l={getState:function(){return Object.assign({},r)},processActionQueue:function(){var e=[].concat(o);return o.length=0,e},processDispatchQueue:function(){var e=[].concat(i);i.length=0,e.forEach(function(e){var t=e.type,n=e.data;s(t,n)})},dispatch:s,query:a},c={};t.forEach(function(e){c=Object.assign({},e(r),{},c)});var u={};return n.forEach(function(e){u=Object.assign({},e(s,a,r),{},u)}),l}({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:J(n)},[Oe,Q(n)],[mt,K(n)]);r.dispatch("SET_OPTIONS",{options:e});var s=function(){document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);var a=null,l=!1,c=!1,u=null,p=null,f=function(){l||(l=!0),clearTimeout(a),a=setTimeout(function(){l=!1,u=null,p=null,c&&(c=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",f);var d=_r(r,{id:ee()}),h=!1,v=!1,g={_read:function(){l&&(p=window.innerWidth,u||(u=p),c||p===u||(r.dispatch("DID_START_RESIZE"),c=!0)),v&&h&&(h=null===d.element.offsetParent),h||(d._read(),v=d.rect.element.hidden)},_write:function(e){var t,n=r.processActionQueue().filter(function(e){return!/^SET_/.test(e.type)});h&&!n.length||(w(n),h=d._write(e,n,c),(t=r.query("GET_ITEMS")).forEach(function(e,n){e.released&&te(t,n)}),h&&r.processDispatchQueue())}},y=function(e){return function(t){var n={type:e};if(!t)return n;if(t.hasOwnProperty("error")&&(n.error=t.error?Object.assign({},t.error):null),t.status&&(n.status=Object.assign({},t.status)),t.file&&(n.output=t.file),t.source)n.file=t.source;else if(t.item||t.id){var o=t.item?t.item:r.query("GET_ITEM",t.id);n.file=o?ie(o):null}return t.items&&(n.items=t.items.map(ie)),/progress/.test(e)&&(n.progress=t.progress),n}},b={DID_DESTROY:y("destroy"),DID_INIT:y("init"),DID_THROW_MAX_FILES:y("warning"),DID_START_ITEM_LOAD:y("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:y("addfileprogress"),DID_LOAD_ITEM:y("addfile"),DID_THROW_ITEM_INVALID:[y("error"),y("addfile")],DID_THROW_ITEM_LOAD_ERROR:[y("error"),y("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[y("error"),y("removefile")],DID_PREPARE_OUTPUT:y("preparefile"),DID_START_ITEM_PROCESSING:y("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:y("processfileprogress"),DID_ABORT_ITEM_PROCESSING:y("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:y("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:y("processfiles"),DID_REVERT_ITEM_PROCESSING:y("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[y("error"),y("processfile")],DID_REMOVE_ITEM:y("removefile"),DID_UPDATE_ITEMS:y("updatefiles"),DID_ACTIVATE_ITEM:y("activatefile")},w=function(e){e.length&&e.forEach(function(e){if(b[e.type]){var t=b[e.type];(Array.isArray(t)?t:[t]).forEach(function(t){setTimeout(function(){!function(e){var t=Object.assign({pond:k},e);delete t.type,d.element.dispatchEvent(new CustomEvent("FilePond:"+e.type,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));var n=[];e.hasOwnProperty("error")&&n.push(e.error),e.hasOwnProperty("file")&&n.push(e.file);var o=["type","error","file"];Object.keys(e).filter(function(e){return!o.includes(e)}).forEach(function(t){return n.push(e[t])}),k.fire.apply(k,[e.type].concat(n));var i=r.query("GET_ON"+e.type.toUpperCase());i&&i.apply(void 0,n)}(t(e.data))},0)})}})},_=function(e){return new Promise(function(t,n){r.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:function(e){t(e)},failure:function(e){n(e)}})})},E=function(e){return r.dispatch("REMOVE_ITEM",{query:e}),null===r.query("GET_ACTIVE_ITEM",e)},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){var o=[],i={};if(D(t[0]))o.push.apply(o,t[0]),Object.assign(i,t[1]||{});else{var s=t[t.length-1];"object"!=typeof s||s instanceof Blob||Object.assign(i,t.pop()),o.push.apply(o,t)}r.dispatch("ADD_ITEMS",{items:o,index:i.index,interactionMethod:Z.API,success:e,failure:n})})},C=function(){return r.query("GET_ACTIVE_ITEMS")},T=function(e){return new Promise(function(t,n){r.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:function(e){t(e)},failure:function(e){n(e)}})})},k=Object.assign({},ne(),{},g,{},function(e,t){var n={};return o(t,function(t){n[t]={get:function(){return e.getState().options[t]},set:function(n){e.dispatch("SET_"+X(t,"_").toUpperCase(),{value:n})}}}),n}(r,n),{setOptions:function(e){return r.dispatch("SET_OPTIONS",{options:e})},addFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){S([{source:e,options:t}],{index:t.index}).then(function(e){return n(e&&e[0])}).catch(r)})},addFiles:S,getFile:function(e){return r.query("GET_ACTIVE_ITEM",e)},processFile:T,prepareFile:_,removeFile:E,getFiles:C,processFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0])?t[0]:t;if(!r.length){var o=C().filter(function(e){return!(e.status===se.IDLE&&e.origin===ae.LOCAL)&&e.status!==se.PROCESSING&&e.status!==se.PROCESSING_COMPLETE&&e.status!==se.PROCESSING_REVERT_ERROR});return Promise.all(o.map(T))}return Promise.all(r.map(T))},removeFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0])?t[0]:t,o=C();return r.length?r.map(function(e){return m(e)?o[e]?o[e].id:null:e}).filter(function(e){return e}).map(E):Promise.all(o.map(E))},prepareFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0])?t[0]:t,o=r.length?r:C();return Promise.all(o.map(_))},sort:function(e){return r.dispatch("SORT",{compare:e})},browse:function(){var e=d.element.querySelector("input[type=file]");e&&e.click()},destroy:function(){k.fire("destroy",d.element),r.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:function(e){return x(d.element,e)},insertAfter:function(e){return I(d.element,e)},appendTo:function(e){return e.appendChild(d.element)},replaceElement:function(e){x(d.element,e),e.parentNode.removeChild(e),t=e},restoreElement:function(){t&&(I(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:function(e){return d.element===e||t===e},element:{get:function(){return d.element}},status:{get:function(){return r.query("GET_STATUS")}}});return r.dispatch("DID_INIT"),i(k)},Sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};o(me(),function(e,n){t[e]=n[0]});var n=Er(Object.assign({},t,{},e));return n},Cr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];o(e.attributes,function(t){n.push(e.attributes[t])});var r=n.filter(function(e){return e.name}).reduce(function(t,n){var r,o=s(e,n.name);return t[(r=n.name,ur(r.replace(/^data-/,"")))]=o===n.name||o,t},{});return function e(t,n){o(n,function(n,r){o(t,function(e,o){var i=new RegExp(n),s=i.test(e);if(s&&(delete t[e],!1!==r))if(P(r))t[r]=o;else{var a,l=r.group;H(r)&&!t[l]&&(t[l]={}),t[l][(a=e.replace(i,""),a.charAt(0).toLowerCase()+a.slice(1))]=o}}),r.mapping&&e(t[r.group],r.mapping)})}(r,t),r},Tr=function(){return(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};de("SET_ATTRIBUTE_TO_OPTION_MAP",n);var r=Object.assign({},t),o=Cr("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,n);Object.keys(o).forEach(function(e){H(o[e])?(H(r[e])||(r[e]={}),Object.assign(r[e],o[e])):r[e]=o[e]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(function(e){return{source:e.value,options:{type:e.dataset.type}}}));var i=Sr(r);return e.files&&Array.from(e.files).forEach(function(e){i.addFile(e)}),i.replaceElement(e),i}.apply(void 0,arguments):Sr.apply(void 0,arguments)},kr=["fire","_read","_write"],Or=function(e){var t={};return re(e,t,kr),t},xr=function(e,t){return e.replace(/(?:{([a-zA-Z]+)})/g,function(e,n){return t[n]})},Ir=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:function(e,t){},post:function(e,t,n){var o=ee();r.onmessage=function(e){e.data.id===o&&t(e.data.message)},r.postMessage({id:o,message:e},n)},terminate:function(){r.terminate(),URL.revokeObjectURL(n)}}},Dr=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(e){n(e)},r.src=e})},Mr=function(e,t){var n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Ar=function(e){return Mr(e,e.name)},Rr=[],Nr=function(e){if(!Rr.includes(e)){Rr.push(e);var t,n=e({addFilter:he,utils:{Type:ue,forin:o,isString:P,isFile:it,toNaturalFileSize:St,replaceInString:xr,getExtensionFromFilename:Me,getFilenameWithoutExtension:ot,guesstimateMimeType:Tn,getFileFromBlob:Ne,getFilenameFromURL:De,createRoute:O,createWorker:Ir,createView:k,createItemAPI:ie,loadImage:Dr,copyFile:Ar,renameFile:Mr,createBlob:Le,applyFilterChain:fe,text:yt,getNumericAspectRatioFromString:ye},views:{fileActionButton:Et}});t=n.options,Object.assign(ve,t)}},Lr=(qt="undefined"!=typeof window&&void 0!==window.document&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window,function(){return qt}),Pr={apps:[]},Fr=function(){};if(e.Status={},e.FileStatus={},e.FileOrigin={},e.OptionTypes={},e.create=Fr,e.destroy=Fr,e.parse=Fr,e.find=Fr,e.registerPlugin=Fr,e.getOptions=Fr,e.setOptions=Fr,Lr()){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="__framePainter";if(window[r])return window[r].readers.push(e),void window[r].writers.push(t);window[r]={readers:[e],writers:[t]};var o=window[r],i=1e3/n,s=null,a=null,l=null,c=null,u=function(){document.hidden?(l=function(){return window.setTimeout(function(){return p(performance.now())},i)},c=function(){return window.clearTimeout(a)}):(l=function(){return window.requestAnimationFrame(p)},c=function(){return window.cancelAnimationFrame(a)})};document.addEventListener("visibilitychange",function(){c&&c(),u(),p(performance.now())});var p=function e(t){a=l(e),s||(s=t);var n=t-s;n<=i||(s=t-n%i,o.readers.forEach(function(e){return e()}),o.writers.forEach(function(e){return e(t)}))};u(),p(performance.now())}(function(){Pr.apps.forEach(function(e){return e._read()})},function(e){Pr.apps.forEach(function(t){return t._write(e)})});var qr=function t(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Lr,create:e.create,destroy:e.destroy,parse:e.parse,find:e.find,registerPlugin:e.registerPlugin,setOptions:e.setOptions}})),document.removeEventListener("DOMContentLoaded",t)};"loading"!==document.readyState?setTimeout(function(){return qr()},0):document.addEventListener("DOMContentLoaded",qr);var zr=function(){return o(me(),function(t,n){e.OptionTypes[t]=n[1]})};e.Status=Object.assign({},we),e.FileOrigin=Object.assign({},ae),e.FileStatus=Object.assign({},se),e.OptionTypes={},zr(),e.create=function(){var t=Tr.apply(void 0,arguments);return t.on("destroy",e.destroy),Pr.apps.push(t),Or(t)},e.destroy=function(e){var t=Pr.apps.findIndex(function(t){return t.isAttachedTo(e)});if(t>=0){var n=Pr.apps.splice(t,1)[0];return n.restoreElement(),!0}return!1},e.parse=function(t){var n=Array.from(t.querySelectorAll(".filepond")),r=n.filter(function(e){return!Pr.apps.find(function(t){return t.isAttachedTo(e)})});return r.map(function(t){return e.create(t)})},e.find=function(e){var t=Pr.apps.find(function(t){return t.isAttachedTo(e)});return t?Or(t):null},e.registerPlugin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(Nr),zr()},e.getOptions=function(){var e={};return o(me(),function(t,n){e[t]=n[0]}),e},e.setOptions=function(t){return H(t)&&(Pr.apps.forEach(function(e){e.setOptions(t)}),function(e){o(e,function(e,t){ve[e]&&(ve[e][0]=Y(t,ve[e][0],ve[e][1]))})}(t)),e.getOptions()}}e.supported=Lr,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},o={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){return["a",e.attrs]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}},i=new(n(5).Schema)({nodes:r,marks:o});t.nodes=r,t.marks=o,t.schema=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=n(56))&&"object"==typeof r&&"default"in r?r.default:r,s=new o.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:!0,getAttrs:function(e){return{params:e.getAttribute("data-params")}}}],toDOM:function(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(e){return{tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline",toDOM:function(e){return e.text}},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(e){return"italic"==e&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){return["a",e.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});var a=function(e,t){this.schema=e,this.stack=[{type:e.topNodeType,content:[]}],this.marks=o.Mark.none,this.tokenHandlers=t};function l(e,t){return e.getAttrs?e.getAttrs(t):e.attrs instanceof Function?e.attrs(t):e.attrs}function c(e){return"code_inline"==e||"code_block"==e||"fence"==e}function u(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function p(){}a.prototype.top=function(){return this.stack[this.stack.length-1]},a.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},a.prototype.addText=function(e){if(e){var t,n=this.top().content,r=n[n.length-1],i=this.schema.text(e,this.marks);r&&(t=function(e,t){if(e.isText&&t.isText&&o.Mark.sameSet(e.marks,t.marks))return e.copy(e.text+t.text)}(r,i))?n[n.length-1]=t:n.push(i)}},a.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},a.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},a.prototype.parseTokens=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n)}},a.prototype.addNode=function(e,t,n){var r=e.createAndFill(t,n,this.marks);return r?(this.push(r),r):null},a.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},a.prototype.closeNode=function(){this.marks.length&&(this.marks=o.Mark.none);var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)};var f=function(e,t,n){this.tokens=n,this.schema=e,this.tokenizer=t,this.tokenHandlers=function(e,t){var n=Object.create(null),r=function(r){var o=t[r];if(o.block){var i=e.nodeType(o.block);c(r)?n[r]=function(e,t){e.openNode(i,l(o,t)),e.addText(u(t.content)),e.closeNode()}:(n[r+"_open"]=function(e,t){return e.openNode(i,l(o,t))},n[r+"_close"]=function(e){return e.closeNode()})}else if(o.node){var s=e.nodeType(o.node);n[r]=function(e,t){return e.addNode(s,l(o,t))}}else if(o.mark){var a=e.marks[o.mark];c(r)?n[r]=function(e,t){e.openMark(a.create(l(o,t))),e.addText(u(t.content)),e.closeMark(a)}:(n[r+"_open"]=function(e,t){return e.openMark(a.create(l(o,t)))},n[r+"_close"]=function(e){return e.closeMark(a)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));c(r)?n[r]=p:(n[r+"_open"]=p,n[r+"_close"]=p)}};for(var o in t)r(o);return n.text=function(e,t){return e.addText(t.content)},n.inline=function(e,t){return e.parseTokens(t.children)},n.softbreak=n.softbreak||function(e){return e.addText("\n")},n}(e,n)};f.prototype.parse=function(e){var t,n=new a(this.schema,this.tokenHandlers);n.parseTokens(this.tokenizer.parse(e,{}));do{t=n.closeNode()}while(n.stack.length);return t};var d=new f(s,i("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(e){return{order:+e.attrGet("order")||1}}},heading:{block:"heading",getAttrs:function(e){return{level:+e.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}}},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}},code_inline:{mark:"code"}}),h=function(e,t){this.nodes=e,this.marks=t};h.prototype.serialize=function(e,t){var n=new v(this.nodes,this.marks,t);return n.renderContent(e),n.out};var m=new h({blockquote:function(e,t){e.wrapBlock("> ",null,t,function(){return e.renderContent(t)})},code_block:function(e,t){e.write("```"+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},heading:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},horizontal_rule:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list:function(e,t){e.renderList(t,"  ",function(){return(t.attrs.bullet||"*")+" "})},ordered_list:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "})},list_item:function(e,t){e.renderContent(t)},paragraph:function(e,t){e.renderInline(t),e.closeBlock(t)},image:function(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")")},hard_break:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type)return void e.write("\\\n")},text:function(e,t){e.text(t.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:"[",close:function(e,t){return"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},code:{open:"`",close:"`",escape:!1}}),v=function(e,t,n){this.nodes=e,this.marks=t,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)};v.prototype.flushClose=function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var r=1;r<e;r++)this.out+=t+"\n"}this.closed=!1}},v.prototype.wrapBlock=function(e,t,n,r){var o=this.delim;this.write(t||e),this.delim+=e,r(),this.delim=o,this.closeBlock(n)},v.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},v.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},v.prototype.write=function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)},v.prototype.closeBlock=function(e){this.closed=e},v.prototype.text=function(e,t){for(var n=e.split("\n"),r=0;r<n.length;r++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==t?this.esc(n[r],o):n[r],r!=n.length-1&&(this.out+="\n")}},v.prototype.render=function(e,t,n){if("number"==typeof t)throw new Error("!");this.nodes[e.type.name](this,e,t,n)},v.prototype.renderContent=function(e){var t=this;e.forEach(function(n,r,o){return t.render(n,e,o)})},v.prototype.renderInline=function(e){var t=this,n=[],r="",o=function(o,i,s){var a=o?o.marks:[];o&&"hard_break"===o.type.name&&(a=a.filter(function(t){if(s+1==e.childCount)return!1;var n=e.child(s+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))}));var l=r;if(r="",o&&o.isText&&a.some(function(e){var n=t.marks[e.type.name];return n&&n.expelEnclosingWhitespace})){var c=/^(\s*)(.*?)(\s*)$/m.exec(o.text),u=c[1],p=c[2],f=c[3];l+=u,r=f,(u||f)&&((o=p?o.withText(p):null)||(a=n))}var d=a.length&&a[a.length-1],h=d&&!1===t.marks[d.type.name].escape,m=a.length-(h?1:0);e:for(var v=0;v<m;v++){var g=a[v];if(!t.marks[g.type.name].mixable)break;for(var y=0;y<n.length;y++){var b=n[y];if(!t.marks[b.type.name].mixable)break;if(g.eq(b)){v>y?a=a.slice(0,y).concat(g).concat(a.slice(y,v)).concat(a.slice(v+1,m)):y>v&&(a=a.slice(0,v).concat(a.slice(v+1,y)).concat(g).concat(a.slice(y,m)));continue e}}}for(var w=0;w<Math.min(n.length,m)&&a[w].eq(n[w]);)++w;for(;w<n.length;)t.text(t.markString(n.pop(),!1),!1);if(l&&t.text(l),o){for(;n.length<m;){var _=a[n.length];n.push(_),t.text(t.markString(_,!0),!1)}h&&o.isText?t.text(t.markString(d,!0)+o.text+t.markString(d,!1),!1):t.render(o,e,s)}};e.forEach(o),o(null)},v.prototype.renderList=function(e,t,n){var r=this;this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,e.forEach(function(i,s,a){a&&o&&r.flushClose(1),r.wrapBlock(t,n(a),e,function(){return r.render(i,e,a)})}),this.inTightList=i},v.prototype.esc=function(e,t){return e=e.replace(/[`*\\~\[\]]/g,"\\$&"),t&&(e=e.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),e},v.prototype.quote=function(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]},v.prototype.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},v.prototype.markString=function(e,t){var n=this.marks[e.type.name],r=t?n.open:n.close;return"string"==typeof r?r:r(this,e)},v.prototype.getEnclosingWhitespace=function(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}},t.schema=s,t.defaultMarkdownParser=d,t.MarkdownParser=f,t.MarkdownSerializer=h,t.defaultMarkdownSerializer=m,t.MarkdownSerializerState=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(40))&&"object"==typeof r&&"default"in r?r.default:r,i=n(7),s=n(1),a=function(e,t){this.items=e,this.eventCount=t};a.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(n.items.get(i-1).selection){--i;break}}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,c,u=e.tr,p=[],f=[];return this.items.forEach(function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void f.push(e);if(r){f.push(new l(e.map));var d,h=e.step.map(r.slice(o));h&&u.maybeStep(h).doc&&(d=u.mapping.maps[u.mapping.maps.length-1],p.push(new l(d,null,null,p.length+f.length))),o--,d&&r.appendMap(d,o)}else u.maybeStep(e.step);return e.selection?(s=r?e.selection.map(r.slice(o)):e.selection,c=new a(n.items.slice(0,i).append(f.reverse().concat(p)),n.eventCount-1),!1):void 0},this.items.length,0),{remaining:c,transform:u,selection:s}},a.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,s=this.items,c=!r&&s.length?s.get(s.length-1):null,p=0;p<e.steps.length;p++){var f,d=e.steps[p].invert(e.docs[p]),h=new l(e.mapping.maps[p],d,t);(f=c&&c.merge(h))&&(h=f,p?o.pop():s=s.slice(0,s.length-1)),o.push(h),t&&(i++,t=null),r||(c=h)}var m,v,g,y=i-n.depth;return y>u&&(v=y,(m=s).forEach(function(e,t){if(e.selection&&0==v--)return g=t,!1}),s=m.slice(g),i-=y),new a(s.append(o),i)},a.prototype.remapping=function(e,t){var n=new i.Mapping;return this.items.forEach(function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?o=n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)},e,t),n},a.prototype.addMaps=function(e){return 0==this.eventCount?this:new a(this.items.append(e.map(function(e){return new l(e)})),this.eventCount)},a.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach(function(e){e.selection&&s--},r);var c=t;this.items.forEach(function(t){var r=o.getMirror(--c);if(null!=r){i=Math.min(i,r);var a=o.maps[r];if(t.step){var u=e.steps[r].invert(e.docs[r]),p=t.selection&&t.selection.map(o.slice(c,r));p&&s++,n.push(new l(a,u,p))}else n.push(new l(a))}},r);for(var u=[],p=t;p<i;p++)u.push(new l(o.maps[p]));var f=this.items.slice(0,r).append(u).append(n),d=new a(f,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},a.prototype.emptyItemCount=function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e},a.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach(function(o,s){if(s>=e)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var u=o.selection&&o.selection.map(t.slice(n));u&&i++;var p,f=new l(c.invert(),a,u),d=r.length-1;(p=r.length&&r[d].merge(f))?r[d]=p:r.push(f)}}else o.map&&n--},this.items.length,0),new a(o.from(r.reverse()),i)},a.empty=new a(o.empty,0);var l=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};l.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new l(t.getMap().invert(),t,this.selection)}};var c=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},u=20;function p(e){var t=[];return e.forEach(function(e,n,r,o){return t.push(r,o)}),t}function f(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function d(e,t,n,r){var o=v(t),i=g.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),u=new c(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(g,{redo:r,historyState:u}).scrollIntoView())}}var h=!1,m=null;function v(e){var t=e.plugins;if(m!=t){h=!1,m=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){h=!0;break}}return h}var g=new s.PluginKey("history"),y=new s.PluginKey("closeHistory");t.HistoryState=c,t.closeHistory=function(e){return e.setMeta(y,!0)},t.history=function(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new s.Plugin({key:g,state:{init:function(){return new c(a.empty,a.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var o,i=n.getMeta(g);if(i)return i.historyState;n.getMeta(y)&&(e=new c(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(g))return s.getMeta(g).redo?new c(e.done.addTransform(n,null,r,v(t)),e.undone,p(n.mapping.maps[n.steps.length-1]),e.prevTime):new c(e.done,e.undone.addTransform(n,null,r,v(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new c(e.done.rebased(n,o),e.undone.rebased(n,o),f(e.prevRanges,n.mapping),e.prevTime):new c(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),f(e.prevRanges,n.mapping),e.prevTime);var l=e.prevTime<(n.time||0)-r.newGroupDelay||!s&&!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)}),n}(n,e.prevRanges),u=s?f(e.prevRanges,n.mapping):p(n.mapping.maps[n.steps.length-1]);return new c(e.done.addTransform(n,l?t.selection.getBookmark():null,r,v(t)),a.empty,u,n.time)}(n,r,t,e)}},config:e})},t.undo=function(e,t){var n=g.getState(e);return!(!n||0==n.done.eventCount||(t&&d(n,e,t,!1),0))},t.redo=function(e,t){var n=g.getState(e);return!(!n||0==n.undone.eventCount||(t&&d(n,e,t,!0),0))},t.undoDepth=function(e){var t=g.getState(e);return t?t.done.eventCount:0},t.redoDepth=function(e){var t=g.getState(e);return t?t.undone.eventCount:0}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,l=0;l<s;l++)c[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),i=0;i<n.length;i++){var s=n[i];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])}return o}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(23),i=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.parent=null,this.children=[],this.state={},(0,i.default)(this,t),this.children=this.children||[]}return e.prototype.contains=function(t){for(;t instanceof e&&t!==this;){if(t.parent===this)return!0;t=t.parent}return!1},e.prototype.getChildAt=function(e){var t=null;return this.children.length>0&&e>=0&&e<this.children.length&&(t=this.children[e]),t},e.prototype.getChildren=function(){return this.children},e.prototype.getFirstChild=function(){var e=null;return this.children.length>0&&(e=this.children[0]),e},e.prototype.getLastChild=function(){var e=null;return this.children.length>0&&(e=this.children[this.children.length-1]),e},e.prototype.getNextSibling=function(){var e=null;if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&t<this.parent.children.length-1&&(e=this.parent.children[t+1])}return e},e.prototype.getParent=function(){return this.parent},e.prototype.getPreviousSibling=function(){var e=null;if(this.parent){var t=this.parent.children.indexOf(this);t>0&&t<this.parent.children.length&&(e=this.parent.children[t-1])}return e},e.prototype.hasChildren=function(){return this.children.length>0},e.prototype.isLastChild=function(){return!this.getNextSibling()},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length||void 0===t[0]||null===t[0]?[]:1===t.length?[].concat(t[0]):[].concat(t)}},function(e,t,n){"use strict";t.__esModule=!0;t.getElementStyle=function(e,t){return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]},t.preventDefault=function(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1},t.stopPropagation=function(e){void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=n(58)},function(e,t,n){"use strict";e.exports.encode=n(59),e.exports.decode=n(60),e.exports.format=n(61),e.exports.parse=n(62)},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",i=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),s=new RegExp("^(?:"+r+"|"+o+")");e.exports.HTML_TAG_RE=i,e.exports.HTML_OPEN_CLOSE_TAG_RE=s},function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,o,i,s=e.pos,a=e.src.charCodeAt(s);if(t)return!1;if(126!==a)return!1;if(o=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(a),o<2)return!1;for(o%2&&(e.push("text","",0).content=i,o--),n=0;n<o;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:a,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,o,i,s=[],a=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)126===(r=a[t]).marker&&-1!==r.end&&(o=a[r.end],(i=e.tokens[r.token]).type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",(i=e.tokens[o.token]).type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="","text"===e.tokens[o.token-1].type&&"~"===e.tokens[o.token-1].content&&s.push(o.token-1));for(;s.length;){for(n=(t=s.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;t!==--n&&(i=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=i)}}},function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,o=e.pos,i=e.src.charCodeAt(o);if(t)return!1;if(95!==i&&42!==i)return!1;for(r=e.scanDelims(e.pos,42===i),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:r.length,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,o,i,s,a=e.delimiters;for(t=e.delimiters.length-1;t>=0;t--)95!==(n=a[t]).marker&&42!==n.marker||-1!==n.end&&(r=a[n.end],s=t>0&&a[t-1].end===n.end+1&&a[t-1].token===n.token-1&&a[n.end+1].token===r.token+1&&a[t-1].marker===n.marker,i=String.fromCharCode(n.marker),(o=e.tokens[n.token]).type=s?"strong_open":"em_open",o.tag=s?"strong":"em",o.nesting=1,o.markup=s?i+i:i,o.content="",(o=e.tokens[r.token]).type=s?"strong_close":"em_close",o.tag=s?"strong":"em",o.nesting=-1,o.markup=s?i+i:i,o.content="",s&&(e.tokens[a[t-1].token].content="",e.tokens[a[n.end+1].token].content="",t--))}},function(e,t,n){"use strict";var r,o=n(42),i=(r=o)&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t,n){n(117),e.exports=n(116)},function(e,t){function n(e){this.content=e}n.prototype={constructor:n,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,r){var o=r&&r!=e?this.remove(r):this,i=o.find(e),s=o.content.slice();return-1==i?s.push(r||e,t):(s[i+1]=t,r&&(s[i]=r)),new n(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var r=this.content.slice();return r.splice(t,2),new n(r)},addToStart:function(e,t){return new n([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new n(r)},addBefore:function(e,t,r){var o=this.remove(t),i=o.content.slice(),s=o.find(e);return i.splice(-1==s?i.length:s,0,t,r),new n(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=n.from(e)).size?new n(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=n.from(e)).size?new n(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=n.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},get size(){return this.content.length>>1}},n.from=function(e){if(e instanceof n)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new n(t)},e.exports=n},function(e,t,n){e.exports=function(){var e="function",t="object",n="textContent",r="setAttribute",o="attrMap",i="isNode",s="isElement",a=typeof document===t?document:{},l=function(e,t){return typeof e===t},c=typeof Node===e?function(e){return e instanceof Node}:function(e){return e&&l(e,t)&&"nodeType"in e&&l(e.ownerDocument,t)},u=function(e){return e instanceof Array},p=function(e,t){u(t)?t.map(function(t){p(e,t)}):(f[i](t)||(t=a.createTextNode(t)),e.appendChild(t))};function f(){var c,d=arguments,h=d[0],m=d[1],v=2,g=d.length,y=f[o];if(h=f[s](h)?h:a.createElement(h),1===g)return h;if((!l(m,t)||f[i](m)||u(m))&&(--v,m=null),g-v==1&&l(d[v],"string")&&void 0!==h[n])h[n]=d[v];else for(;v<g;++v)if(null!=(c=d[v]))if(u(c))for(var b=0;b<c.length;++b)p(h,c[b]);else p(h,c);for(var w in m)if(y[w]){var _=y[w];typeof _===e?_(h,m[w]):h[r](_,m[w])}else l(m[w],e)?h[w]=m[w]:h[r](w,m[w]);return h}return f[o]={},f[s]=function(e){return f[i](e)&&1===e.nodeType},f[i]=c,"undefined"!=typeof Proxy&&(f.proxy=new Proxy(f,{get:function(e,t){return!(t in f)&&(f[t]=f.bind(null,t)),f[t]}})),f}()},function(e,t){var n=function(){};n.prototype.append=function(e){return e.length?(e=n.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},n.prototype.prepend=function(e){return e.length?n.from(e).append(this):this},n.prototype.appendInner=function(e){return new o(this,e)},n.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?n.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},n.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},n.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},n.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},n.from=function(e){return e instanceof n?e:e&&e.length?new r(e):n.empty};var r=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{},depth:{}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(n);n.empty=new r([]);var o=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(n);e.exports=n},function(e,t){for(var n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),i="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l=o&&(a||+o[1]<57)||s&&a,c=0;c<10;c++)n[48+c]=n[96+c]=String(c);for(c=1;c<=24;c++)n[c+111]="F"+c;for(c=65;c<=90;c++)n[c]=String.fromCharCode(c+32),r[c]=String.fromCharCode(c);for(var u in n)r.hasOwnProperty(u)||(r[u]=n[u]);function p(e){var t=!(l&&(e.ctrlKey||e.altKey||e.metaKey)||i&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:n)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}e.exports=p,p.base=n,p.shift=r},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=g(n(22)),s=g(n(8)),a=g(n(43)),l=g(n(44)),c=n(45),u=g(n(47)),p=g(n(25)),f=g(n(49)),d=n(50),h=g(n(51)),m=n(52),v=n(26);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(){},b=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Error: "+e.replace(/%s/g,function(){return n[o++]});console&&console.error&&console.error(i);try{throw new Error(i)}catch(e){}},w=function(e){return!!e&&(e instanceof c.Node||(b("The node must be a Node object."),!1))},_=function(e){return(0,f.default)(e||new c.Node,{parent:null,children:[],state:{depth:-1,open:!0,path:"",prefixMask:"",total:0}})},E=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return s.options={autoOpen:!1,droppable:!1,shouldLoadNodes:null,loadNodes:null,rowRenderer:m.defaultRowRenderer,selectable:!0,shouldSelectNode:null,el:null,layout:"div",noDataClass:"infinite-tree-no-data",noDataText:"No data",nodeIdAttr:"data-id",togglerClass:"infinite-tree-toggler"},s.state={openNodes:[],rootNode:_(),selectedNode:null},s.clusterize=null,s.nodeTable=new h.default,s.nodes=[],s.rows=[],s.filtered=!1,s.scrollElement=null,s.contentElement=null,s.draggableTarget=null,s.droppableTarget=null,s.contentListener={click:function(e){var t=(e=e||window.event).stopPropagation;e.stopPropagation=function(){e.cancelBubble=!0,t&&t.call(e)},setTimeout(function(){if(!0!==e.cancelBubble&&(s.emit("click",e),!0!==e.cancelBubble)){var t=null,n=!1;for(e.target?t=e.target!==e.currentTarget?e.target:null:e.srcElement&&(t=e.srcElement);t&&t.parentElement!==s.contentElement;)(0,a.default)(t).has(s.options.togglerClass)&&(n=!0),t=t.parentElement;if(t&&!t.hasAttribute("disabled")){var r=t.getAttribute(s.options.nodeIdAttr),o=s.getNodeById(r);o&&(n?s.toggleNode(o,{async:!0}):s.selectNode(o))}}},0)},dblclick:function(e){s.emit("doubleClick",e)},keydown:function(e){s.emit("keyDown",e)},keyup:function(e){s.emit("keyUp",e)},dragstart:function(e){e=e||window.event,s.draggableTarget=e.target||e.srcElement},dragend:function(e){e=e||window.event;var t=s.options.droppable.hoverClass,n=void 0===t?"":t;s.draggableTarget=null,s.droppableTarget&&((0,a.default)(s.droppableTarget).remove(n),s.droppableTarget=null)},dragenter:function(e){var t=null;for((e=e||window.event).target?t=e.target!==e.currentTarget?e.target:null:e.srcElement&&(t=e.srcElement);t&&t.parentElement!==s.contentElement;)t=t.parentElement;if(t&&s.droppableTarget!==t){var n=s.options.droppable,r=n.accept,o=n.hoverClass,i=void 0===o?"":o;(0,a.default)(s.droppableTarget).remove(i),s.droppableTarget=null;var l=!0;if("function"==typeof r){var c=t.getAttribute(s.options.nodeIdAttr),u=s.getNodeById(c);l=!!r.call(s,e,{type:"dragenter",draggableTarget:s.draggableTarget,droppableTarget:t,node:u})}l&&((0,a.default)(t).add(i),s.droppableTarget=t)}},dragover:function(e){e=e||window.event,(0,v.preventDefault)(e)},drop:function(e){if(e=e||window.event,(0,v.preventDefault)(e),s.draggableTarget&&s.droppableTarget){var t=s.options.droppable,n=t.accept,r=t.drop,o=t.hoverClass,i=void 0===o?"":o,l=s.droppableTarget.getAttribute(s.options.nodeIdAttr),c=s.getNodeById(l),u=!0;"function"==typeof n&&(u=!!n.call(s,e,{type:"drop",draggableTarget:s.draggableTarget,droppableTarget:s.droppableTarget,node:c})),u&&"function"==typeof r&&r.call(s,e,{draggableTarget:s.draggableTarget,droppableTarget:s.droppableTarget,node:c}),(0,a.default)(s.droppableTarget).remove(i),s.droppableTarget=null}}},(0,l.default)(n)?i=o({},i,{el:n}):n&&"object"===(void 0===n?"undefined":r(n))&&(i=n),s.options=o({},s.options,i),s.create(),s.options.data&&s.loadData(s.options.data),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.create=function(){var e=this;if(this.options.el){var t=null;if(this.scrollElement=document.createElement("div"),"table"===this.options.layout){var n=document.createElement("table");n.className=(0,s.default)("infinite-tree","infinite-tree-table");var r=document.createElement("tbody");n.appendChild(r),this.scrollElement.appendChild(n),this.contentElement=r,t="tr"}else{var o=document.createElement("div");this.scrollElement.appendChild(o),this.contentElement=o,t="div"}this.scrollElement.className=(0,s.default)("infinite-tree","infinite-tree-scroll"),this.contentElement.className=(0,s.default)("infinite-tree","infinite-tree-content"),this.options.el.appendChild(this.scrollElement),this.clusterize=new u.default({tag:t,rows:[],scrollElement:this.scrollElement,contentElement:this.contentElement,emptyText:this.options.noDataText,emptyClass:this.options.noDataClass}),this.clusterize.on("clusterWillChange",function(){e.emit("clusterWillChange")}),this.clusterize.on("clusterDidChange",function(){e.emit("clusterDidChange")}),(0,v.addEventListener)(this.contentElement,"click",this.contentListener.click),(0,v.addEventListener)(this.contentElement,"dblclick",this.contentListener.dblclick),(0,v.addEventListener)(this.contentElement,"keydown",this.contentListener.keydown),(0,v.addEventListener)(this.contentElement,"keyup",this.contentListener.keyup),this.options.droppable&&((0,v.addEventListener)(document,"dragstart",this.contentListener.dragstart),(0,v.addEventListener)(document,"dragend",this.contentListener.dragend),(0,v.addEventListener)(this.contentElement,"dragenter",this.contentListener.dragenter),(0,v.addEventListener)(this.contentElement,"dragleave",this.contentListener.dragleave),(0,v.addEventListener)(this.contentElement,"dragover",this.contentListener.dragover),(0,v.addEventListener)(this.contentElement,"drop",this.contentListener.drop))}},t.prototype.destroy=function(){if(this.clear(),this.options.el){for((0,v.removeEventListener)(this.contentElement,"click",this.contentListener.click),(0,v.removeEventListener)(this.contentElement,"dblclick",this.contentListener.dblclick),(0,v.removeEventListener)(this.contentElement,"keydown",this.contentListener.keydown),(0,v.removeEventListener)(this.contentElement,"keyup",this.contentListener.keyup),this.options.droppable&&((0,v.removeEventListener)(document,"dragstart",this.contentListener.dragstart),(0,v.removeEventListener)(document,"dragend",this.contentListener.dragend),(0,v.removeEventListener)(this.contentElement,"dragenter",this.contentListener.dragenter),(0,v.removeEventListener)(this.contentElement,"dragleave",this.contentListener.dragleave),(0,v.removeEventListener)(this.contentElement,"dragover",this.contentListener.dragover),(0,v.removeEventListener)(this.contentElement,"drop",this.contentListener.drop)),this.clusterize&&(this.clusterize.destroy(!0),this.clusterize=null);this.contentElement.firstChild;)this.contentElement.removeChild(this.contentElement.firstChild);for(;this.scrollElement.firstChild;)this.scrollElement.removeChild(this.scrollElement.firstChild);for(var e=this.options.el;e.firstChild;)e.removeChild(e.firstChild);this.contentElement=null,this.scrollElement=null}},t.prototype.addChildNodes=function(e,t,n){var o=this;if(0===(e=[].concat(e||[])).length)return!1;if("object"===(void 0===t?"undefined":r(t))?t=(n=t||this.state.rootNode).children.length:n=n||this.state.rootNode,!w(n))return!1;"number"!=typeof t&&(t=n.children.length),e.forEach(function(e){e.parent=n}),n.children.splice.apply(n.children,[t,0].concat(e)),t=n.children.indexOf(e[0]);var i=n.state.total,s=(0,c.flatten)(n.children,{openNodes:this.state.openNodes}),a=[];a.length=s.length;for(var l=0;l<s.length;++l){var u=s[l];a[l]=this.options.rowRenderer(u,this.options)}if(n===this.state.rootNode)this.nodes=s,this.rows=a;else{var p=this.nodes.indexOf(n);p>=0&&(!0===n.state.open&&(this.nodes.splice.apply(this.nodes,[p+1,i].concat(s)),this.rows.splice.apply(this.rows,[p+1,i].concat(a))),this.rows[p]=this.options.rowRenderer(n,this.options))}return n.children.slice(t).forEach(function(e){o.flattenNode(e).forEach(function(e){void 0!==e.id&&o.nodeTable.set(e.id,e)})}),this.update(),!0},t.prototype.appendChildNode=function(e,t){if(t=t||this.state.rootNode,!w(t))return!1;var n=t.children.length,r=[].concat(e||[]);return this.addChildNodes(r,n,t)},t.prototype.checkNode=function(e,t){if(!w(e))return!1;if(this.emit("willCheckNode",e),this.nodes.indexOf(e)<0)return b("Invalid node index"),!1;!0===t?(e.state.checked=!0,e.state.indeterminate=!1):!1===t?(e.state.checked=!1,e.state.indeterminate=!1):(e.state.checked=!!e.state.checked,e.state.indeterminate=!!e.state.indeterminate,e.state.checked=e.state.checked&&e.state.indeterminate||!e.state.checked,e.state.indeterminate=!1);var n=e;return function(e){for(var t=e.getFirstChild();t;)if(t.state.checked=e.state.checked,t.state.indeterminate=!1,t.hasChildren())t=t.getFirstChild();else{for(;null===t.getNextSibling()&&t.parent!==e;)t=t.getParent();t=t.getNextSibling()}}(e),function(e){for(var t=e.parent;t&&t.state.depth>=0;){n=t;for(var r=0,o=!1,i=t.children?t.children.length:0,s=0;s<i;++s){var a=t.children[s];o=o||!!a.state.indeterminate,a.state.checked&&r++}0===r?(t.state.indeterminate=!1,t.state.checked=!1):r>0&&r<i||o?(t.state.indeterminate=!0,t.state.checked=!0):(t.state.indeterminate=!1,t.state.checked=!0),t=t.parent}}(e),this.updateNode(n),this.emit("checkNode",e),!0},t.prototype.clear=function(){this.clusterize&&this.clusterize.clear(),this.nodeTable.clear(),this.nodes=[],this.rows=[],this.state.openNodes=[],this.state.rootNode=_(this.state.rootNode),this.state.selectedNode=null},t.prototype.closeNode=function(e,t){var n=this,r=o({},t),i=r.async,s=void 0!==i&&i,a=r.asyncCallback,l=void 0===a?y:a,c=r.silent,u=void 0!==c&&c;if(!w(e))return!1;if(this.emit("willCloseNode",e),e===this.state.rootNode)return b("Cannot close the root node"),!1;var p=this.nodes.indexOf(e);if(p<0)return b("Invalid node index"),!1;if(this.state.openNodes.indexOf(e)<0)return!1;e.state.collapsing=!0,this.rows[p]=this.options.rowRenderer(e,this.options),this.update();var f=function(){if(n.state.selectedNode&&n.state.selectedNode!==e){var r=n.nodes.indexOf(n.state.selectedNode),o=e.state.total;p+1<=r&&r<=p+o&&n.selectNode(e,t)}e.state.open=!1;var i=n.state.openNodes.filter(function(e){return e.state.open});n.state.openNodes=i;for(var s=e.state.total,a=e;null!==a;a=a.parent)a.state.total=a.state.total-s;n.nodes.splice(p+1,s),n.rows.splice(p+1,s),e.state.collapsing=!1,n.rows[p]=n.options.rowRenderer(e,n.options),n.update(),u||n.emit("closeNode",e),"function"==typeof l&&l()};return s?setTimeout(f,0):f(),!0},t.prototype.filter=function(e,t){t=o({caseSensitive:!1,exactMatch:!1,filterPath:"name",includeAncestors:!0,includeDescendants:!0},t),this.filtered=!0;var n=this.state.rootNode;!function r(o){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!o||!o.children)return!1;if(o===n)o.state.filtered=!1;else if(i)o.state.filtered=!0;else if("string"==typeof e){var s=(0,d.get)(o,t.filterPath,"");Number.isFinite(s)&&(s=String(s)),"string"!=typeof s&&(s="");var a=e;t.caseSensitive||(s=s.toLowerCase(),a=a.toLowerCase()),o.state.filtered=t.exactMatch?s===a:s.indexOf(a)>=0}else if("function"==typeof e){var l=e;o.state.filtered=!!l(o)}else o.state.filtered=!1;t.includeDescendants&&(i=i||o.state.filtered);for(var c=!1,u=0;u<o.children.length;++u){var p=o.children[u];p&&r(p,i)&&(c=!0)}return t.includeAncestors&&c&&(o.state.filtered=!0),o.state.filtered}(n),this.rows.length=this.nodes.length;for(var r=0;r<this.nodes.length;++r){var i=this.nodes[r];this.rows[r]=this.options.rowRenderer(i,this.options)}this.update()},t.prototype.flattenChildNodes=function(e){if(e=e||this.state.rootNode,!w(e))return[];for(var t=[],n=e.getFirstChild();n;)if(t.push(n),n.hasChildren())n=n.getFirstChild();else{for(;null===n.getNextSibling()&&n.parent!==e;)n=n.getParent();n=n.getNextSibling()}return t},t.prototype.flattenNode=function(e){return w(e)?[e].concat(this.flattenChildNodes(e)):[]},t.prototype.getChildNodes=function(e){return e=e||this.state.rootNode,w(e)?e.children:[]},t.prototype.getNodeById=function(e){var t=this.nodeTable.get(e);if(!t){if(!(t=this.nodes.filter(function(t){return t.id===e})[0]))return null;this.nodeTable.set(t.id,t)}return t},t.prototype.getNodeFromPoint=function(e,t){for(var n=document.elementFromPoint(e,t);n&&n.parentElement!==this.contentElement;)n=n.parentElement;if(!n)return null;var r=n.getAttribute(this.options.nodeIdAttr);return this.getNodeById(r)},t.prototype.getOpenNodes=function(){return this.state.openNodes.slice()},t.prototype.getRootNode=function(){return this.state.rootNode},t.prototype.getSelectedNode=function(){return this.state.selectedNode},t.prototype.getSelectedIndex=function(){return this.nodes.indexOf(this.state.selectedNode)},t.prototype.insertNodeAfter=function(e,t){if(!w(t))return!1;var n=t.getParent(),r=n.children.indexOf(t)+1,o=[].concat(e||[]);return this.addChildNodes(o,r,n)},t.prototype.insertNodeBefore=function(e,t){if(!w(t))return!1;var n=t.getParent(),r=n.children.indexOf(t),o=[].concat(e||[]);return this.addChildNodes(o,r,n)},t.prototype.loadData=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.nodes=(0,c.flatten)(t,{openAllNodes:this.options.autoOpen}),this.nodeTable.clear(),this.state.openNodes=this.nodes.filter(function(e){return e.state.open}),this.state.selectedNode=null;var n=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&null!==e.parent;)e=e.parent;return e}(this.nodes.length>0?this.nodes[0]:null);this.state.rootNode=n||_(this.state.rootNode),this.flattenChildNodes(this.state.rootNode).forEach(function(t){void 0!==t.id&&e.nodeTable.set(t.id,t)}),this.rows.length=this.nodes.length;for(var r=0;r<this.nodes.length;++r){var o=this.nodes[r];this.rows[r]=this.options.rowRenderer(o,this.options)}this.update()},t.prototype.moveNodeTo=function(e,t,n){if(!w(e)||!w(t))return!1;for(var r=t;null!==r;r=r.parent)if(r===e)return b("Cannot move an ancestor node (id="+e.id+") to the specified parent node (id="+t.id+")."),!1;return this.removeNode(e)&&this.addChildNodes(e,n,t)},t.prototype.openNode=function(e,t){var n=this,r=o({},t),i=r.async,s=void 0!==i&&i,a=r.asyncCallback,l=void 0===a?y:a,u=r.silent,f=void 0!==u&&u;if(!w(e))return!1;if(!this.nodeTable.has(e.id))return b("Cannot open node with the given node id:",e.id),!1;if(this.state.openNodes.indexOf(e)>=0)return!1;this.emit("willOpenNode",e);var d=this.nodes.indexOf(e),h=function(){e.state.open=!0,n.state.openNodes.indexOf(e)<0&&(n.state.openNodes=[e].concat(n.state.openNodes));var t=(0,c.flatten)(e.children,{openNodes:n.state.openNodes});if(t.length>0&&!n.nodeTable.get(t[0])&&t.forEach(function(e){void 0!==e.id&&n.nodeTable.set(e.id,e)}),e.state.expanding=!1,d>=0){var r=[];r.length=t.length;for(var o=0;o<t.length;++o){var i=t[o];r[o]=n.options.rowRenderer(i,n.options)}n.nodes.splice.apply(n.nodes,[d+1,0].concat(t)),n.rows.splice.apply(n.rows,[d+1,0].concat(r)),n.rows[d]=n.options.rowRenderer(e,n.options),n.update()}f||n.emit("openNode",e),"function"==typeof l&&l()};return d<0?(e.state.expanding=!0,s?setTimeout(h,0):h(),!0):("function"==typeof this.options.shouldLoadNodes?this.options.shouldLoadNodes(e):!e.hasChildren()&&e.loadOnDemand)?"function"==typeof this.options.loadNodes&&(!0!==e.state.loading&&(e.state.loading=!0,this.rows[d]=this.options.rowRenderer(e,this.options),this.update(),setTimeout(function(){n.options.loadNodes(e,function(r,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;i=(0,p.default)(i);var a=n.nodes.indexOf(e);if(0===i.length&&a>=0&&(e.state.open=!0,n.state.openNodes.indexOf(e)<0&&(n.state.openNodes=[e].concat(n.state.openNodes))),r||0===i.length)return e.state.loading=!1,n.rows[a]=n.options.rowRenderer(e,n.options),n.update(),void("function"==typeof s&&s());n.addChildNodes(i,e),e.hasChildren()?n.openNode(e,o({},t,{async:!0,asyncCallback:function(){e.state.loading=!1;var t=n.nodes.indexOf(e);n.rows[t]=n.options.rowRenderer(e,n.options),n.update(),"function"==typeof s&&s()}})):(e.state.loading=!1,n.rows[a]=n.options.rowRenderer(e,n.options),n.update(),"function"==typeof s&&s())})},0),!0)):(e.state.expanding=!0,this.rows[d]=this.options.rowRenderer(e,this.options),this.update(),s?setTimeout(h,0):h(),!0)},t.prototype.removeChildNodes=function(e,t){var n=this;if(!w(e))return!1;if(0===e.children.length)return!1;if(e===this.state.rootNode)return this.clear(),!0;var r=this.nodes.indexOf(e);if(r>=0&&this.state.selectedNode){var o=this.nodes.indexOf(this.state.selectedNode),i=r+1,s=r+e.state.total;i<=o&&o<=s&&(e===this.state.rootNode?this.selectNode(null,t):this.selectNode(e,t))}for(var a=this.flattenChildNodes(e),l=e.state.total,c=e;null!==c;c=c.parent)c.state.total=c.state.total-l;return e.children=[],e!==this.state.rootNode&&(e.state.open=e.state.open&&e.children.length>0),r>=0&&(this.nodes.splice(r+1,l),this.rows.splice(r+1,l),this.rows[r]=this.options.rowRenderer(e,this.options)),this.state.openNodes=this.state.openNodes.filter(function(e){return a.indexOf(e)<0&&e.state.open}),a.forEach(function(e){n.nodeTable.unset(e.id)}),this.update(),!0},t.prototype.removeNode=function(e,t){var n=this;if(!w(e))return!1;var r=e.parent;if(!r)return!1;var o=this.nodes.indexOf(e),i=this.nodes.indexOf(r);if(o>=0&&this.state.selectedNode){var s=this.nodes.indexOf(this.state.selectedNode),a=o,l=o+e.state.total+1;if(a<=s&&s<=l){var c=e.getNextSibling()||e.getPreviousSibling()||e.getParent();c===this.state.rootNode?this.selectNode(null,t):this.selectNode(c,t)}}for(var u=this.flattenNode(e),p=e.state.total+1,f=r;null!==f;f=f.parent)f.state.total=f.state.total-p;return r.children.splice(r.children.indexOf(e),1),r!==this.state.rootNode&&(r.state.open=r.state.open&&r.children.length>0),o>=0&&(this.nodes.splice(o,p),this.rows.splice(o,p)),i>=0&&(this.rows[i]=this.options.rowRenderer(r,this.options)),this.state.openNodes=this.state.openNodes.filter(function(e){return u.indexOf(e)<0&&e.state.open}),u.forEach(function(e){n.nodeTable.unset(e.id)}),this.update(),!0},t.prototype.scrollToNode=function(e){if(!w(e))return!1;var t=this.nodes.indexOf(e);if(t<0)return!1;if(!this.contentElement)return!1;for(var n=this.contentElement.firstChild;n;){if((n.className||"").indexOf("clusterize-extra-row")<0&&n.offsetHeight>0)break;n=n.nextSibling}var r=n&&n.offsetHeight||0;r>0&&this.scrollTop(t*r);var o="["+this.options.nodeIdAttr+'="'+e.id+'"]',i=this.contentElement.querySelector(o);return i&&this.scrollTop(i.offsetTop),!0},t.prototype.scrollTop=function(e){return this.scrollElement?(void 0!==e&&(this.scrollElement.scrollTop=Number(e)),this.scrollElement.scrollTop):0},t.prototype.selectNode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],n=this.options,r=n.selectable,i=n.shouldSelectNode,s=o({},t),a=s.autoScroll,l=void 0===a||a,c=s.silent,u=void 0!==c&&c;if(this.emit("willSelectNode",e),!r)return!1;if("function"==typeof i&&!i(e))return!1;if(e===this.state.rootNode)return!1;if(null===e){if(this.state.selectedNode){var p=this.state.selectedNode,f=this.nodes.indexOf(this.state.selectedNode);return p.state.selected=!1,this.rows[f]=this.options.rowRenderer(p,this.options),this.state.selectedNode=null,this.update(),u||this.emit("selectNode",null),!0}return!1}if(!w(e))return!1;var d=this.nodes.indexOf(e);if(d<0)return!1;if(this.state.selectedNode!==e&&(e.state.selected=!0,this.rows[d]=this.options.rowRenderer(e,this.options)),this.state.selectedNode){var h=this.state.selectedNode,m=this.nodes.indexOf(this.state.selectedNode);h.state.selected=!1,this.rows[m]=this.options.rowRenderer(h,this.options)}if(this.state.selectedNode!==e){if(this.state.selectedNode=e,u||this.emit("selectNode",e),l&&this.scrollElement&&this.contentElement){var v="["+this.options.nodeIdAttr+'="'+e.id+'"]',g=this.contentElement.querySelector(v);if(g){var y=g.offsetTop||0,b=g.offsetHeight||0;y<this.scrollElement.scrollTop&&(this.scrollElement.scrollTop=y),y+b>=this.scrollElement.scrollTop+this.scrollElement.clientHeight&&(this.scrollElement.scrollTop+=b)}}}else this.state.selectedNode=null,u||this.emit("selectNode",null);return this.update(),!0},t.prototype.swapNodes=function(e,t){if(!w(e)||!w(e.parent))return!1;if(!w(t)||!w(t.parent))return!1;for(var n=e.parent,r=t.parent,o=n;null!==o;o=o.parent)if(o===t)return b("Cannot swap two nodes with one being an ancestor of the other."),!1;for(var i=r;null!==i;i=i.parent)if(i===e)return b("Cannot swap two nodes with one being an ancestor of the other."),!1;var s=n.children.indexOf(e),a=r.children.indexOf(t);return this.moveNodeTo(e,r,a)&&this.moveNodeTo(t,n,s)},t.prototype.toggleNode=function(e,t){return!!w(e)&&(this.state.openNodes.indexOf(e)>=0?this.closeNode(e,t):this.openNode(e,t))},t.prototype.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||(e=this.state.rootNode),function e(t){var n="[";if(t&&t.children)for(var o=function(o){var i=[];n+="{",Object.keys(t).forEach(function(n){var s=t[n];"parent"!==n&&("children"!==n?"string"==typeof s||"object"===(void 0===s?"undefined":r(s))?i.push('"'+n+'":'+JSON.stringify(s)):i.push('"'+n+'":'+s):i.push('"'+n+'":'+e(t.children[o])))}),n=(n+=i.join(","))+"}"+(o===t.children.length-1?"":",")},i=0;i<t.children.length;++i)o(i);return n+="]"}(e)},t.prototype.unfilter=function(){this.filtered=!1;!function e(t){if(t&&(delete t.state.filtered,t.children))for(var n=0;n<t.children.length;++n){var r=t.children[n];r&&e(r)}}(this.state.rootNode),this.rows.length=this.nodes.length;for(var e=0;e<this.nodes.length;++e){var t=this.nodes[e];this.rows[e]=this.options.rowRenderer(t,this.options)}this.update()},t.prototype.update=function(){if(this.emit("contentWillUpdate"),this.clusterize){var e=this.rows.filter(function(e){return!!e});this.clusterize.update(e)}this.emit("contentDidUpdate")},t.prototype.updateNode=function(e,t,n){if(w(e)){void 0!==(t=o({},t)).id&&null!==t.id&&(this.nodeTable.unset(e.id),this.nodeTable.set(t.id,e),e.id=t.id),delete t.id,delete t.children,delete t.parent,delete t.state,e=(0,f.default)(e,t);var r=this.nodes.indexOf(e);if(r>=0){var i=o({},n).shallowRendering,s=void 0!==i&&i;if(this.rows[r]=this.options.rowRenderer(e,this.options),!s)for(var a=r+e.state.total,l=r+1;l<=a;++l)this.rows[l]=this.options.rowRenderer(this.nodes[l],this.options);this.update()}}},t}(i.default.EventEmitter);t.default=E},function(e,t){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function r(e){if(!(this instanceof r))return new r(e);e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}e.exports=function(e){return new r(e)},r.prototype.add=function(e){var t=this.el;if(t){if(""===t.className)return t.className=e;var r=t.className.split(" ");return n(r,e)>-1?r:(r.push(e),t.className=r.join(" "),r)}},r.prototype.remove=function(e){var t=this.el;if(t&&""!==t.className){var r=t.className.split(" "),o=n(r,e);return o>-1&&r.splice(o,1),t.className=r.join(" "),r}},r.prototype.has=function(e){var t=this.el;if(t)return n(t.className.split(" "),e)>-1},r.prototype.toggle=function(e){this.el&&(this.has(e)?this.remove(e):this.add(e))}},function(e,t){e.exports=function(e){return!(!e||"object"!=typeof e)&&("object"==typeof window&&"object"==typeof window.Node?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}},function(e,t,n){"use strict";t.__esModule=!0,t.Node=t.flatten=void 0;var r=i(n(46)),o=i(n(24));function i(e){return e&&e.__esModule?e:{default:e}}t.flatten=r.default,t.Node=o.default},function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(23)),o=i(n(24));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=[].concat(e);var n=[],i=[],s={lastChild:{}};t.openAllNodes=!!t.openAllNodes,t.openNodes=t.openNodes||[],t.throwOnError=!!t.throwOnError;var a=e.length>0?e[0]:null,l=a?a.parent:null;!l||l instanceof o.default||(l=new o.default(l));var c=l||new o.default({parent:null,children:e,state:{depth:-1,open:!0,path:"",prefixMask:"",total:0}});if(c===l)for(var u=c.state.total||0,p=c;p;){var f=p.state,d=f.path,h=f.total,m=void 0===h?0:h;if(p.isLastChild()&&d&&(s.lastChild[d]=!0),p.state.total=m-u,p.state.total<0){if(t.throwOnError)throw new Error("The node might have been corrupted: id="+JSON.stringify(p.id)+", state="+JSON.stringify(p.state));console&&console.log("Error: The node might have been corrupted: id=%s, parent=%s, children=%s, state=%s",JSON.stringify(p.id),p.parent,p.children,JSON.stringify(p.state))}p=p.parent}for(i.push([c,c.state.depth,0]);i.length>0;)for(var v=i.pop(),g=v[0],y=v[1],b=v[2],w=function(){var e=g.children[b];e instanceof o.default||(e=new o.default(e)),e.parent=g,e.children=e.children||[],e.parent.children[b]=e;var a,l,c=g.state.path+"."+b,u=e.hasChildren()&&(a=t.openAllNodes,l=t.openNodes,!!a||l.indexOf(e)>=0||l.indexOf(e.id)>=0),p=function(e){for(var t="";e.length>0;)t=!(e=e.replace(/\.\d+$/,""))||s.lastChild[e]?"0"+t:"1"+t;return t}(c);e.isLastChild()&&(s.lastChild[c]=!0),e.state=(0,r.default)({},e.state,{depth:y+1,open:u,path:c,prefixMask:p,total:0});for(var f=!0,d=e;null!==d.parent;){if(!1===d.parent.state.open){f=!1;break}d=d.parent}if(f){n.push(e);for(var h=e;null!==h.parent;)h.parent.state.total++,h=h.parent}++b,e.hasChildren()&&(i.push([g,y,b]),b=0,y+=1,g=e)};b<g.children.length;)w();return n}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(22),s=n(25),a=(r=s)&&r.__esModule?r:{default:r},l=n(48),c=n(26);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.getIEVersion)(),f=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,i,s=u(this,e.call(this));if(s.options={rowsInBlock:50,blocksInCluster:4,tag:null,emptyClass:"",emptyText:"",keepParity:!0},s.state={lastClusterIndex:-1,itemHeight:0,blockHeight:0,clusterHeight:0},s.scrollElement=null,s.contentElement=null,s.rows=[],s.cache={},s.scrollEventListener=(r=null,function(){navigator.platform.toLowerCase().indexOf("mac")>=0&&("none"!==s.contentElement.style.pointerEvents&&(s.contentElement.style.pointerEvents="none"),r&&(clearTimeout(r),r=null),r=setTimeout(function(){r=null,s.contentElement.style.pointerEvents="auto"},50));var e=s.getCurrentClusterIndex();s.state.lastClusterIndex!==e&&s.changeDOM(),s.state.lastClusterIndex=e}),s.resizeEventListener=function(){var e=null;return function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){var e=s.state.itemHeight,t=s.computeHeight();t.itemHeight>0&&e!==t.itemHeight&&(s.state=o({},s.state,t),s.update(s.rows))},100)}}(),!(s instanceof t))return i=new t(n),u(s,i);if(s.options=Object.keys(s.options).reduce(function(e,t){return void 0!==n[t]?e[t]=n[t]:e[t]=s.options[t],e},{}),s.scrollElement=n.scrollElement,s.contentElement=n.contentElement,s.contentElement.hasAttribute("tabindex")||s.contentElement.setAttribute("tabindex",0),Array.isArray(n.rows))s.rows=n.rows;else{s.rows=[];for(var a=s.contentElement.children,l=a.length,p=0;p<l;++p){var f=a[p];s.rows.push(f.outerHTML||"")}}var d=s.scrollElement.scrollTop;return s.changeDOM(),s.scrollElement.scrollTop=d,(0,c.addEventListener)(s.scrollElement,"scroll",s.scrollEventListener),(0,c.addEventListener)(window,"resize",s.resizeEventListener),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(e){(0,c.removeEventListener)(this.scrollElement,"scroll",this.scrollEventListener),(0,c.removeEventListener)(window,"resize",this.resizeEventListener);var t=e?this.generateEmptyRow():this.rows();this.setContent(t.join(""))},t.prototype.update=function(e){this.rows=(0,a.default)(e);var t=this.scrollElement.scrollTop;this.rows.length*this.state.itemHeight<t&&(this.scrollElement.scrollTop=0,this.state.lastClusterIndex=0),this.changeDOM(),this.scrollElement.scrollTop=t},t.prototype.clear=function(){this.rows=[],this.update()},t.prototype.append=function(e){(e=(0,a.default)(e)).length&&(this.rows=this.rows.concat(e),this.changeDOM())},t.prototype.prepend=function(e){(e=(0,a.default)(e)).length&&(this.rows=e.concat(this.rows),this.changeDOM())},t.prototype.computeHeight=function(){if(this.rows.length){var e=this.contentElement.children,t=e[Math.floor(e.length/2)],n=t.offsetHeight;if("tr"===this.options.tag&&"collapse"!==(0,c.getElementStyle)(this.contentElement,"borderCollapse")&&(n+=parseInt((0,c.getElementStyle)(this.contentElement,"borderSpacing"),10)||0),"tr"!==this.options.tag){var r=parseInt((0,c.getElementStyle)(t,"marginTop"),10)||0,o=parseInt((0,c.getElementStyle)(t,"marginBottom"),10)||0;n+=Math.max(r,o)}var i=n*this.options.rowsInBlock;return{itemHeight:n,blockHeight:i,clusterHeight:i*this.options.blocksInCluster}}return{clusterHeight:0,blockHeight:this.state.blockHeight,itemHeight:this.state.itemHeight}},t.prototype.getCurrentClusterIndex=function(){var e=this.state,t=e.blockHeight,n=e.clusterHeight;return t&&n&&Math.floor(this.scrollElement.scrollTop/(n-t))||0},t.prototype.generateEmptyRow=function(){var e=this.options,t=e.tag,n=e.emptyText,r=e.emptyClass;if(!t||!n)return[];var o=document.createElement(t);if(o.className=r,"tr"===t){var i=document.createElement("td");i.colSpan=100,i.appendChild(document.createTextNode(n)),o.appendChild(i)}else o.appendChild(document.createTextNode(n));return[o.outerHTML]},t.prototype.renderExtraTag=function(e,t){var n=document.createElement(this.options.tag);return n.className=["infinite-tree-extra-row","infinite-tree-"+e].join(" "),t&&(n.style.height=t+"px"),n.outerHTML},t.prototype.changeDOM=function(){!this.state.clusterHeight&&this.rows.length>0&&(p&&p<=9&&!this.options.tag&&(this.options.tag=this.rows[0].match(/<([^>\s\/]*)/)[1].toLowerCase()),this.contentElement.children.length<=1&&(this.cache.content=this.setContent(this.rows[0]+this.rows[0]+this.rows[0])),this.options.tag||(this.options.tag=this.contentElement.children[0].tagName.toLowerCase()),this.state=o({},this.state,this.computeHeight()));var e=0,t=0,n=[];if(this.rows.length<this.options.rowsInBlock)n=this.rows.length>0?this.rows:this.generateEmptyRow();else{var r=this.options.rowsInBlock*this.options.blocksInCluster,i=this.getCurrentClusterIndex(),s=Math.max((r-this.options.rowsInBlock)*i,0),a=s+r;e=Math.max(s*this.state.itemHeight,0),t=Math.max((this.rows.length-a)*this.state.itemHeight,0),n=this.rows.slice(s,a)}var l=n.join(""),c=this.checkChanges("content",l),u=this.checkChanges("top",e),f=this.checkChanges("bottom",t);if(c||u){var d=[];e>0&&(this.options.keepParity&&d.push(this.renderExtraTag("keep-parity")),d.push(this.renderExtraTag("top-space",e))),d.push(l),t>0&&d.push(this.renderExtraTag("bottom-space",t)),this.emit("clusterWillChange"),this.setContent(d.join("")),this.emit("clusterDidChange")}else f&&(this.contentElement.lastChild.style.height=t+"px")},t.prototype.setContent=function(e){if(p&&p<=9&&"tr"===this.options.tag){var t=document.createElement("div");t.innerHTML="<table><tbody>"+e+"</tbody></table>";for(var n=this.contentElement.lastChild;n;)this.contentElement.removeChild(n),n=this.contentElement.lastChild;for(var r=this.getChildNodes(t.firstChild.firstChild);r.length;)this.contentElement.appendChild(r.shift())}else this.contentElement.innerHTML=e},t.prototype.getChildNodes=function(e){for(var t=e.children,n=[],r=t.length,o=0;o<r;o++)n.push(t[o]);return n},t.prototype.checkChanges=function(e,t){var n=t!==this.cache[e];return this.cache[e]=t,n},t}(i.EventEmitter);t.default=f},function(e,t,n){"use strict";t.__esModule=!0;t.getIEVersion=function(){var e=document.createElement("div"),t=e.getElementsByTagName("i")||[],n=3;do{++n,e.innerHTML="\x3c!--[if gt IE "+n+"]><i></i><![endif]--\x3e"}while(t[0]);return n>4?n:document.documentMode}},function(e,t,n){"use strict";e.exports=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),i=0;i<n.length;i++){var s=n[i];if(null!=s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o}},function(e,t,n){"use strict";t.__esModule=!0;var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=t.trim=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" \f\n\r\t\v";t.indexOf(e[0])>=0;)e=e.slice(1);for(;t.indexOf(e[e.length-1])>=0;)e=e.slice(0,-1);return e};t.get=(r=new RegExp(/[\w\-]+|\[[^\]]*\]+/g),function(e,t,n){if(!e||"object"!==(void 0===e?"undefined":o(e)))return n;var s=(t=""+t).match(r);if(!s)return n;for(var a=0;a<s.length;a++){var l=s[a];if("["===(l=i(l," \f\n\r\t\v"))[0]&&(l=i(l.slice(1,-1)," \f\n\r\t\v")),l=i(l,"'\""),null==e||"object"!==(void 0===e?"undefined":o(e)))break;if(void 0===(e=e[l]))break}return void 0!==e?e:n})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={}}return e.prototype.clear=function(){this.data={}},e.prototype.get=function(e){return this.data[e]},e.prototype.has=function(e){return void 0!==this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,t},e.prototype.unset=function(e){void 0!==this.data[e]&&delete this.data[e]},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.defaultRowRenderer=void 0;var r=s(n(8)),o=s(n(10)),i=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}t.defaultRowRenderer=function(e,t){var n=e.id,s=e.name,a=e.loadOnDemand,l=void 0!==a&&a,c=e.children,u=e.state,p=t.droppable,f=u.depth,d=u.open,h=u.path,m=u.total,v=u.selected,g=void 0!==v&&v,y=u.filtered,b=Object.keys(c).length,w=e.hasChildren();if(!1===y)return"";var _="";!w&&l&&(_="►"),w&&d&&(_="▼"),w&&!d&&(_="►");var E=(0,i.default)("a",{class:!w&&l?(0,r.default)(t.togglerClass,"infinite-tree-closed"):w&&d?(0,r.default)(t.togglerClass):w&&!d?(0,r.default)(t.togglerClass,"infinite-tree-closed"):""},_),S=(0,i.default)("span",{class:(0,r.default)("infinite-tree-title")},(0,o.default)(s)),C=(0,i.default)("div",{class:"infinite-tree-node",style:"margin-left: "+18*f+"px"},E+S);return(0,i.default)("div",{"data-id":n,"data-expanded":w&&d,"data-depth":f,"data-path":h,"data-selected":g,"data-children":b,"data-total":m,class:(0,r.default)("infinite-tree-item",{"infinite-tree-selected":g}),droppable:p},C)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";e.exports=n(57)},function(e,t,n){"use strict";var r=n(0),o=n(65),i=n(69),s=n(70),a=n(78),l=n(92),c=n(105),u=n(29),p=n(107),f={default:n(109),zero:n(110),commonmark:n(111)},d=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function m(e){var t=e.trim().toLowerCase();return!d.test(t)||!!h.test(t)}var v=["http:","https:","mailto:"];function g(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||v.indexOf(t.protocol)>=0))try{t.hostname=p.toASCII(t.hostname)}catch(e){}return u.encode(u.format(t))}function y(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||v.indexOf(t.protocol)>=0))try{t.hostname=p.toUnicode(t.hostname)}catch(e){}return u.decode(u.format(t))}function b(e,t){if(!(this instanceof b))return new b(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new a,this.core=new s,this.renderer=new i,this.linkify=new c,this.validateLink=m,this.normalizeLink=g,this.normalizeLinkText=y,this.utils=r,this.helpers=r.assign({},o),this.options={},this.configure(e),t&&this.set(t)}b.prototype.set=function(e){return r.assign(this.options,e),this},b.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=f[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)}),this},b.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter(function(e){return n.indexOf(e)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},b.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter(function(e){return n.indexOf(e)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},b.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},b.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},b.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},b.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},b.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=b},function(e){e.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},function(e,t,n){"use strict";var r={};function o(e,t,n){var i,s,a,l,c,u="";for("string"!=typeof t&&(n=t,t=o.defaultChars),void 0===n&&(n=!0),c=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?o.push(n):o.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)o[e.charCodeAt(t)]=e[t];return o}(t),i=0,s=e.length;i<s;i++)if(a=e.charCodeAt(i),n&&37===a&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3)))u+=e.slice(i,i+3),i+=2;else if(a<128)u+=c[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&i+1<s&&(l=e.charCodeAt(i+1))>=56320&&l<=57343){u+=encodeURIComponent(e[i]+e[i+1]),i++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[i]);return u}o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",e.exports=o},function(e,t,n){"use strict";var r={};function o(e,t){var n;return"string"!=typeof t&&(t=o.defaultChars),n=function(e){var t,n,o=r[e];if(o)return o;for(o=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),o.push(n);for(t=0;t<e.length;t++)o[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return o}(t),e.replace(/(%[a-f0-9]{2})+/gi,function(e){var t,r,o,i,s,a,l,c="";for(t=0,r=e.length;t<r;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?c+=n[o]:192==(224&o)&&t+3<r&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(c+=(l=o<<6&1984|63&i)<128?"��":String.fromCharCode(l),t+=3):224==(240&o)&&t+6<r&&(i=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&s))?(c+=(l=o<<12&61440|i<<6&4032|63&s)<2048||l>=55296&&l<=57343?"���":String.fromCharCode(l),t+=6):240==(248&o)&&t+9<r&&(i=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),a=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&s)&&128==(192&a))?((l=o<<18&1835008|i<<12&258048|s<<6&4032|63&a)<65536||l>1114111?c+="����":(l-=65536,c+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):c+="�";return c})}o.defaultChars=";/?:@&=+$,#",o.componentChars="",e.exports=o},function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(a),c=["%","/","?",";","#"].concat(l),u=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,i,a,l,m=e;if(m=m.trim(),!t&&1===e.split("#").length){var v=s.exec(m);if(v)return this.pathname=v[1],v[2]&&(this.search=v[2]),this}var g=o.exec(m);if(g&&(i=(g=g[0]).toLowerCase(),this.protocol=g,m=m.substr(g.length)),(t||g||m.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===m.substr(0,2))||g&&d[g]||(m=m.substr(2),this.slashes=!0)),!d[g]&&(l||g&&!h[g])){var y,b,w=-1;for(n=0;n<u.length;n++)-1!==(a=m.indexOf(u[n]))&&(-1===w||a<w)&&(w=a);for(-1!==(b=-1===w?m.lastIndexOf("@"):m.lastIndexOf("@",w))&&(y=m.slice(0,b),m=m.slice(b+1),this.auth=y),w=-1,n=0;n<c.length;n++)-1!==(a=m.indexOf(c[n]))&&(-1===w||a<w)&&(w=a);-1===w&&(w=m.length),":"===m[w-1]&&w--;var _=m.slice(0,w);m=m.slice(w),this.parseHost(_),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E){var S=this.hostname.split(/\./);for(n=0,r=S.length;n<r;n++){var C=S[n];if(C&&!C.match(p)){for(var T="",k=0,O=C.length;k<O;k++)C.charCodeAt(k)>127?T+="x":T+=C[k];if(!T.match(p)){var x=S.slice(0,n),I=S.slice(n+1),D=C.match(f);D&&(x.push(D[1]),I.unshift(D[2])),I.length&&(m=I.join(".")+m),this.hostname=x.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var M=m.indexOf("#");-1!==M&&(this.hash=m.substr(M),m=m.slice(0,M));var A=m.indexOf("?");return-1!==A&&(this.search=m.substr(A),m=m.slice(0,A)),m&&(this.pathname=m),h[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},function(e,t,n){"use strict";t.Any=n(30),t.Cc=n(31),t.Cf=n(64),t.P=n(14),t.Z=n(32)},function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},function(e,t,n){"use strict";t.parseLinkLabel=n(66),t.parseLinkDestination=n(67),t.parseLinkTitle=n(68)},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i,s,a=-1,l=e.posMax,c=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(93===(i=e.src.charCodeAt(e.pos))&&0===--r){o=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===i)if(s===e.pos-1)r++;else if(n)return e.pos=c,-1}return o&&(a=e.pos),e.pos=c,a}},function(e,t,n){"use strict";var r=n(0).isSpace,o=n(0).unescapeAll;e.exports=function(e,t,n){var i,s,a=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(i=e.charCodeAt(t))||r(i))return l;if(62===i)return l.pos=t+1,l.str=o(e.slice(a+1,t)),l.ok=!0,l;92===i&&t+1<n?t+=2:t++}return l}for(s=0;t<n&&32!==(i=e.charCodeAt(t))&&!(i<32||127===i);)if(92===i&&t+1<n)t+=2;else{if(40===i&&s++,41===i){if(0===s)break;s--}t++}return a===t?l:0!==s?l:(l.str=o(e.slice(a,t)),l.lines=0,l.pos=t,l.ok=!0,l)}},function(e,t,n){"use strict";var r=n(0).unescapeAll;e.exports=function(e,t,n){var o,i,s=0,a=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=n)return l;if(34!==(i=e.charCodeAt(t))&&39!==i&&40!==i)return l;for(t++,40===i&&(i=41);t<n;){if((o=e.charCodeAt(t))===i)return l.pos=t+1,l.lines=s,l.str=r(e.slice(a+1,t)),l.ok=!0,l;10===o?s++:92===o&&t+1<n&&(t++,10===e.charCodeAt(t)&&s++),t++}return l}},function(e,t,n){"use strict";var r=n(0).assign,o=n(0).unescapeAll,i=n(0).escapeHtml,s={};function a(){this.rules=r({},s)}s.code_inline=function(e,t,n,r,o){var s=e[t];return"<code"+o.renderAttrs(s)+">"+i(e[t].content)+"</code>"},s.code_block=function(e,t,n,r,o){var s=e[t];return"<pre"+o.renderAttrs(s)+"><code>"+i(e[t].content)+"</code></pre>\n"},s.fence=function(e,t,n,r,s){var a,l,c,u,p=e[t],f=p.info?o(p.info).trim():"",d="";return f&&(d=f.split(/\s+/g)[0]),0===(a=n.highlight&&n.highlight(p.content,d)||i(p.content)).indexOf("<pre")?a+"\n":f?(l=p.attrIndex("class"),c=p.attrs?p.attrs.slice():[],l<0?c.push(["class",n.langPrefix+d]):c[l][1]+=" "+n.langPrefix+d,u={attrs:c},"<pre><code"+s.renderAttrs(u)+">"+a+"</code></pre>\n"):"<pre><code"+s.renderAttrs(p)+">"+a+"</code></pre>\n"},s.image=function(e,t,n,r,o){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,n,r),o.renderToken(e,t,n)},s.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},s.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},s.text=function(e,t){return i(e[t].content)},s.html_block=function(e,t){return e[t].content},s.html_inline=function(e,t){return e[t].content},a.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+i(e.attrs[t][0])+'="'+i(e.attrs[t][1])+'"';return r},a.prototype.renderToken=function(e,t,n){var r,o="",i=!1,s=e[t];return s.hidden?"":(s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===s.nesting?"</":"<")+s.tag,o+=this.renderAttrs(s),0===s.nesting&&n.xhtmlOut&&(o+=" /"),s.block&&(i=!0,1===s.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden?i=!1:-1===r.nesting&&r.tag===s.tag&&(i=!1))),o+=i?">\n":">")},a.prototype.renderInline=function(e,t,n){for(var r,o="",i=this.rules,s=0,a=e.length;s<a;s++)void 0!==i[r=e[s].type]?o+=i[r](e,s,t,n,this):o+=this.renderToken(e,s,t);return o},a.prototype.renderInlineAsText=function(e,t,n){for(var r="",o=0,i=e.length;o<i;o++)"text"===e[o].type?r+=e[o].content:"image"===e[o].type&&(r+=this.renderInlineAsText(e[o].children,t,n));return r},a.prototype.render=function(e,t,n){var r,o,i,s="",a=this.rules;for(r=0,o=e.length;r<o;r++)"inline"===(i=e[r].type)?s+=this.renderInline(e[r].children,t,n):void 0!==a[i]?s+=a[e[r].type](e,r,t,n,this):s+=this.renderToken(e,r,t,n);return s},e.exports=a},function(e,t,n){"use strict";var r=n(15),o=[["normalize",n(71)],["block",n(72)],["inline",n(73)],["linkify",n(74)],["replacements",n(75)],["smartquotes",n(76)]];function i(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1])}i.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},i.prototype.State=n(77),e.exports=i},function(e,t,n){"use strict";var r=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,o=/\u0000/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(o,"�"),e.src=t}},function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,o=e.tokens;for(n=0,r=o.length;n<r;n++)"inline"===(t=o[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},function(e,t,n){"use strict";var r=n(0).arrayReplaceAt;function o(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,i,s,a,l,c,u,p,f,d,h,m,v,g,y,b,w,_=e.tokens;if(e.md.options.linkify)for(n=0,i=_.length;n<i;n++)if("inline"===_[n].type&&e.md.linkify.pretest(_[n].content))for(m=0,t=(s=_[n].children).length-1;t>=0;t--)if("link_close"!==(l=s[t]).type){if("html_inline"===l.type&&(w=l.content,/^<a[>\s]/i.test(w)&&m>0&&m--,o(l.content)&&m++),!(m>0)&&"text"===l.type&&e.md.linkify.test(l.content)){for(p=l.content,b=e.md.linkify.match(p),c=[],h=l.level,d=0,u=0;u<b.length;u++)v=b[u].url,g=e.md.normalizeLink(v),e.md.validateLink(g)&&(y=b[u].text,y=b[u].schema?"mailto:"!==b[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(f=b[u].index)>d&&((a=new e.Token("text","",0)).content=p.slice(d,f),a.level=h,c.push(a)),(a=new e.Token("link_open","a",1)).attrs=[["href",g]],a.level=h++,a.markup="linkify",a.info="auto",c.push(a),(a=new e.Token("text","",0)).content=y,a.level=h,c.push(a),(a=new e.Token("link_close","a",-1)).level=--h,a.markup="linkify",a.info="auto",c.push(a),d=b[u].lastIndex);d<p.length&&((a=new e.Token("text","",0)).content=p.slice(d),a.level=h,c.push(a)),_[n].children=s=r(s,t,c)}}else for(t--;s[t].level!==l.level&&"link_open"!==s[t].type;)t--}},function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,s={c:"©",r:"®",p:"§",tm:"™"};function a(e,t){return s[t.toLowerCase()]}function l(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(i,a)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function c(e){var t,n,o=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||o||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(o.test(e.tokens[t].content)&&l(e.tokens[t].children),r.test(e.tokens[t].content)&&c(e.tokens[t].children))}},function(e,t,n){"use strict";var r=n(0).isWhiteSpace,o=n(0).isPunctChar,i=n(0).isMdAsciiPunct,s=/['"]/,a=/['"]/g,l="’";function c(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function u(e,t){var n,s,u,p,f,d,h,m,v,g,y,b,w,_,E,S,C,T,k,O,x;for(k=[],n=0;n<e.length;n++){for(s=e[n],h=e[n].level,C=k.length-1;C>=0&&!(k[C].level<=h);C--);if(k.length=C+1,"text"===s.type){f=0,d=(u=s.content).length;e:for(;f<d&&(a.lastIndex=f,p=a.exec(u));){if(E=S=!0,f=p.index+1,T="'"===p[0],v=32,p.index-1>=0)v=u.charCodeAt(p.index-1);else for(C=n-1;C>=0&&("softbreak"!==e[C].type&&"hardbreak"!==e[C].type);C--)if("text"===e[C].type){v=e[C].content.charCodeAt(e[C].content.length-1);break}if(g=32,f<d)g=u.charCodeAt(f);else for(C=n+1;C<e.length&&("softbreak"!==e[C].type&&"hardbreak"!==e[C].type);C++)if("text"===e[C].type){g=e[C].content.charCodeAt(0);break}if(y=i(v)||o(String.fromCharCode(v)),b=i(g)||o(String.fromCharCode(g)),w=r(v),(_=r(g))?E=!1:b&&(w||y||(E=!1)),w?S=!1:y&&(_||b||(S=!1)),34===g&&'"'===p[0]&&v>=48&&v<=57&&(S=E=!1),E&&S&&(E=!1,S=b),E||S){if(S)for(C=k.length-1;C>=0&&(m=k[C],!(k[C].level<h));C--)if(m.single===T&&k[C].level===h){m=k[C],T?(O=t.md.options.quotes[2],x=t.md.options.quotes[3]):(O=t.md.options.quotes[0],x=t.md.options.quotes[1]),s.content=c(s.content,p.index,x),e[m.token].content=c(e[m.token].content,m.pos,O),f+=x.length-1,m.token===n&&(f+=O.length-1),d=(u=s.content).length,k.length=C;continue e}E?k.push({token:n,pos:p.index,single:T,level:h}):S&&T&&(s.content=c(s.content,p.index,l))}else T&&(s.content=c(s.content,p.index,l))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&s.test(e.tokens[t].content)&&u(e.tokens[t].children,e)}},function(e,t,n){"use strict";var r=n(16);function o(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}o.prototype.Token=r,e.exports=o},function(e,t,n){"use strict";var r=n(15),o=[["table",n(79),["paragraph","reference"]],["code",n(80)],["fence",n(81),["paragraph","reference","blockquote","list"]],["blockquote",n(82),["paragraph","reference","blockquote","list"]],["hr",n(83),["paragraph","reference","blockquote","list"]],["list",n(84),["paragraph","reference","blockquote"]],["reference",n(85)],["heading",n(86),["paragraph","reference","blockquote"]],["lheading",n(87)],["html_block",n(88),["paragraph","reference","blockquote"]],["paragraph",n(90)]];function i(){this.ruler=new r;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1],{alt:(o[e][2]||[]).slice()})}i.prototype.tokenize=function(e,t,n){for(var r,o=this.ruler.getRules(""),i=o.length,s=t,a=!1,l=e.md.options.maxNesting;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n))&&!(e.sCount[s]<e.blkIndent);){if(e.level>=l){e.line=n;break}for(r=0;r<i&&!o[r](e,s,n,!1);r++);e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),(s=e.line)<n&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}},i.prototype.parse=function(e,t,n,r){var o;e&&(o=new this.State(e,t,n,r),this.tokenize(o,o.line,o.lineMax))},i.prototype.State=n(91),e.exports=i},function(e,t,n){"use strict";var r=n(0).isSpace;function o(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function i(e){var t,n=[],r=0,o=e.length,i=0,s=0,a=!1,l=0;for(t=e.charCodeAt(r);r<o;)96===t?a?(a=!1,l=r):i%2==0&&(a=!0,l=r):124!==t||i%2!=0||a||(n.push(e.substring(s,r)),s=r+1),92===t?i++:i=0,++r===o&&a&&(a=!1,r=l+1),t=e.charCodeAt(r);return n.push(e.substring(s)),n}e.exports=function(e,t,n,s){var a,l,c,u,p,f,d,h,m,v,g,y;if(t+2>n)return!1;if(p=t+1,e.sCount[p]<e.blkIndent)return!1;if(e.sCount[p]-e.blkIndent>=4)return!1;if((c=e.bMarks[p]+e.tShift[p])>=e.eMarks[p])return!1;if(124!==(a=e.src.charCodeAt(c++))&&45!==a&&58!==a)return!1;for(;c<e.eMarks[p];){if(124!==(a=e.src.charCodeAt(c))&&45!==a&&58!==a&&!r(a))return!1;c++}for(f=(l=o(e,t+1)).split("|"),m=[],u=0;u<f.length;u++){if(!(v=f[u].trim())){if(0===u||u===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?m.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(l=o(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((d=(f=i(l.replace(/^\||\|$/g,""))).length)>m.length)return!1;if(s)return!0;for((h=e.push("table_open","table",1)).map=g=[t,0],(h=e.push("thead_open","thead",1)).map=[t,t+1],(h=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<f.length;u++)(h=e.push("th_open","th",1)).map=[t,t+1],m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),(h=e.push("tbody_open","tbody",1)).map=y=[t+2,0],p=t+2;p<n&&!(e.sCount[p]<e.blkIndent)&&-1!==(l=o(e,p).trim()).indexOf("|")&&!(e.sCount[p]-e.blkIndent>=4);p++){for(f=i(l.replace(/^\||\|$/g,"")),h=e.push("tr_open","tr",1),u=0;u<d;u++)h=e.push("td_open","td",1),m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u]?f[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),g[1]=y[1]=p,e.line=p,!0}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;o=++r}return e.line=o,(i=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!0),i.map=[t,e.line],!0}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o,i,s,a,l,c,u,p=!1,f=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(f+3>d)return!1;if(126!==(o=e.src.charCodeAt(f))&&96!==o)return!1;if(l=f,(i=(f=e.skipChars(f,o))-l)<3)return!1;if(u=e.src.slice(l,f),(s=e.src.slice(f,d)).indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;for(a=t;!(++a>=n)&&!((f=l=e.bMarks[a]+e.tShift[a])<(d=e.eMarks[a])&&e.sCount[a]<e.blkIndent);)if(e.src.charCodeAt(f)===o&&!(e.sCount[a]-e.blkIndent>=4||(f=e.skipChars(f,o))-l<i||(f=e.skipSpaces(f))<d)){p=!0;break}return i=e.sCount[t],e.line=a+(p?1:0),(c=e.push("fence","code",0)).info=s,c.content=e.getLines(t+1,a,i,!0),c.markup=u,c.map=[t,e.line],!0}},function(e,t,n){"use strict";var r=n(0).isSpace;e.exports=function(e,t,n,o){var i,s,a,l,c,u,p,f,d,h,m,v,g,y,b,w,_,E,S,C,T=e.lineMax,k=e.bMarks[t]+e.tShift[t],O=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(k++))return!1;if(o)return!0;for(l=d=e.sCount[t]+k-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(k)?(k++,l++,d++,i=!1,w=!0):9===e.src.charCodeAt(k)?(w=!0,(e.bsCount[t]+d)%4==3?(k++,l++,d++,i=!1):i=!0):w=!1,h=[e.bMarks[t]],e.bMarks[t]=k;k<O&&(s=e.src.charCodeAt(k),r(s));)9===s?d+=4-(d+e.bsCount[t]+(i?1:0))%4:d++,k++;for(m=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(w?1:0),u=k>=O,y=[e.sCount[t]],e.sCount[t]=d-l,b=[e.tShift[t]],e.tShift[t]=k-e.bMarks[t],E=e.md.block.ruler.getRules("blockquote"),g=e.parentType,e.parentType="blockquote",C=!1,f=t+1;f<n&&(e.sCount[f]<e.blkIndent&&(C=!0),!((k=e.bMarks[f]+e.tShift[f])>=(O=e.eMarks[f])));f++)if(62!==e.src.charCodeAt(k++)||C){if(u)break;for(_=!1,a=0,c=E.length;a<c;a++)if(E[a](e,f,n,!0)){_=!0;break}if(_){e.lineMax=f,0!==e.blkIndent&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(l=d=e.sCount[f]+k-(e.bMarks[f]+e.tShift[f]),32===e.src.charCodeAt(k)?(k++,l++,d++,i=!1,w=!0):9===e.src.charCodeAt(k)?(w=!0,(e.bsCount[f]+d)%4==3?(k++,l++,d++,i=!1):i=!0):w=!1,h.push(e.bMarks[f]),e.bMarks[f]=k;k<O&&(s=e.src.charCodeAt(k),r(s));)9===s?d+=4-(d+e.bsCount[f]+(i?1:0))%4:d++,k++;u=k>=O,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(w?1:0),y.push(e.sCount[f]),e.sCount[f]=d-l,b.push(e.tShift[f]),e.tShift[f]=k-e.bMarks[f]}for(v=e.blkIndent,e.blkIndent=0,(S=e.push("blockquote_open","blockquote",1)).markup=">",S.map=p=[t,0],e.md.block.tokenize(e,t,f),(S=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=T,e.parentType=g,p[1]=e.line,a=0;a<b.length;a++)e.bMarks[a+t]=h[a],e.tShift[a+t]=b[a],e.sCount[a+t]=y[a],e.bsCount[a+t]=m[a];return e.blkIndent=v,!0}},function(e,t,n){"use strict";var r=n(0).isSpace;e.exports=function(e,t,n,o){var i,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(i=e.src.charCodeAt(c++))&&45!==i&&95!==i)return!1;for(s=1;c<u;){if((a=e.src.charCodeAt(c++))!==i&&!r(a))return!1;a===i&&s++}return!(s<3)&&(!!o||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(i)),!0))}},function(e,t,n){"use strict";var r=n(0).isSpace;function o(e,t){var n,o,i,s;return o=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],42!==(n=e.src.charCodeAt(o++))&&45!==n&&43!==n?-1:o<i&&(s=e.src.charCodeAt(o),!r(s))?-1:o}function i(e,t){var n,o=e.bMarks[t]+e.tShift[t],i=o,s=e.eMarks[t];if(i+1>=s)return-1;if((n=e.src.charCodeAt(i++))<48||n>57)return-1;for(;;){if(i>=s)return-1;if(!((n=e.src.charCodeAt(i++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-o>=10)return-1}return i<s&&(n=e.src.charCodeAt(i),!r(n))?-1:i}e.exports=function(e,t,n,r){var s,a,l,c,u,p,f,d,h,m,v,g,y,b,w,_,E,S,C,T,k,O,x,I,D,M,A,R,N=!1,L=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(r&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(N=!0),(x=i(e,t))>=0){if(f=!0,D=e.bMarks[t]+e.tShift[t],y=Number(e.src.substr(D,x-D-1)),N&&1!==y)return!1}else{if(!((x=o(e,t))>=0))return!1;f=!1}if(N&&e.skipSpaces(x)>=e.eMarks[t])return!1;if(g=e.src.charCodeAt(x-1),r)return!0;for(v=e.tokens.length,f?(R=e.push("ordered_list_open","ol",1),1!==y&&(R.attrs=[["start",y]])):R=e.push("bullet_list_open","ul",1),R.map=m=[t,0],R.markup=String.fromCharCode(g),w=t,I=!1,A=e.md.block.ruler.getRules("list"),C=e.parentType,e.parentType="list";w<n;){for(O=x,b=e.eMarks[w],p=_=e.sCount[w]+x-(e.bMarks[t]+e.tShift[t]);O<b;){if(9===(s=e.src.charCodeAt(O)))_+=4-(_+e.bsCount[w])%4;else{if(32!==s)break;_++}O++}if((u=(a=O)>=b?1:_-p)>4&&(u=1),c=p+u,(R=e.push("list_item_open","li",1)).markup=String.fromCharCode(g),R.map=d=[t,0],E=e.blkIndent,k=e.tight,T=e.tShift[t],S=e.sCount[t],e.blkIndent=c,e.tight=!0,e.tShift[t]=a-e.bMarks[t],e.sCount[t]=_,a>=b&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!I||(L=!1),I=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=E,e.tShift[t]=T,e.sCount[t]=S,e.tight=k,(R=e.push("list_item_close","li",-1)).markup=String.fromCharCode(g),w=t=e.line,d[1]=w,a=e.bMarks[t],w>=n)break;if(e.sCount[w]<e.blkIndent)break;for(M=!1,l=0,h=A.length;l<h;l++)if(A[l](e,w,n,!0)){M=!0;break}if(M)break;if(f){if((x=i(e,w))<0)break}else if((x=o(e,w))<0)break;if(g!==e.src.charCodeAt(x-1))break}return(R=f?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(g),m[1]=w,e.line=w,e.parentType=C,L&&function(e,t){var n,r,o=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===o&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,v),!0}},function(e,t,n){"use strict";var r=n(0).normalizeReference,o=n(0).isSpace;e.exports=function(e,t,n,i){var s,a,l,c,u,p,f,d,h,m,v,g,y,b,w,_,E=0,S=e.bMarks[t]+e.tShift[t],C=e.eMarks[t],T=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(S))return!1;for(;++S<C;)if(93===e.src.charCodeAt(S)&&92!==e.src.charCodeAt(S-1)){if(S+1===C)return!1;if(58!==e.src.charCodeAt(S+1))return!1;break}for(c=e.lineMax,w=e.md.block.ruler.getRules("reference"),m=e.parentType,e.parentType="reference";T<c&&!e.isEmpty(T);T++)if(!(e.sCount[T]-e.blkIndent>3||e.sCount[T]<0)){for(b=!1,p=0,f=w.length;p<f;p++)if(w[p](e,T,c,!0)){b=!0;break}if(b)break}for(C=(y=e.getLines(t,T,e.blkIndent,!1).trim()).length,S=1;S<C;S++){if(91===(s=y.charCodeAt(S)))return!1;if(93===s){h=S;break}10===s?E++:92===s&&++S<C&&10===y.charCodeAt(S)&&E++}if(h<0||58!==y.charCodeAt(h+1))return!1;for(S=h+2;S<C;S++)if(10===(s=y.charCodeAt(S)))E++;else if(!o(s))break;if(!(v=e.md.helpers.parseLinkDestination(y,S,C)).ok)return!1;if(u=e.md.normalizeLink(v.str),!e.md.validateLink(u))return!1;for(a=S=v.pos,l=E+=v.lines,g=S;S<C;S++)if(10===(s=y.charCodeAt(S)))E++;else if(!o(s))break;for(v=e.md.helpers.parseLinkTitle(y,S,C),S<C&&g!==S&&v.ok?(_=v.str,S=v.pos,E+=v.lines):(_="",S=a,E=l);S<C&&(s=y.charCodeAt(S),o(s));)S++;if(S<C&&10!==y.charCodeAt(S)&&_)for(_="",S=a,E=l;S<C&&(s=y.charCodeAt(S),o(s));)S++;return!(S<C&&10!==y.charCodeAt(S))&&(!!(d=r(y.slice(1,h)))&&(!!i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[d]&&(e.env.references[d]={title:_,href:u}),e.parentType=m,e.line=t+E+1,!0)))}},function(e,t,n){"use strict";var r=n(0).isSpace;e.exports=function(e,t,n,o){var i,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(i=e.src.charCodeAt(c))||c>=u)return!1;for(s=1,i=e.src.charCodeAt(++c);35===i&&c<u&&s<=6;)s++,i=e.src.charCodeAt(++c);return!(s>6||c<u&&!r(i))&&(!!o||(u=e.skipSpacesBack(u,c),(a=e.skipCharsBack(u,35,c))>c&&r(e.src.charCodeAt(a-1))&&(u=a),e.line=t+1,(l=e.push("heading_open","h"+String(s),1)).markup="########".slice(0,s),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(c,u).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(s),-1)).markup="########".slice(0,s),!0))}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,i,s,a,l,c,u,p,f,d=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(f=e.parentType,e.parentType="paragraph";d<n&&!e.isEmpty(d);d++)if(!(e.sCount[d]-e.blkIndent>3)){if(e.sCount[d]>=e.blkIndent&&(l=e.bMarks[d]+e.tShift[d])<(c=e.eMarks[d])&&(45===(p=e.src.charCodeAt(l))||61===p)&&(l=e.skipChars(l,p),(l=e.skipSpaces(l))>=c)){u=61===p?1:2;break}if(!(e.sCount[d]<0)){for(o=!1,i=0,s=h.length;i<s;i++)if(h[i](e,d,n,!0)){o=!0;break}if(o)break}}return!!u&&(r=e.getLines(t,d,e.blkIndent,!1).trim(),e.line=d+1,(a=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(p),a.map=[t,e.line],(a=e.push("inline","",0)).content=r,a.map=[t,e.line-1],a.children=[],(a=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(p),e.parentType=f,!0)}},function(e,t,n){"use strict";var r=n(89),o=n(33).HTML_OPEN_CLOSE_TAG_RE,i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var o,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(l=e.src.slice(c,u),o=0;o<i.length&&!i[o][0].test(l);o++);if(o===i.length)return!1;if(r)return i[o][2];if(s=t+1,!i[o][1].test(l))for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(c=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],l=e.src.slice(c,u),i[o][1].test(l)){0!==l.length&&s++;break}return e.line=s,(a=e.push("html_block","",0)).map=[t,s],a.content=e.getLines(t,s,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,i,s,a,l=t+1,c=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(a=e.parentType,e.parentType="paragraph";l<u&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3||e.sCount[l]<0)){for(r=!1,o=0,i=c.length;o<i;o++)if(c[o](e,l,u,!0)){r=!0;break}if(r)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,(s=e.push("paragraph_open","p",1)).map=[t,e.line],(s=e.push("inline","",0)).content=n,s.map=[t,e.line],s.children=[],s=e.push("paragraph_close","p",-1),e.parentType=a,!0}},function(e,t,n){"use strict";var r=n(16),o=n(0).isSpace;function i(e,t,n,r){var i,s,a,l,c,u,p,f;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=!1,a=l=u=p=0,c=(s=this.src).length;l<c;l++){if(i=s.charCodeAt(l),!f){if(o(i)){u++,9===i?p+=4-p%4:p++;continue}f=!0}10!==i&&l!==c-1||(10!==i&&l++,this.bMarks.push(a),this.eMarks.push(l),this.tShift.push(u),this.sCount.push(p),this.bsCount.push(0),f=!1,u=0,p=0,a=l+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(e,t,n){var o=new r(e,t,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o},i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),o(t));e++);return e},i.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!o(this.src.charCodeAt(--e)))return e+1;return e},i.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,n,r){var i,s,a,l,c,u,p,f=e;if(e>=t)return"";for(u=new Array(t-e),i=0;f<t;f++,i++){for(s=0,p=l=this.bMarks[f],c=f+1<t||r?this.eMarks[f]+1:this.eMarks[f];l<c&&s<n;){if(a=this.src.charCodeAt(l),o(a))9===a?s+=4-(s+this.bsCount[f])%4:s++;else{if(!(l-p<this.tShift[f]))break;s++}l++}u[i]=s>n?new Array(s-n+1).join(" ")+this.src.slice(l,c):this.src.slice(l,c)}return u.join("")},i.prototype.Token=r,e.exports=i},function(e,t,n){"use strict";var r=n(15),o=[["text",n(93)],["newline",n(94)],["escape",n(95)],["backticks",n(96)],["strikethrough",n(34).tokenize],["emphasis",n(35).tokenize],["link",n(97)],["image",n(98)],["autolink",n(99)],["html_inline",n(100)],["entity",n(101)]],i=[["balance_pairs",n(102)],["strikethrough",n(34).postProcess],["emphasis",n(35).postProcess],["text_collapse",n(103)]];function s(){var e;for(this.ruler=new r,e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1]);for(this.ruler2=new r,e=0;e<i.length;e++)this.ruler2.push(i[e][0],i[e][1])}s.prototype.skipToken=function(e){var t,n,r=e.pos,o=this.ruler.getRules(""),i=o.length,s=e.md.options.maxNesting,a=e.cache;if(void 0===a[r]){if(e.level<s)for(n=0;n<i&&(e.level++,t=o[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,a[r]=e.pos}else e.pos=a[r]},s.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),o=r.length,i=e.posMax,s=e.md.options.maxNesting;e.pos<i;){if(e.level<s)for(n=0;n<o&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},s.prototype.parse=function(e,t,n,r){var o,i,s,a=new this.State(e,t,n,r);for(this.tokenize(a),s=(i=this.ruler2.getRules("")).length,o=0;o<s;o++)i[o](a)},s.prototype.State=n(104),e.exports=s},function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},function(e,t,n){"use strict";var r=n(0).isSpace;e.exports=function(e,t){var n,o,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;for(n=e.pending.length-1,o=e.posMax,t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;i<o&&r(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},function(e,t,n){"use strict";for(var r=n(0).isSpace,o=[],i=0;i<256;i++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){o[e.charCodeAt(0)]=1}),e.exports=function(e,t){var n,i=e.pos,s=e.posMax;if(92!==e.src.charCodeAt(i))return!1;if(++i<s){if((n=e.src.charCodeAt(i))<256&&0!==o[n])return t||(e.pending+=e.src[i]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),i++;i<s&&(n=e.src.charCodeAt(i),r(n));)i++;return e.pos=i,!0}}return t||(e.pending+="\\"),e.pos++,!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,i,s,a,l=e.pos;if(96!==e.src.charCodeAt(l))return!1;for(n=l,l++,r=e.posMax;l<r&&96===e.src.charCodeAt(l);)l++;for(o=e.src.slice(n,l),i=s=l;-1!==(i=e.src.indexOf("`",s));){for(s=i+1;s<r&&96===e.src.charCodeAt(s);)s++;if(s-i===o.length)return t||((a=e.push("code_inline","code",0)).markup=o,a.content=e.src.slice(l,i).replace(/[ \n]+/g," ").trim()),e.pos=s,!0}return t||(e.pending+=o),e.pos+=o.length,!0}},function(e,t,n){"use strict";var r=n(0).normalizeReference,o=n(0).isSpace;e.exports=function(e,t){var n,i,s,a,l,c,u,p,f,d="",h=e.pos,m=e.posMax,v=e.pos,g=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(l=e.pos+1,(a=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((c=a+1)<m&&40===e.src.charCodeAt(c)){for(g=!1,c++;c<m&&(i=e.src.charCodeAt(c),o(i)||10===i);c++);if(c>=m)return!1;for(v=c,(u=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok&&(d=e.md.normalizeLink(u.str),e.md.validateLink(d)?c=u.pos:d=""),v=c;c<m&&(i=e.src.charCodeAt(c),o(i)||10===i);c++);if(u=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&v!==c&&u.ok)for(f=u.str,c=u.pos;c<m&&(i=e.src.charCodeAt(c),o(i)||10===i);c++);else f="";(c>=m||41!==e.src.charCodeAt(c))&&(g=!0),c++}if(g){if(void 0===e.env.references)return!1;if(c<m&&91===e.src.charCodeAt(c)?(v=c+1,(c=e.md.helpers.parseLinkLabel(e,c))>=0?s=e.src.slice(v,c++):c=a+1):c=a+1,s||(s=e.src.slice(l,a)),!(p=e.env.references[r(s)]))return e.pos=h,!1;d=p.href,f=p.title}return t||(e.pos=l,e.posMax=a,e.push("link_open","a",1).attrs=n=[["href",d]],f&&n.push(["title",f]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}},function(e,t,n){"use strict";var r=n(0).normalizeReference,o=n(0).isSpace;e.exports=function(e,t){var n,i,s,a,l,c,u,p,f,d,h,m,v,g="",y=e.pos,b=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(c=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((u=l+1)<b&&40===e.src.charCodeAt(u)){for(u++;u<b&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);if(u>=b)return!1;for(v=u,(f=e.md.helpers.parseLinkDestination(e.src,u,e.posMax)).ok&&(g=e.md.normalizeLink(f.str),e.md.validateLink(g)?u=f.pos:g=""),v=u;u<b&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);if(f=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<b&&v!==u&&f.ok)for(d=f.str,u=f.pos;u<b&&(i=e.src.charCodeAt(u),o(i)||10===i);u++);else d="";if(u>=b||41!==e.src.charCodeAt(u))return e.pos=y,!1;u++}else{if(void 0===e.env.references)return!1;if(u<b&&91===e.src.charCodeAt(u)?(v=u+1,(u=e.md.helpers.parseLinkLabel(e,u))>=0?a=e.src.slice(v,u++):u=l+1):u=l+1,a||(a=e.src.slice(c,l)),!(p=e.env.references[r(a)]))return e.pos=y,!1;g=p.href,d=p.title}return t||(s=e.src.slice(c,l),e.md.inline.parse(s,e.md,e.env,m=[]),(h=e.push("image","img",0)).attrs=n=[["src",g],["alt",""]],h.children=m,h.content=s,d&&n.push(["title",d])),e.pos=u,e.posMax=b,!0}},function(e,t,n){"use strict";var r=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,o=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;e.exports=function(e,t){var n,i,s,a,l,c,u=e.pos;return 60===e.src.charCodeAt(u)&&(!((n=e.src.slice(u)).indexOf(">")<0)&&(o.test(n)?(a=(i=n.match(o))[0].slice(1,-1),l=e.md.normalizeLink(a),!!e.md.validateLink(l)&&(t||((c=e.push("link_open","a",1)).attrs=[["href",l]],c.markup="autolink",c.info="auto",(c=e.push("text","",0)).content=e.md.normalizeLinkText(a),(c=e.push("link_close","a",-1)).markup="autolink",c.info="auto"),e.pos+=i[0].length,!0)):!!r.test(n)&&(a=(s=n.match(r))[0].slice(1,-1),l=e.md.normalizeLink("mailto:"+a),!!e.md.validateLink(l)&&(t||((c=e.push("link_open","a",1)).attrs=[["href",l]],c.markup="autolink",c.info="auto",(c=e.push("text","",0)).content=e.md.normalizeLinkText(a),(c=e.push("link_close","a",-1)).markup="autolink",c.info="auto"),e.pos+=s[0].length,!0))))}},function(e,t,n){"use strict";var r=n(33).HTML_TAG_RE;e.exports=function(e,t){var n,o,i,s=e.pos;return!!e.md.options.html&&(i=e.posMax,!(60!==e.src.charCodeAt(s)||s+2>=i)&&(!(33!==(n=e.src.charCodeAt(s+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(o=e.src.slice(s).match(r))&&(t||(e.push("html_inline","",0).content=e.src.slice(s,s+o[0].length)),e.pos+=o[0].length,!0))))}},function(e,t,n){"use strict";var r=n(28),o=n(0).has,i=n(0).isValidEntityCode,s=n(0).fromCodePoint,a=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,c,u=e.pos,p=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1<p)if(35===e.src.charCodeAt(u+1)){if(c=e.src.slice(u).match(a))return t||(n="x"===c[1][0].toLowerCase()?parseInt(c[1].slice(1),16):parseInt(c[1],10),e.pending+=i(n)?s(n):s(65533)),e.pos+=c[0].length,!0}else if((c=e.src.slice(u).match(l))&&o(r,c[1]))return t||(e.pending+=r[c[1]]),e.pos+=c[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,o,i=e.delimiters,s=e.delimiters.length;for(t=0;t<s;t++)if((r=i[t]).close)for(n=t-r.jump-1;n>=0;){if((o=i[n]).open&&o.marker===r.marker&&o.end<0&&o.level===r.level)if(!((o.close||r.open)&&void 0!==o.length&&void 0!==r.length&&(o.length+r.length)%3==0)){r.jump=t-n,r.open=!1,o.end=t,o.jump=0;break}n-=o.jump+1}}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,o=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)r+=o[t].nesting,o[t].level=r,"text"===o[t].type&&t+1<i&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}},function(e,t,n){"use strict";var r=n(16),o=n(0).isWhiteSpace,i=n(0).isPunctChar,s=n(0).isMdAsciiPunct;function a(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}a.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},a.prototype.push=function(e,t,n){this.pending&&this.pushPending();var o=new r(e,t,n);return n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(o),o},a.prototype.scanDelims=function(e,t){var n,r,a,l,c,u,p,f,d,h=e,m=!0,v=!0,g=this.posMax,y=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;h<g&&this.src.charCodeAt(h)===y;)h++;return a=h-e,r=h<g?this.src.charCodeAt(h):32,p=s(n)||i(String.fromCharCode(n)),d=s(r)||i(String.fromCharCode(r)),u=o(n),(f=o(r))?m=!1:d&&(u||p||(m=!1)),u?v=!1:p&&(f||d||(v=!1)),t?(l=m,c=v):(l=m&&(!v||p),c=v&&(!m||d)),{can_open:l,can_close:c,length:a}},a.prototype.Token=r,e.exports=a},function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function o(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===o(e)}function s(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var a={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]?0:t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},c="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",u="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function p(e){var t=e.re=n(106)(e.__opts__),r=e.__tlds__.slice();function a(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push(c),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(a(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(a(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(a(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(a(t.tpl_host_fuzzy_test),"i");var l=[];function u(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var n=e.__schemas__[t];if(null!==n){var r,s={validate:null,link:null};if(e.__compiled__[t]=s,"[object Object]"===o(n))return!function(e){return"[object RegExp]"===o(e)}(n.validate)?i(n.validate)?s.validate=n.validate:u(t,n):s.validate=(r=n.validate,function(e,t){var n=e.slice(t);return r.test(n)?n.match(r)[0].length:0}),void(i(n.normalize)?s.normalize=n.normalize:n.normalize?u(t,n):s.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===o(e)}(n)?u(t,n):l.push(t)}}),l.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var p=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(s).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+p+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+p+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function f(e,t){var n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function d(e,t){var n=new f(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function h(e,t){if(!(this instanceof h))return new h(e,t);var n;t||(n=e,Object.keys(n||{}).reduce(function(e,t){return e||a.hasOwnProperty(t)},!1)&&(t=e,e={})),this.__opts__=r({},a,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},l,e),this.__compiled__={},this.__tlds__=u,this.__tlds_replaced__=!1,this.re={},p(this)}h.prototype.add=function(e,t){return this.__schemas__[e]=t,p(this),this},h.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},h.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,o,i,s,a,l;if(this.re.schema_test.test(e))for((a=this.re.schema_search).lastIndex=0;null!==(t=a.exec(e));)if(o=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=s)),this.__index__>=0},h.prototype.pretest=function(e){return this.re.pretest.test(e)},h.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},h.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(d(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(d(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},h.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse(),p(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,p(this),this)},h.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},h.prototype.onCompile=function(){},e.exports=h},function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(30).source,t.src_Cc=n(31).source,t.src_Z=n(32).source,t.src_P=n(14).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|[><｜]|\\(|"+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t,n){(function(e,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,c=36,u=1,p=26,f=38,d=700,h=72,m=128,v="-",g=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-u,E=Math.floor,S=String.fromCharCode;function C(e){throw new RangeError(w[e])}function T(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function k(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+T((e=e.replace(b,".")).split("."),t).join(".")}function O(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function x(e){return T(e,function(e){var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=S(e)}).join("")}function I(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function D(e,t,n){var r=0;for(e=n?E(e/d):e>>1,e+=E(e/t);e>_*p>>1;r+=c)e=E(e/_);return E(r+(_+1)*e/(e+f))}function M(e){var t,n,r,o,i,s,a,f,d,g,y,b=[],w=e.length,_=0,S=m,T=h;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&C("not-basic"),b.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=_,s=1,a=c;o>=w&&C("invalid-input"),((f=(y=e.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||f>E((l-_)/s))&&C("overflow"),_+=f*s,!(f<(d=a<=T?u:a>=T+p?p:a-T));a+=c)s>E(l/(g=c-d))&&C("overflow"),s*=g;T=D(_-i,t=b.length+1,0==i),E(_/t)>l-S&&C("overflow"),S+=E(_/t),_%=t,b.splice(_++,0,S)}return x(b)}function A(e){var t,n,r,o,i,s,a,f,d,g,y,b,w,_,T,k=[];for(b=(e=O(e)).length,t=m,n=0,i=h,s=0;s<b;++s)(y=e[s])<128&&k.push(S(y));for(r=o=k.length,o&&k.push(v);r<b;){for(a=l,s=0;s<b;++s)(y=e[s])>=t&&y<a&&(a=y);for(a-t>E((l-n)/(w=r+1))&&C("overflow"),n+=(a-t)*w,t=a,s=0;s<b;++s)if((y=e[s])<t&&++n>l&&C("overflow"),y==t){for(f=n,d=c;!(f<(g=d<=i?u:d>=i+p?p:d-i));d+=c)T=f-g,_=c-g,k.push(S(I(g+T%_,0))),f=E(T/_);k.push(S(I(f,0))),i=D(n,w,r==o),n=0,++r}++n,++t}return k.join("")}a={version:"1.4.1",ucs2:{decode:O,encode:x},decode:M,encode:A,toASCII:function(e){return k(e,function(e){return y.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return k(e,function(e){return g.test(e)?M(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return a}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(108)(e),n(27))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(7);var i=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}})};i.prototype.destroy=function(){var e=this;this.handlers.forEach(function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)})},i.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},i.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.remove(),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var l=a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=e.left-l.left+"px",this.element.style.top=e.top-l.top+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},i.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.setCursor(null)},e)},i.prototype.dragover=function(e){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=o.dropPoint(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=t.pos),this.setCursor(n),this.scheduleRemoval(5e3)}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)},t.dropCursor=function(e){return void 0===e&&(e={}),new r.Plugin({view:function(t){return new i(t,e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(1),i=n(9),s=n(5),a=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return s.Slice.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new l(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,s=e.depth;;s--){var a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.maybeChild(n>0?e.indexAfter(s):e.index(s)-1);break}if(0==s)return null;o+=n;var l=e.doc.resolve(o);if(t.valid(l))return l}for(;i=n>0?i.firstChild:i.lastChild;){o+=n;var c=e.doc.resolve(o);if(t.valid(c))return c}return null},t}(o.Selection);a.prototype.visible=!1,o.Selection.jsonID("gapcursor",a);var l=function(e){this.pos=e};l.prototype.map=function(e){return new l(e.map(this.pos))},l.prototype.resolve=function(e){var t=e.resolve(this.pos);return a.valid(t)?new a(t):o.Selection.near(t)};var c=r.keydownHandler({ArrowLeft:u("horiz",-1),ArrowRight:u("horiz",1),ArrowUp:u("vert",-1),ArrowDown:u("vert",1)});function u(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){var s=e.selection,l=t>0?s.$to:s.$from,c=s.empty;if(s instanceof o.TextSelection){if(!i.endOfTextblock(n))return!1;c=!1,l=e.doc.resolve(t>0?l.after():l.before())}var u=a.findFrom(l,t,c);return!!u&&(r&&r(e.tr.setSelection(new a(u))),!0)}}function p(e,t,n){var r=e.state.doc.resolve(t);if(!a.valid(r))return!1;var i=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&o.NodeSelection.isSelectable(e.state.doc.nodeAt(i)))&&(e.dispatch(e.state.tr.setSelection(new a(r))),!0)}function f(e){if(!(e.selection instanceof a))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",i.DecorationSet.create(e.doc,[i.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}t.gapCursor=function(){return new o.Plugin({props:{decorations:f,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&a.valid(n))return new a(n)},handleClick:p,handleKeyDown:c}})},t.GapCursor=a},function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){return function(e){if(document.querySelector){var t={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(e,t,n){}};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);for(var r="object"==o(t.selector)?[t.selector]:document.querySelectorAll(t.selector),i=0;i<r.length;i++){var s=r[i];s.sc=document.createElement("div"),s.sc.className="autocomplete-suggestions "+t.menuClass,s.autocompleteAttr=s.getAttribute("autocomplete"),s.setAttribute("autocomplete","off"),s.cache={},s.last_val="",s.updateSC=function(e,n){var r=s.getBoundingClientRect();if(s.sc.style.left=Math.round(r.left+(window.pageXOffset||document.documentElement.scrollLeft)+t.offsetLeft)+"px",s.sc.style.top=Math.round(r.bottom+(window.pageYOffset||document.documentElement.scrollTop)+t.offsetTop)+"px",s.sc.style.width=Math.round(r.right-r.left)+"px",!e&&(s.sc.style.display="block",s.sc.maxHeight||(s.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(s.sc,null):s.sc.currentStyle).maxHeight)),s.sc.suggestionHeight||(s.sc.suggestionHeight=s.sc.querySelector(".autocomplete-suggestion").offsetHeight),s.sc.suggestionHeight))if(n){var o=s.sc.scrollTop,i=n.getBoundingClientRect().top-s.sc.getBoundingClientRect().top;i+s.sc.suggestionHeight-s.sc.maxHeight>0?s.sc.scrollTop=i+s.sc.suggestionHeight+o-s.sc.maxHeight:i<0&&(s.sc.scrollTop=i+o)}else s.sc.scrollTop=0},c(window,"resize",s.updateSC),document.body.appendChild(s.sc),p("autocomplete-suggestion","mouseleave",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},s.sc),p("autocomplete-suggestion","mouseover",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},s.sc),p("autocomplete-suggestion","mousedown",function(e){if(l(this,"autocomplete-suggestion")){var n=this.getAttribute("data-val");s.value=n,t.onSelect(e,n,this),s.sc.style.display="none"}},s.sc),s.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?s!==document.activeElement&&setTimeout(function(){s.focus()},20):(s.last_val=s.value,s.sc.style.display="none",setTimeout(function(){s.sc.style.display="none"},350))},c(s,"blur",s.blurHandler);var a=function(e){var n=s.value;if(s.cache[n]=e,e.length&&n.length>=t.minChars){for(var r="",o=0;o<e.length;o++)r+=t.renderItem(e[o],n);s.sc.innerHTML=r,s.updateSC(0)}else s.sc.style.display="none"};s.keydownHandler=function(e){var n,r=window.event?e.keyCode:e.which;if((40==r||38==r)&&s.sc.innerHTML)return(o=s.sc.querySelector(".autocomplete-suggestion.selected"))?(n=40==r?o.nextSibling:o.previousSibling)?(o.className=o.className.replace("selected",""),n.className+=" selected",s.value=n.getAttribute("data-val")):(o.className=o.className.replace("selected",""),s.value=s.last_val,n=0):((n=40==r?s.sc.querySelector(".autocomplete-suggestion"):s.sc.childNodes[s.sc.childNodes.length-1]).className+=" selected",s.value=n.getAttribute("data-val")),s.updateSC(0,n),!1;if(27==r)s.value=s.last_val,s.sc.style.display="none";else if(13==r||9==r){var o;(o=s.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=s.sc.style.display&&(t.onSelect(e,o.getAttribute("data-val"),o),setTimeout(function(){s.sc.style.display="none"},20))}},c(s,"keydown",s.keydownHandler),s.keyupHandler=function(e){var n=window.event?e.keyCode:e.which;if(!n||(n<35||n>40)&&13!=n&&27!=n){var r=s.value;if(r.length>=t.minChars){if(r!=s.last_val){if(s.last_val=r,clearTimeout(s.timer),t.cache){if(r in s.cache)return void a(s.cache[r]);for(var o=1;o<r.length-t.minChars;o++){var i=r.slice(0,r.length-o);if(i in s.cache&&!s.cache[i].length)return void a([])}}s.timer=setTimeout(function(){t.source(r,a)},t.delay)}}else s.last_val=r,s.sc.style.display="none"}},c(s,"keyup",s.keyupHandler),s.focusHandler=function(e){s.last_val="\n",s.keyupHandler(e)},t.minChars||c(s,"focus",s.focusHandler)}this.destroy=function(){for(var e=0;e<r.length;e++){var t=r[e];u(window,"resize",t.updateSC),u(t,"blur",t.blurHandler),u(t,"focus",t.focusHandler),u(t,"keydown",t.keydownHandler),u(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}function l(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function c(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function u(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function p(e,t,n,r){c(r||document,t,function(t){for(var r,o=t.target||t.srcElement;o&&!(r=l(o,e));)o=o.parentElement;r&&n.call(o,t)})}}}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);t.default=[{title:"Home",link:"/home"},{title:"About Us",link:"/about"},{title:"Team",link:"/team"},{title:"Company History",link:"/history"},{title:"Contact Us",link:"/contact"}]},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}var t,n,o;return t=e,(n=[{key:"read",value:function(e){return e.value}},{key:"validateType",value:function(e){}},{key:"validate",value:function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)}},{key:"clean",value:function(e){return this.options.clean?this.options.clean(e):e}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=l(t).call(this,e))||"object"!==i(o)&&"function"!=typeof o?u(r):o,p(u(u(n)),"updateCallback",null),p(u(u(n)),"fields",[]),n.fields=e.fields,n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o),n=t,(r=[{key:"render",value:function(){var e=document.createElement("fieldset");return e.classList.add("fieldgroup"),e.classList.add("fieldgroup-"+this.options.name),this.renderFields(e,this.updateCallback),e}},{key:"renderFields",value:function(e){var n=this,r=[],o=this.options.name||"";for(var i in this.fields){var s=this.fields[i];s.options.name||(s.options.name=i),s instanceof t&&(s.updateCallback=this.updateCallback);var a=s.render();a.setAttribute("data-label",s.options.label||s.options.name),a.setAttribute("data-name",s.options.name),r.push(a),s.dom=a}var l=1;r.forEach(function(t){var r=o+"-field-"+l;t.id=r;var i=document.createElement("div");i.className=o+"-fieldwrapper fieldgroup-fieldwrapper field-"+t.getAttribute("data-name");var s=document.createElement("label");s.innerHTML=t.getAttribute("data-label"),s.setAttribute("for",r),i.appendChild(s),i.appendChild(t),e.appendChild(i),n.updateCallback&&(t.addEventListener("change",function(e){n.updateCallback(t.name,n.fields[t.name].read(t))}),t.addEventListener("keyup",function(e){n.updateCallback(t.name,n.fields[t.name].read(t))})),l++})}},{key:"getValues",value:function(){var e=Object.create(null);for(var n in this.fields){var r=this.fields[n];if(r instanceof t){e=s({},e,r.getValues())}else{var o=r.dom,i=r.read(o),a=r.validate(i);if(a)return this.reportInvalid(o,a),null;e[n]=r.clean(i)}}return e}},{key:"reportInvalid",value:function(e,t){var n=e.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=e.offsetLeft+e.offsetWidth+2+"px",r.style.top=e.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=t,setTimeout(function(){return n.removeChild(r)},1500)}}])&&a(n.prototype,r),f&&a(n,f),t}(),d="ProseMirror-prompt";function h(e,t){var n,r=document.body.appendChild(document.createElement("div"));r.style.width="65%",r.style.maxHeight="90%",r.style.overflow="auto",r.style.paddingBottom="20px",r.className=d;var o=function(e){r.contains(e.target)||i()};e.forceRemainOpen||setTimeout(function(){return window.addEventListener("mousedown",o)},50);var i=function(){window.removeEventListener("mousedown",o),r.parentNode&&r.parentNode.removeChild(r)},s=document.createElement("button");s.type="submit",s.className=d+"-submit",s.textContent="OK";var a=document.createElement("button");a.type="button",a.className=d+"-cancel",a.textContent="Cancel",a.addEventListener("click",function(){e.cancel&&e.cancel(),i()}),n=r.appendChild(document.createElement("form")),e.title&&(n.appendChild(document.createElement("h5")).textContent=e.title);var l=new f({name:"root",fields:e.fields});e.update&&(l.updateCallback=e.update),l.renderFields(n);var c=n.appendChild(document.createElement("div"));if(c.className=d+"-buttons",e.hideButtons||(c.appendChild(s),c.appendChild(document.createTextNode(" ")),c.appendChild(a)),t)r.style.position="static",r.style.width="100%",r.style.border="none",t.prepend(r);else{var u=r.getBoundingClientRect(),p=(window.innerHeight-u.height)/2-100;p=p<0?0:p,r.style.top=p+"px",r.style.left=(window.innerWidth-u.width)/2+"px"}n.addEventListener("submit",function(t){var n;t.preventDefault(),(n=l.getValues())&&(i(),e.callback(n))}),n.addEventListener("keydown",function(e){27==e.keyCode?(e.preventDefault(),i()):(13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey)&&9==e.keyCode&&window.setTimeout(function(){r.contains(document.activeElement)||i()},500)});var h=n.elements[0];h&&h.focus()}var m=n(5),v=null,g=null,y=document.createElement("div");function b(e){y.innerHTML=e;var t=m.DOMParser.fromSchema(g).parse(y);return y.innerHTML="",t}function w(e){y.appendChild(v.serializeFragment(e.content));var t=y.innerHTML;return y.innerHTML="",t}var _=n(1);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,T(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o),n=t,(r=[{key:"render",value:function(){var e=document.createElement("textarea");return e.name=this.options.name,e.rows=10,e.placeholder=this.options.label,e.value=this.options.value||"",e}}])&&S(n.prototype,r),i&&S(n,i),t}(),x=n(4);var I=function(){return new x.MenuItem({title:"View source",label:"Source",icon:x.icons.code,enable:function(e){return e.selection.empty},run:function(e,t,n){h({title:"View Source",fields:{content:new O({label:"Content",value:w(e.doc)})},callback:function(t){var r=b(t.content);n.dispatch(e.tr.setSelection(new _.AllSelection(e.doc))),n.dispatch(n.state.tr.replaceSelectionWith(r)),n.focus()}})}})},D=n(2),M=n(4),A=n(12),R=n(11),N=n(17);function L(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)}function P(e,t){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1}function F(e,t){var n={label:t.title,run:e};for(var r in t)n[r]=t[r];return t.enable&&!0!==t.enable||t.select||(n[t.enable?"enable":"select"]=function(t){return e(t)}),new M.MenuItem(n)}function q(e,t){var n={active:function(t){return L(t,e)},enable:!0};for(var r in t)n[r]=t[r];return F(Object(A.toggleMark)(e),n)}function z(e,t){return F(Object(R.wrapInList)(e,t.attrs),t)}function B(e,t,n){return new N.InputRule(e,function(e,r,o,i){var s=n instanceof Function?n(r):null,a=e.tr;a=a.setSelection(_.TextSelection.create(a.doc,o,i));var l=r.length>1?r[1]:r[0],c=(a=(a=a.insertText(l+" ")).addMark(o,o+l.length,t.create(s))).doc.resolve(o+l.length+1);return c&&(a=a.setSelection(_.Selection.near(c))),a})}function j(e){if(e)return e.getAttribute("data-prose-url")?e:j(e.parentElement)}var V="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xlink",U="ProseMirror-icon";function H(e){var t=document.createElement("div");if(t.className=U,e.path){var n="pm-icon-"+function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.path).toString(16);document.getElementById(n)||function(e,t){var n=document.getElementById(U+"-collection");n||((n=document.createElementNS(V,"svg")).id=U+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(V,"symbol");r.id=e,r.setAttribute("viewBox","0 0 "+t.width+" "+t.height),r.appendChild(document.createElementNS(V,"path")).setAttribute("d",t.path),n.appendChild(r)}(n,e);var r=t.appendChild(document.createElementNS(V,"svg"));r.style.width=e.width/e.height+"em",r.appendChild(document.createElementNS(V,"use")).setAttributeNS(G,"href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else e.dom?t.appendChild(e.dom.cloneNode(!0)):(t.appendChild(document.createElement("span")).textContent=e.text||"",e.css&&(t.firstChild.style.cssText=e.css));return t}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var K=function(e){function t(){var e,n,r,o,i,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return r=this,n=!(o=(e=Y(t)).call.apply(e,[this].concat(c)))||"object"!==$(o)&&"function"!=typeof o?X(r):o,i=X(X(n)),a="text",(s="textType")in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,o),n=t,(r=[{key:"render",value:function(){var e=document.createElement("input");return e.type=this.textType,e.name=this.options.name?this.options.name:this.options.label,e.placeholder=this.options.placeholder?this.options.placeholder:"...",e.value=this.options.value||"",e.autocomplete=this.options.autocomplete?this.options.autocomplete:"off",e}}])&&W(n.prototype,r),i&&W(n,i),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,o),n=t,(r=[{key:"render",value:function(){var e=this,t=document.createElement("select");return t.name=this.options.name?this.options.name:this.options.label,this.options.options.forEach(function(n){var r=t.appendChild(document.createElement("option"));r.value=n.value,r.selected=n.value==e.options.value,r.innerHTML=n.label,r.label=n.label}),t}}])&&Z(n.prototype,r),i&&Z(n,i),t}(),oe=n(36),ie=n.n(oe),se=n(8),ae=n.n(se),le=n(10),ce=n.n(le),ue=n(6),pe=n.n(ue),fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},de=function(e,t,n){if(void 0===n&&(n=!1),!e||!t||"object"!=typeof e||"object"!=typeof t)return e;var r=fe({},e);for(var o in t)t.hasOwnProperty(o)&&(t[o]instanceof Array&&e[o]instanceof Array?r[o]=n?e[o].concat(t[o]):t[o]:"object"==typeof t[o]&&"object"==typeof e[o]?r[o]=de(e[o],t[o],n):r[o]=t[o]);return r},he=n(3),me=function(e,t,n,r){if(!e.getEntriesByName)return!1;var o=e.getEntriesByName(t);return!!(o&&o.length>0)&&(n(o.reverse()[0]),r.clearMeasures&&r.clearMeasures(t),ve.callbacks.delete(t),ve.callbacks.size<1&&(ve.observer.disconnect(),r.clearResourceTimings&&r.clearResourceTimings()),!0)},ve={callbacks:new Map,observer:null,observe:function(e,t){if(e&&t){var n=he.a.polyfill("performance",{doThrow:!1});(function(e,t){return!ve.observer&&e&&t&&(ve.observer=new t(function(t){ve.callbacks.forEach(function(n,r){me(t,r,n,e)})}),e.clearResourceTimings&&e.clearResourceTimings()),ve.observer})(n,he.a.polyfill("PerformanceObserver",{doThrow:!1}))&&(me(n,e,t,n)||(ve.callbacks.size<1&&ve.observer.observe({entryTypes:["resource","measure"]}),ve.callbacks.set(e,t)))}}},ge=ve,ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},be=function(){function e(e,t,n,r,o,i){void 0===n&&(n=new Map),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===i&&(i=[]),this._url=e,this._options=t,this._catchers=n,this._resolvers=r,this._middlewares=o,this._deferredChain=i}return e.factory=function(t,n){return void 0===t&&(t=""),void 0===n&&(n={}),new e(t,n)},e.prototype.selfFactory=function(t){var n=void 0===t?{}:t,r=n.url,o=void 0===r?this._url:r,i=n.options,s=void 0===i?this._options:i,a=n.catchers,l=void 0===a?this._catchers:a,c=n.resolvers,u=void 0===c?this._resolvers:c,p=n.middlewares,f=void 0===p?this._middlewares:p,d=n.deferredChain;return new e(o,s,l,u,f,void 0===d?this._deferredChain:d)},e.prototype.defaults=function(e,t){return void 0===t&&(t=!1),he.a.defaults=t?de(he.a.defaults,e):e,this},e.prototype.errorType=function(e){return he.a.errorType=e,this},e.prototype.polyfills=function(e){return he.a.polyfills=ye({},he.a.polyfills,e),this},e.prototype.url=function(e,t){if(void 0===t&&(t=!1),t)return this.selfFactory({url:e});var n=this._url.split("?");return this.selfFactory({url:n.length>1?n[0]+e+"?"+n[1]:this._url+e})},e.prototype.options=function(e,t){return void 0===t&&(t=!0),this.selfFactory({options:t?de(this._options,e):e})},e.prototype.query=function(e,t){return void 0===t&&(t=!1),this.selfFactory({url:we(this._url,e,t)})},e.prototype.headers=function(e){return this.selfFactory({options:de(this._options,{headers:e})})},e.prototype.accept=function(e){return this.headers({Accept:e})},e.prototype.content=function(e){return this.headers({"Content-Type":e})},e.prototype.auth=function(e){return this.headers({Authorization:e})},e.prototype.catcher=function(e,t){var n=new Map(this._catchers);return n.set(e,t),this.selfFactory({catchers:n})},e.prototype.signal=function(e){return this.selfFactory({options:ye({},this._options,{signal:e.signal})})},e.prototype.resolve=function(e,t){return void 0===t&&(t=!1),this.selfFactory({resolvers:t?[e]:this._resolvers.concat([e])})},e.prototype.defer=function(e,t){return void 0===t&&(t=!1),this.selfFactory({deferredChain:t?[e]:this._deferredChain.concat([e])})},e.prototype.middlewares=function(e,t){return void 0===t&&(t=!1),this.selfFactory({middlewares:t?e:this._middlewares.concat(e)})},e.prototype.method=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=n?"object"==typeof n?this.json(n):this.body(n):this;return function(e){var t=e._url,n=e._catchers,r=e._resolvers,o=e._middlewares,i=e._options,s=de(he.a.defaults,i),a=he.a.polyfill("AbortController",{doThrow:!1,instance:!0});!s.signal&&a&&(s.signal=a.signal);var l=function(e){return function(t){return 0===e.length?t:1===e.length?e[0](t):e.reduceRight(function(n,r,o){return o===e.length-2?r(n(t)):r(n)})}}(o)(he.a.polyfill("fetch"))(t,s),c=l.then(function(e){return e.ok?e:e[he.a.errorType||"text"]().then(function(t){var n=new Error(t);throw n[he.a.errorType||"text"]=t,n.status=e.status,n.response=e,n})}),u=function(t){return t.catch(function(t){if(n.has(t.status))return n.get(t.status)(t,e);if(n.has(t.name))return n.get(t.name)(t,e);throw t})},p=function(e){return function(t){return u(e?c.then(function(t){return t&&t[e]()}).then(function(e){return e&&t&&t(e)||e}):c.then(function(e){return e&&t&&t(e)||e}))}},f={res:p(null),json:p("json"),blob:p("blob"),formData:p("formData"),arrayBuffer:p("arrayBuffer"),text:p("text"),perfs:function(e){return l.then(function(t){return ge.observe(t.url,e)}),f},setTimeout:function(e,t){return void 0===t&&(t=a),setTimeout(function(){return t.abort()},e),f},controller:function(){return[a,f]},error:function(e,t){return n.set(e,t),f},badRequest:function(e){return f.error(400,e)},unauthorized:function(e){return f.error(401,e)},forbidden:function(e){return f.error(403,e)},notFound:function(e){return f.error(404,e)},timeout:function(e){return f.error(408,e)},internalError:function(e){return f.error(500,e)},onAbort:function(e){return f.error("AbortError",e)}};return r.reduce(function(t,n){return n(t,e)},f)}(r._deferredChain.reduce(function(e,t){return t(e,e._url,e._options)},r).options(ye({},t,{method:e})))},e.prototype.get=function(e){return this.method("GET",e)},e.prototype.delete=function(e){return this.method("DELETE",e)},e.prototype.put=function(e,t){return this.method("PUT",t,e)},e.prototype.post=function(e,t){return this.method("POST",t,e)},e.prototype.patch=function(e,t){return this.method("PATCH",t,e)},e.prototype.head=function(e){return this.method("HEAD",e)},e.prototype.opts=function(e){return this.method("OPTIONS",e)},e.prototype.body=function(e){return this.selfFactory({options:ye({},this._options,{body:e})})},e.prototype.json=function(e){return this.content("application/json").body(JSON.stringify(e))},e.prototype.formData=function(e){return this.body(function(e){var t=he.a.polyfill("FormData",{instance:!0});for(var n in e)if(e[n]instanceof Array)for(var r=0,o=e[n];r<o.length;r++){var i=o[r];t.append(n+"[]",i)}else t.append(n,e[n]);return t}(e))},e.prototype.formUrl=function(e){return this.body("string"==typeof e?e:(t=e,Object.keys(t).map(function(e){var n=t[e];return n instanceof Array?n.map(function(t){return _e(e,t)}).join("&"):_e(e,n)}).join("&"))).content("application/x-www-form-urlencoded");var t},e}(),we=function(e,t,n){var r;if("string"==typeof t)r=t;else{var o=he.a.polyfill("URLSearchParams",{instance:!0});for(var i in t)if(t[i]instanceof Array)for(var s=0,a=t[i];s<a.length;s++){var l=a[s];o.append(i,l)}else o.append(i,t[i]);r=o.toString()}var c=e.split("?");return n||c.length<2?c[0]+"?"+r:e+"&"+r};function _e(e,t){return encodeURIComponent(e)+"="+encodeURIComponent("object"==typeof t?JSON.stringify(t):""+t)}var Ee=be.factory;Ee.default=be.factory;var Se=Ee;n(53);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ke(this,Oe(t).call(this,e))).options.type||(n.options.type="page"),n.options.url||(n.options.url="__prose"),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,o),n=t,(r=[{key:"read",value:function(e){return this.hiddenField?"file"==this.options.type?{type:"file",shortcode:"file_link",id:this.hiddenField.value}:{type:"page",shortcode:"sitetree_link",id:this.hiddenField.value}:0}},{key:"render",value:function(){var e=document.createElement("input");e.readOnly=!0,e.name=this.options.name?this.options.name:this.options.label,e.type="text",e.value=this.options.text||"",this.hiddenField=document.createElement("hidden"),this.hiddenField.type="text",this.hiddenField.value=this.options.value||"";var t=document.createElement("div");t.className="TreeField";var n=document.createElement("div");t.className="TreeField__Tree",t.appendChild(e),t.appendChild(this.hiddenField),t.appendChild(n),this.tree=n;var r=this.options.url,o="file"==this.options.type?"file":"page",i=location.href.indexOf("stage=Stage")>0,s=i?"&stage=Stage":"",a=r+"/childnodes/"+o,l=document.querySelector("input[name=SecurityID]").value,c=new ie.a({el:n,data:[{id:"#",name:this.options.treeLabel?this.options.treeLabel:"Select item",loadOnDemand:!0,children:[]}],loadNodes:function(e,t){var n="".concat(a,"?id=").concat(e.id).concat(s),r=Se(),o={id:e.id,SecurityID:l};i&&(o.stage="Stage"),r.url(n).query(o).get().json(function(e){var n=e.map(function(e){return{id:""+e.id,name:e.text,loadOnDemand:e.children,children:e.children?[]:null,icon:e.icon||null,data:e.data}});t(null,n,function(){})})},rowRenderer:De}),u=n.querySelector('div.infinite-tree-item[data-id="#"] a.infinite-tree-toggler');return u&&u.click(),c.on("selectNode",function(t){t&&t.data&&t.data.link&&(e.value=t.name,this.options.titleField&&document.getElementsByName(this.options.titleField).forEach(function(e){e.value=t.name}),this.hiddenField.value=t.id,t.data&&this.options.linkField&&t.data.link&&document.getElementsByName(this.options.linkField).forEach(function(e){e.value=t.data.link}))}.bind(this)),t}}])&&Te(n.prototype,r),i&&Te(n,i),t}(),De=function(e,t){var n=e.id,r=e.name,o=e.loadOnDemand,i=void 0!==o&&o,s=e.children,a=e.state,l=e.icon,c=t.droppable,u=a.depth,p=a.open,f=a.path,d=a.total,h=a.selected,m=void 0!==h&&h,v=a.filtered,g=Object.keys(s).length,y=e.hasChildren();if(!1===v)return"";var b="";!y&&i&&(b="►"),y&&p&&(b="▼"),y&&!p&&(b="►");var w=pe()("a",{style:"min-width: 16px; display: inline-block",class:!y&&i?ae()(t.togglerClass,"infinite-tree-closed"):y&&p?ae()(t.togglerClass):y&&!p?ae()(t.togglerClass,"infinite-tree-closed"):void 0},b),_=l?pe()("img",{src:l,height:"16",style:"margin-right: 0.5rem; max-width: 32px;"}):"",E=l?pe()("span",{style:"width: 32px; display: inline-block;"},_):"",S=pe()("span",{class:ae()("infinite-tree-title")},ce()(r)),C=pe()("div",{class:"infinite-tree-node",style:"margin-left: ".concat(18*u,"px")},w+E+S);return pe()("div",{"data-id":""+n,"data-expanded":y&&p,"data-depth":""+u,"data-path":f,"data-selected":m,"data-children":g,"data-total":d,class:ae()("infinite-tree-item",{"infinite-tree-selected":m}),droppable:c},C)};function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ae(e,t,n[t])})}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return new M.MenuItem({title:"Add link",icon:M.icons.link,active:function(t){return L(t,e)},enable:function(t){return L(t,e)||!t.selection.empty},run:function(n,r,o){var i={},s=null;if(L(n,e)){var a=n.selection.$anchor.pos,l=function(e,t,n){var r=e.resolve(t),o=r.parent.childAfter(r.parentOffset);if(o.node){var i=o.node.marks.find(function(e){return e.type===n});if(i){for(var s=r.index(),a=r.start()+o.offset;s>0&&i.isInSet(r.parent.child(s-1).marks);)s-=1,a-=r.parent.child(s).nodeSize;return{from:a,to:a+o.node.nodeSize}}}}(n.doc,a,e);s=n.doc.nodeAt(a);var c=n.doc.resolve(a),u=null;u=s.isText?_.TextSelection.create(n.doc,l.from,l.to):_.NodeSelection.create(n.doc,c.start()),r(n.tr.setSelection(u)),s&&s.marks&&s.marks.length>0&&s.marks.forEach(function(t){t.type==e&&(i=t.attrs)})}!function(e,t,n,r){var o="",i="",s=e.text,a="page";if(e&&e.href){var l=null;(l=e.href.match(/sitetree_link,id=(\d+)/))?(i=l[1],a="page"):(l=e.href.match(/file_link,id=(\d+)/))?(i=l[1],a="file"):o=e.href,i&&(s=s+" - "+a+" #"+i)}var c={};t.internal&&(c.pageLink=new Ie({name:"search-page",label:"Select a page (or select external link below)",required:!1,text:s,type:a,value:i}));c=Me({},c,{externalLink:new K({label:"External URL",required:!1,value:o}),title:new K({label:"Description",required:!1,value:e&&e.title}),target:new re({label:"Open target",required:!1,value:e&&e.target,options:[{value:"",label:"default"},{value:"_blank",label:"_blank"},{value:"_self",label:"_self"},{value:"_parent",label:"_parent"},{value:"_top",label:"_top"}]})});var u={};if(r)for(var p=0;p<r.length;p++)u[r[p]]=c[r[p]];else u=c;h({title:"Select link",fields:u,callback:function(e){if(e.href=e.externalLink,0===e.href.length){var t=e.pageLink;t&&t.id&&(e.href="["+t.shortcode+",id="+t.id+"]")}n(e)}})}(Me({},i,{text:s?s.text:""}),t,function(t){if(t.href=t.externalLink,0===t.href.length){var n=t.pageLink;n&&n.id&&(t.href="["+n.shortcode+",id="+n.id+"]")}var r=o.state.selection.$anchor.pos,i=o.state.selection.$head.pos;o.dispatch(o.state.tr.addMark(r,i,e.create(t))),o.focus()})}})}var Ne={width:20,height:20,path:"M13.774,9.355h-7.36c-0.305,0-0.552,0.247-0.552,0.551s0.247,0.551,0.552,0.551h7.36 c0.304,0,0.551-0.247,0.551-0.551S14.078,9.355,13.774,9.355z M10.094,0.875c-4.988,0-9.031,4.043-9.031,9.031    s4.043,9.031,9.031,9.031s9.031-4.043,9.031-9.031S15.082,0.875,10.094,0.875z M10.094,17.809c-4.365,0-7.902-3.538-7.902-7.902    c0-4.365,3.538-7.902,7.902-7.902c4.364,0,7.902,3.538,7.902,7.902C17.996,14.271,14.458,17.809,10.094,17.809z"};n(54);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Fe(t).call(this,e))||"object"!==Le(o)&&"function"!=typeof o?ze(r):o,Be(ze(ze(n)),"items",[]),Be(ze(ze(n)),"lookIn",0),Be(ze(ze(n)),"loading",!1),Be(ze(ze(n)),"lookupItems",function(){}),Be(ze(ze(n)),"shortcodes",{image:"image",file:"file_link",page:"sitetree_link"}),n.options.type||(n.options.type="page"),n.options.url||(n.options.url="__prose"),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,o),n=t,(r=[{key:"read",value:function(e){if(this.hiddenField){var t=this.shortcodes[this.options.type]||"file_link";return{type:this.options.type,shortcode:t,id:this.hiddenField.value}}return 0}},{key:"render",value:function(){var e=this;this.hiddenField=document.createElement("hidden"),this.hiddenField.type="text",this.hiddenField.value=this.options.value||"";var t=document.createElement("div");t.className="ItemFilterField";var n=document.createElement("div");n.className="ItemFilterField__Input";var r=document.createElement("div");r.className="ItemFilterField__Display";var o=document.createElement("input");o.name=this.options.name?this.options.name:this.options.label,o.type="text",n.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(this.hiddenField);var i,s,a,l,c=Se(),u=this.options.type||"page",p=this.options.url+"/search/"+u,f=document.querySelector("input[name=SecurityID]").value,d=location.href.indexOf("stage=Stage")>0;return this.lookupItems=(i=function(t,n){var o="".concat(p),i={term:t,SecurityID:f};n&&(function(e){throw new Error('"'+e+'" is read-only')}("queryOpts"),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Be(e,t,n[t])})}return e}({},i,n)),d&&(i.stage="Stage"),e.loading=!0,e.renderItems(r),c.url(o).query(i).get().json(function(t){t&&t.results&&(e.items=t.results),e.loading=!1,e.renderItems(r)}).catch(function(t){console.log(t),e.loading=!1,e.renderItems(r)})},s=500,function(){var e=this,t=arguments,n=a&&!l;clearTimeout(l),l=setTimeout(function(){l=null,a||i.apply(e,t)},s),n&&i.apply(e,t)}),this.value?this.lookupItems("",{initial:this.value}):this.options.folderId&&this.lookupItems("",{folderId:this.options.folderId}),o.addEventListener("keyup",function(t){e.lookupItems(t.target.value)}),document.addEventListener("click",function(t){if(t.target&&"ItemFilterField__Item__Image"===t.target.className){document.querySelectorAll(".ItemFilterField__Item__Image").forEach(function(e){e.classList.remove("ItemFilterField__Item__Image--Selected")}),t.target.classList.add("ItemFilterField__Item__Image--Selected");var n=t.target.getAttribute("data-id"),r=t.target.getAttribute("data-url"),o=t.target.getAttribute("data-title");n&&r?(e.hiddenField.value=n,e.options.linkField&&document.getElementsByName(e.options.linkField).forEach(function(e){e.value=r}),e.options.titleField&&document.getElementsByName(e.options.titleField).forEach(function(e){e.value=o})):n&&e.lookupItems(n)}}),t}},{key:"renderItems",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild);if(this.loading)e.innerHTML="<div class='ItemFilterField__Loading'>Loading ... </div>";else{var t=this.items.map(function(e){var t=e.text;t.length>20&&(t=t.substring(0,18)+"...");var n=pe()("img",{class:"ItemFilterField__Item__Image",src:e.icon,"data-id":""+e.id,"data-title":e.text,"data-url":e.data&&e.data.link?e.data.link:"",title:ce()(e.location+" / "+e.text)}),r=pe()("span",{class:"ItemFilterField__Item__Caption"},ce()(t));return pe()("div",{class:"ItemFilterField__Item"},n+r)});t.length>0?e.innerHTML=t.join(""):e.innerHTML="<div class='ItemFilterField__Loading'>No results</div>"}}}])&&Pe(n.prototype,r),i&&Pe(n,i),t}();var Ve=n(18);n(55);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=He(this,$e(t).call(this,e))).options.type||(n.options.type="page"),n.options.url||(n.options.url="__prose"),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,o),n=t,(r=[{key:"read",value:function(e){return this.hiddenField?{type:this.options.type,id:this.hiddenField.value}:0}},{key:"render",value:function(){var e=this;this.hiddenField=document.createElement("hidden"),this.hiddenField.type="text",this.hiddenField.value=this.options.value||"";var t=document.createElement("div");t.className="FileUploadField";var n=document.createElement("div");n.className="FileUploadField__Input";var r=document.createElement("input");return r.name=this.options.name?this.options.name:this.options.label,r.type="file",n.appendChild(r),t.appendChild(n),t.appendChild(this.hiddenField),Ve.create(r,{multiple:!0,name:this.options.name}).onprocessfile=function(t,n){n&&e.options.onupload&&e.options.onupload(n)},Ve.setOptions({server:this.options.uploadurl}),t}}])&&Ue(n.prototype,r),i&&Ue(n,i),t}(),Je={width:20,height:20,path:"M18.555,15.354V4.592c0-0.248-0.202-0.451-0.45-0.451H1.888c-0.248,0-0.451,0.203-0.451,0.451v10.808c0,0.559,0.751,0.451,0.451,0.451h16.217h0.005C18.793,15.851,18.478,14.814,18.555,15.354 M2.8,14.949l4.944-6.464l4.144,5.419c0.003,0.003,0.003,0.003,0.003,0.005l0.797,1.04H2.8z M13.822,14.949l-1.006-1.317l1.689-2.218l2.688,3.535H13.822z M17.654,14.064l-2.791-3.666c-0.181-0.237-0.535-0.237-0.716,0l-1.899,2.493l-4.146-5.42c-0.18-0.237-0.536-0.237-0.716,0l-5.047,6.598V5.042h15.316V14.064z M12.474,6.393c-0.869,0-1.577,0.707-1.577,1.576s0.708,1.576,1.577,1.576s1.577-0.707,1.577-1.576S13.343,6.393,12.474,6.393 M12.474,8.645c-0.371,0-0.676-0.304-0.676-0.676s0.305-0.676,0.676-0.676c0.372,0,0.676,0.304,0.676,0.676S12.846,8.645,12.474,8.645"},Xe="__prose/uploadfile";function Ke(e){return new M.MenuItem({title:"Add image",icon:Je,enable:function(t){return P(t,e)},run:function(t,n,r){var o=null,i=t.selection.from,s=t.selection.to;t.selection instanceof _.NodeSelection&&t.selection.node.type==e&&((o=t.selection.node.attrs).alt=o.alt||t.doc.textBetween(i,s," ")),function(e,t,n){var r=document.querySelector("input[name=SecurityID]").value,o=Xe+"?SecurityID="+r+"&path="+location.pathname,i=new je({name:"image_selector",linkField:"image_location",titleField:"image_title",label:"Find an image",required:!1,text:"",type:"image",value:null}),s={imageSel:i,fileUpload:new Ye({name:"imageUpload",label:"Upload image",required:!1,type:"image",value:null,uploadurl:o,onupload:function(e){e&&e.filenameWithoutExtension&&i&&i.lookupItems(e.filenameWithoutExtension)}}),imageInfo:new f({name:"imageInfo",label:"Details",fields:{src:new K({label:"Location",required:!0,value:e&&e.src,name:"image_location"}),title:new K({label:"Title",value:e&&e.title,name:"image_title"}),alt:new K({label:"Description",value:e&&e.alt})}}),imageProps:new f({name:"imageProps",label:"Properties",fields:{width:new K({label:"Width",value:e&&e.width}),height:new K({label:"Height",value:e&&e.height})}})},a={};if(n)for(var l=0;l<n.length;l++)a[n[l]]=s[n[l]];else a=s;h({title:"Select image",fields:a,callback:t}),i.lookupItems("")}(o,function(t){t.imageSel&&(t["data-id"]=t.imageSel.id),r.dispatch(r.state.tr.replaceSelectionWith(e.createAndFill(t))),r.focus()})}})}var Qe=n(9);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var et=/image.*/,tt=new _.Plugin({state:{init:function(){return Qe.DecorationSet.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(n&&n.add){var r=document.createElement("placeholder"),o=Qe.Decoration.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[o])}else n&&n.remove&&(t=t.remove(t.find(null,null,function(e){return e.id==n.remove.id})));return t}},props:{decorations:function(e){return this.getState(e)},handleDOMEvents:{paste:function(e,t){var n=t.clipboardData||window.clipboardData;if(n)for(var r=0;r<n.types.length;r++)if(n.types[r].match(et)||n.items[r].type.match(et)){var o,i,s=function(){var s=j(e.dom);if(!s)return{v:void 0};if(!(o=n.items[r].getAsFile()))return alert("Could not convert clipboard data to file, please try a smaller image"),"continue";t.stopPropagation();var a=e.state.tr,l=(new Date).getTime();a.selection.empty||a.deleteSelection(),a.setMeta(tt,{add:{id:l,pos:a.selection.from}}),e.dispatch(a),(i=new FileReader).onload=function(t){if(t.target.result&&t.target.result.length>0&&t.target.result.length<15e5){!0;var n=document.querySelector("input[name=SecurityID]").value,r=s.getAttribute("data-upload-path"),o=s.getAttribute("data-prose-url")+"/pastefile";Se().url(o).formData({ajax:1,SecurityID:n,rawData:t.target.result,path:r}).post().json(function(t){if(t&&t.url){var n=e.state.config.schema.nodes.image,r=nt(e.state,l);if(null==r)return;e.dispatch(e.state.tr.replaceWith(r,r,n.create({src:t.url})).setMeta(tt,{remove:{id:l}}))}!1}).catch(function(t){e.dispatch(a.setMeta(placeholderPlugin,{remove:{id:l}})),console.error(error),alert("Upload failed")})}},i.readAsDataURL(o)}();switch(s){case"continue":continue;default:if("object"===Ze(s))return s.v}}}}}});function nt(e,t){var n=tt.getState(e).find(null,null,function(e){return e.id==t});return n.length?n[0].from:null}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ot="prose-shortcode",it={width:20,height:20,path:"M17.279,8.257h-0.785c-0.107-0.322-0.237-0.635-0.391-0.938l0.555-0.556c0.208-0.208,0.208-0.544,0-0.751l-2.254-2.257c-0.199-0.2-0.552-0.2-0.752,0l-0.556,0.557c-0.304-0.153-0.617-0.284-0.939-0.392V3.135c0-0.294-0.236-0.532-0.531-0.532H8.435c-0.293,0-0.531,0.237-0.531,0.532v0.784C7.582,4.027,7.269,4.158,6.966,4.311L6.409,3.754c-0.1-0.1-0.234-0.155-0.376-0.155c-0.141,0-0.275,0.055-0.375,0.155L3.403,6.011c-0.208,0.207-0.208,0.543,0,0.751l0.556,0.556C3.804,7.622,3.673,7.935,3.567,8.257H2.782c-0.294,0-0.531,0.238-0.531,0.531v3.19c0,0.295,0.237,0.531,0.531,0.531h0.787c0.105,0.318,0.236,0.631,0.391,0.938l-0.556,0.559c-0.208,0.207-0.208,0.545,0,0.752l2.254,2.254c0.208,0.207,0.544,0.207,0.751,0l0.558-0.559c0.303,0.154,0.616,0.285,0.938,0.391v0.787c0,0.293,0.238,0.531,0.531,0.531h3.191c0.295,0,0.531-0.238,0.531-0.531v-0.787c0.322-0.105,0.636-0.236,0.938-0.391l0.56,0.559c0.208,0.205,0.546,0.207,0.752,0l2.252-2.254c0.208-0.207,0.208-0.545,0.002-0.752l-0.559-0.559c0.153-0.303,0.285-0.615,0.389-0.938h0.789c0.295,0,0.532-0.236,0.532-0.531v-3.19C17.812,8.495,17.574,8.257,17.279,8.257z M16.747,11.447h-0.653c-0.241,0-0.453,0.164-0.514,0.398c-0.129,0.496-0.329,0.977-0.594,1.426c-0.121,0.209-0.089,0.473,0.083,0.645l0.463,0.465l-1.502,1.504l-0.465-0.463c-0.174-0.174-0.438-0.207-0.646-0.082c-0.447,0.262-0.927,0.463-1.427,0.594c-0.234,0.061-0.397,0.271-0.397,0.514V17.1H8.967v-0.652c0-0.242-0.164-0.453-0.397-0.514c-0.5-0.131-0.98-0.332-1.428-0.594c-0.207-0.123-0.472-0.09-0.646,0.082l-0.463,0.463L4.53,14.381l0.461-0.463c0.169-0.172,0.204-0.434,0.083-0.643c-0.266-0.461-0.467-0.939-0.596-1.43c-0.06-0.234-0.272-0.398-0.514-0.398H3.313V9.319h0.652c0.241,0,0.454-0.162,0.514-0.397c0.131-0.498,0.33-0.979,0.595-1.43c0.122-0.208,0.088-0.473-0.083-0.645L4.53,6.386l1.503-1.504l0.46,0.462c0.173,0.172,0.437,0.204,0.646,0.083c0.45-0.265,0.931-0.464,1.433-0.597c0.233-0.062,0.396-0.274,0.396-0.514V3.667h2.128v0.649c0,0.24,0.161,0.452,0.396,0.514c0.502,0.133,0.982,0.333,1.433,0.597c0.211,0.12,0.475,0.089,0.646-0.083l0.459-0.462l1.504,1.504l-0.463,0.463c-0.17,0.171-0.202,0.438-0.081,0.646c0.263,0.448,0.463,0.928,0.594,1.427c0.061,0.235,0.272,0.397,0.514,0.397h0.651V11.447z"},st={attrs:{shortcode:{default:{type:"inline_placeholder",args:{},attrs:{}}}},inline:!0,group:"inline",draggable:!0,defining:!0,atom:!0,nodeContainer:"span",toDOM:function(e){return["span",{"data-shortcode":JSON.stringify(e.attrs.shortcode),class:ot},ct(e)]},parseDOM:[{tag:"span[class="+ot+"]",getAttrs:function(e){var t=e.getAttribute("data-shortcode");return t?{shortcode:JSON.parse(t)}:st.attrs.shortcode.default}}]},at=[Object.assign({},st.parseDOM[0],{tag:"div[class="+ot+"]"})],lt=Object.assign({},st,{attrs:{shortcode:{default:{type:"block_placeholder",args:{}}}},nodeContainer:"div",inline:!1,group:"block",parseDOM:at,toDOM:function(e){return["div",{"data-shortcode":JSON.stringify(e.attrs.shortcode),class:ot},ct(e)]}});function ct(e){var t="";if(!e.attrs.shortcode)return"";if(e.attrs.shortcode.args){var n=function(e){var t=Object.keys(e);if(t.length>0){var n=t.map(function(t){return t+'="'+e[t]+'"'});return n.join(" ")}return""}(e.attrs.shortcode.args);n.length>0&&(t=","+n)}return"["+e.attrs.shortcode.type+t+"]"}new _.Plugin({});var ut=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.outerView=n,this.getPos=r,this.dom=document.createElement(t.type.spec.nodeContainer),this.dom.className=ot,this.dom.setAttribute("style","position: relative");var o=document.createElement(t.type.spec.nodeContainer),i=H(it);this.contentHolder=o,this.settingsButton=i,i.setAttribute("style","cursor: pointer; position: absolute; padding: 0px; right: 0px; top: 0px;line-height: 0.8;"),o.setAttribute("style","margin-right: 16px"),this.dom.appendChild(o),this.dom.appendChild(i),i.addEventListener("click",function(e){e.preventDefault();var o=t.attrs.shortcode.args,i=t.attrs.shortcode.attrs,s={};Object.keys(i).forEach(function(e){var t="text"==i[e]?new K({label:e,value:o?o[e]:null}):null;t&&(s[e]=t)}),h({title:"Shortcode attributes",fields:s,callback:function(e){var o=JSON.parse(JSON.stringify(t.attrs));o.shortcode.args=e,n.dispatch(n.state.tr.setNodeMarkup(r(),null,o,void 0))}})});var s=j(n.dom);if(s&&this.node.attrs.shortcode){var a=s.getAttribute("data-prose-url")+"/rendershortcode",l=this.node.attrs.shortcode.args;(l=l||{}).context_id=s.getAttribute("data-context-id"),function(e,t,n){var r=Se();return n=n||"/__prose/rendershortcode",r.url(n).query({shortcode:e,attrs:JSON.stringify(t),stage:"Stage"}).get()}(this.node.attrs.shortcode.type,l,a).text(function(e){o.innerHTML=e})}o.innerHTML="Loading..."}var t,n,r;return t=e,(n=[{key:"selectNode",value:function(){this.dom.classList.add("ProseMirror-selectednode")}},{key:"deselectNode",value:function(){this.dom.classList.remove("ProseMirror-selectednode")}},{key:"destroy",value:function(){this.contentHolder.remove(),this.settingsButton.remove()}}])&&rt(t.prototype,n),r&&rt(t,r),e}();function pt(e,t,n){return e||(e="inline_placeholder"),function(r,o){if(P(r,n)){if(o){var i=n.create({shortcode:{type:e,attrs:t}});o(r.tr.replaceSelectionWith(i))}return!0}return!1}}var ft=n(19),dt=Object(R.addListNodes)(ft.schema.spec.nodes,"paragraph block*","block"),ht=Object(D.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(e){return e.style.backgroundColor||null},setDOMAttr:function(e,t){e&&(t.style=(t.style||"")+"background-color: ".concat(e,";"))}}}});dt=(dt=(dt=dt.append(ht)).append({inline_shortcode:st,block_shortcode:lt})).update("image",{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null},height:{default:null},"data-id":{default:null},"data-shortcode":{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),width:e.getAttribute("width"),height:e.getAttribute("height"),"data-id":e.getAttribute("data-id"),"data-shortcode":e.getAttribute("data-shortcode")}}}],toDOM:function(e){return["img",e.attrs]}});var mt=ft.schema.spec.marks.append({strike:{parseDOM:[{tag:"s"},{tag:"strike"}],toDOM:function(){return["s"]}},link:{attrs:{href:{},title:{default:null},target:{default:"_self"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title"),target:e.getAttribute("target")}}}],toDOM:function(e){return["a",e.attrs]}}}),vt=new m.Schema({nodes:dt,marks:mt});g=vt,v=m.DOMSerializer.fromSchema(g);var gt=vt,yt=n(20),bt={width:208,height:128,path:"M30 98v-68h20l20 25 20-25h20v68h-20v-39l-20 25-20-25v39zM155 98l-30-33h20v-35h20v35h20z"};var wt=function(){return new M.MenuItem({title:"Edit markdown",label:"Markdown",icon:bt,enable:function(e){return e.selection.empty},run:function(e,t,n){var r=yt.defaultMarkdownSerializer.serialize(n.state.doc);h({title:"Markdown",fields:{content:new O({label:"Content",value:r})},callback:function(t){var r=yt.defaultMarkdownParser.parse(t.content);r=b(w(r)),n.dispatch(e.tr.setSelection(new _.AllSelection(e.doc))),n.dispatch(n.state.tr.replaceSelectionWith(r)),n.focus()}})}})};function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Et=new _.Plugin({view:function(e){return new St(e)}}),St=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tableTools=document.createElement("div"),this.tableTools.className="tabletools",t.dom.parentNode.appendChild(this.tableTools),this.update(t,null),this.tableMenu=[],this.tableMenu=[F(D.addColumnBefore,{title:"Insert column before",icon:Ct.addColumnBefore}),F(D.addColumnAfter,{title:"Insert column after",icon:Ct.addColumnAfter}),F(D.deleteColumn,{title:"Delete column",icon:Ct.deleteColumn}),F(D.addRowBefore,{title:"Insert row before",icon:Ct.addRowBefore}),F(D.addRowAfter,{title:"Insert row after",icon:Ct.addRowAfter}),F(D.deleteRow,{title:"Delete row",icon:Ct.deleteRow}),F(D.mergeCells,{title:"Merge cells",icon:Ct.mergeCells}),F(D.splitCell,{title:"Split cell",icon:Ct.splitCell}),F(D.toggleHeaderColumn,{title:"Toggle header column",icon:Ct.toggleHeaderColumn}),F(D.toggleHeaderRow,{title:"Toggle header row",icon:Ct.toggleHeaderRow}),F(D.toggleHeaderCell,{title:"Toggle header cells",icon:Ct.toggleHeaderCell}),F(D.deleteTable,{title:"Delete table",icon:Ct.deleteTable})],this.renderedMenu=Object(M.renderGrouped)(t,[this.tableMenu]),this.tableTools.appendChild(this.renderedMenu.dom)}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){var n=e.state;if(!(t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection))&&n.selection&&n.selection.$cursor)if(n.selection.empty&&null!=n.selection.$cursor)if(Object(D.isInTable)(n)){this.tableTools.style.display="";var r=n.selection,o=r.from,i=r.to,s=e.coordsAtPos(o),a=(e.coordsAtPos(i),this.tableTools.offsetParent.getBoundingClientRect());this.tableTools.style.left=s.left-100+"px",this.tableTools.style.bottom=a.bottom-s.top+20+"px",this.renderedMenu&&this.renderedMenu.update(n)}else this.tableTools.style.display="none";else this.tableTools.style.display="none"}},{key:"destroy",value:function(){this.tableTools.remove()}}])&&_t(t.prototype,n),r&&_t(t,r),e}(),Ct={addColumnBefore:{width:14,height:14,path:"M 8.6819,1e-4 C 8.3918,1e-4 8.159,0.1689 8.159,0.379 l 0,13.242 c 0,0.21 0.2328,0.3789 0.5229,0.3789 l 4.7928,0 c 0.29,0 0.5252,-0.1689 0.5252,-0.3789 l 0,-13.242 c 0,-0.2101 -0.2352,-0.3789 -0.5252,-0.3789 l -4.7928,0 z m 0.687,1.1582 3.4211,0 0,3.2168 -3.4211,0 0,-3.2168 z m 0,4.2852 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z m 0,4.2832 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z M 4.0319,3.0001 q 0.264,0 0.4658,0.1915 l 0.3882,0.3882 q 0.1965,0.1966 0.1965,0.4709 0,0.2795 -0.1965,0.4658 l -1.5164,1.5217 3.6436,0 q 0.2691,0 0.4372,0.194 0.1683,0.1941 0.1683,0.4684 l 0,0.6625 q 0,0.2743 -0.1683,0.4684 -0.1681,0.1941 -0.4372,0.1941 l -3.6436,0 1.5164,1.5216 q 0.1965,0.1863 0.1965,0.4658 0,0.2795 -0.1965,0.4658 L 4.4977,10.867 q -0.1967,0.1966 -0.4658,0.1966 -0.2742,0 -0.471,-0.1966 L 0.1917,7.4977 Q 1e-4,7.3165 1e-4,7.0319 1e-4,6.7524 0.1917,6.5609 L 3.5609,3.1916 Q 3.7628,3.0001 4.0319,3.0001 Z"},addColumnAfter:{width:14,height:14,path:"m 5.3165569,14.0019 c 0.2900213,0 0.5227581,-0.1688 0.5227581,-0.3789 l 0,-13.2422 c 0,-0.21 -0.2327368,-0.3789 -0.5227581,-0.3789 l -4.7914999,0 C 0.235136,0.0019 0,0.1708 0,0.3808 L 0,13.623 c 0,0.2101 0.235136,0.3789 0.525057,0.3789 l 4.7914999,0 z m -0.6868135,-1.1582 -3.4201714,0 0,-3.2168 3.4201714,0 0,3.2168 z m 0,-4.2852 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 0,-4.2832 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 5.3395506,6.7583 q -0.2639283,0 -0.4656736,-0.1915 L 9.1155258,10.4539 Q 8.9190791,10.2573 8.9190791,9.983 q 0,-0.2795 0.1964467,-0.4658 l 1.5159882,-1.5217 -3.642611,0 q -0.269027,0 -0.4370814,-0.194 Q 6.3835673,7.6074 6.3835673,7.3331 l 0,-0.6625 q 0,-0.2743 0.1682543,-0.4684 Q 6.719876,6.0081 6.988903,6.0081 l 3.642611,0 L 9.1155258,4.4865 Q 8.9190791,4.3002 8.9190791,4.0207 q 0,-0.2795 0.1964467,-0.4658 L 9.5036204,3.1667 Q 9.7002671,2.9701 9.969294,2.9701 q 0.274126,0 0.470872,0.1966 L 13.808452,6.536 Q 14,6.7172 14,7.0018 q 0,0.2795 -0.191548,0.471 l -3.368286,3.3693 q -0.201845,0.1915 -0.470872,0.1915 z"},deleteColumn:{width:14,height:14,path:"m 5.31971,13.9999 c 0.29019,0 0.52307,-0.1688 0.52307,-0.3789 l 0,-13.242 C 5.84278,0.169 5.6099,1e-4 5.31971,1e-4 l -4.79434,0 C 0.23528,1e-4 0,0.169 0,0.379 l 0,13.242 c 0,0.2101 0.23528,0.3789 0.52537,0.3789 l 4.79434,0 z m -0.68722,-1.1582 -3.4222,0 0,-3.2168 3.4222,0 0,3.2168 z m 0,-4.2852 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 0,-4.2832 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 1.76757,0.4266 q 0,-0.2558 0.17911,-0.4348 L 7.4492,3.3953 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 1.88081,1.8802 1.8808,-1.8802 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 0.87003,0.8698 Q 14,4.4441 14,4.6999 14,4.9557 13.82088,5.1348 l -1.8808,1.8802 1.8808,1.8802 Q 14,9.0742 14,9.33 14,9.5858 13.82088,9.7649 l -0.87003,0.8698 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 l -1.8808,-1.8802 -1.88081,1.8802 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 L 6.57917,9.7649 Q 6.40006,9.5858 6.40006,9.33 q 0,-0.2558 0.17911,-0.4348 L 8.45998,7.015 6.57917,5.1348 Q 6.40006,4.9557 6.40006,4.6999 Z"},addRowBefore:{width:14,height:14,path:"m 13.9999,8.6819 c 0,-0.2901 -0.1688,-0.5229 -0.3789,-0.5229 l -13.242,0 c -0.21,0 -0.3789,0.2328 -0.3789,0.5229 l 0,4.7928 c 0,0.29 0.1689,0.5252 0.3789,0.5252 l 13.242,0 c 0.2101,0 0.3789,-0.2352 0.3789,-0.5252 l 0,-4.7928 z m -1.1582,0.687 0,3.4211 -3.2168,0 0,-3.4211 3.2168,0 z m -4.2852,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m -4.2832,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m 6.7266,-5.337 q 0,0.264 -0.1915,0.4658 l -0.3882,0.3882 q -0.1966,0.1965 -0.4709,0.1965 -0.2795,0 -0.4658,-0.1965 l -1.5217,-1.5164 0,3.6436 q 0,0.2691 -0.194,0.4372 -0.1941,0.1683 -0.4684,0.1683 l -0.6625,0 Q 6.3626,7.6186 6.1685,7.4503 5.9744,7.2822 5.9744,7.0131 l 0,-3.6436 -1.5216,1.5164 Q 4.2665,5.0824 3.987,5.0824 3.7075,5.0824 3.5212,4.8859 L 3.133,4.4977 Q 2.9364,4.301 2.9364,4.0319 q 0,-0.2742 0.1966,-0.471 L 6.5023,0.1917 Q 6.6835,1e-4 6.9681,1e-4 q 0.2795,0 0.471,0.1916 l 3.3693,3.3692 q 0.1915,0.2019 0.1915,0.471 z"},addRowAfter:{width:14,height:14,path:"m 1e-4,5.3181 c 0,0.2901 0.1688,0.5229 0.3789,0.5229 l 13.242,0 c 0.21,0 0.3789,-0.2328 0.3789,-0.5229 l 0,-4.7928 C 13.9999,0.2353 13.831,1e-4 13.621,1e-4 l -13.242,0 C 0.1689,1e-4 1e-4,0.2353 1e-4,0.5253 l 0,4.7928 z m 1.1582,-0.687 0,-3.4211 3.2168,0 0,3.4211 -3.2168,0 z m 4.2852,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m 4.2832,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m -6.7266,5.337 q 0,-0.264 0.1915,-0.4658 L 3.5798,9.1141 q 0.1966,-0.1965 0.4709,-0.1965 0.2795,0 0.4658,0.1965 l 1.5217,1.5164 0,-3.6436 q 0,-0.2691 0.194,-0.4372 0.1941,-0.1683 0.4684,-0.1683 l 0.6625,0 q 0.2743,0 0.4684,0.1683 0.1941,0.1681 0.1941,0.4372 l 0,3.6436 1.5216,-1.5164 q 0.1863,-0.1965 0.4658,-0.1965 0.2795,0 0.4658,0.1965 l 0.3882,0.3882 q 0.1966,0.1967 0.1966,0.4658 0,0.2742 -0.1966,0.471 l -3.3693,3.3692 q -0.1812,0.1916 -0.4658,0.1916 -0.2795,0 -0.471,-0.1916 L 3.1916,10.4391 Q 3.0001,10.2372 3.0001,9.9681 Z"},deleteRow:{width:14,height:14,path:"m 13.9999,8.68029 c 0,-0.29019 -0.1688,-0.52307 -0.3789,-0.52307 l -13.242,0 c -0.21,0 -0.3789,0.23288 -0.3789,0.52307 l 0,4.79434 C 1e-4,13.76472 0.169,14 0.379,14 l 13.242,0 c 0.2101,0 0.3789,-0.23528 0.3789,-0.52537 l 0,-4.79434 z m -1.1582,0.68722 0,3.4222 -3.2168,0 0,-3.4222 3.2168,0 z m -4.2852,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z m -4.2832,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z M 4.6999,7.59994 q -0.2558,0 -0.4348,-0.17911 L 3.3953,6.5508 Q 3.2162,6.37168 3.2162,6.11579 q 0,-0.2559 0.1791,-0.43501 L 5.2755,3.79997 3.3953,1.91917 Q 3.2162,1.74005 3.2162,1.48416 q 0,-0.2559 0.1791,-0.43501 L 4.2651,0.17912 Q 4.4441,0 4.6999,0 4.9557,0 5.1348,0.17912 L 7.015,2.05992 8.8952,0.17912 Q 9.0742,0 9.33,0 9.5858,0 9.7649,0.17912 l 0.8698,0.87003 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 l -1.8802,1.8808 1.8802,1.88081 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 L 9.7649,7.42083 Q 9.5858,7.59994 9.33,7.59994 q -0.2558,0 -0.4348,-0.17911 L 7.015,5.54002 5.1348,7.42083 Q 4.9557,7.59994 4.6999,7.59994 Z"},mergeCells:{width:14,height:14,path:"m 6.491328,7.000195 -3.560223,0 c -0.137727,0 -0.256921,0.0503 -0.357583,0.15109 -0.100662,0.10057 -0.150992,0.21986 -0.150992,0.35759 0,0.13772 0.05033,0.25692 0.150992,0.35758 l 1.144344,1.14424 -2.63837,2.63847 c -0.05306,0.053 -0.0795,0.11393 -0.0795,0.18269 0,0.069 0.02643,0.12993 0.0795,0.18289 l 0.905858,0.90576 c 0.05306,0.053 0.113927,0.0794 0.18279,0.0794 0.06886,0 0.129827,-0.0264 0.182791,-0.0794 l 2.638369,-2.63837 1.144344,1.14435 c 0.100661,0.10056 0.219856,0.15099 0.357582,0.15099 0.137825,0 0.257019,-0.0504 0.357681,-0.15099 0.100662,-0.10057 0.150992,-0.21986 0.150992,-0.35759 l 0,-3.56022 c 0,-0.13773 -0.05033,-0.25702 -0.150894,-0.35748 -0.100662,-0.10067 -0.219856,-0.151 -0.357681,-0.151 z m 6.508673,-4.83185 c 0,-0.0689 -0.02653,-0.12973 -0.07959,-0.18279 l -0.905955,-0.90596 c -0.05296,-0.0531 -0.113829,-0.0795 -0.182693,-0.0795 -0.06896,0 -0.129826,0.0265 -0.18279,0.0795 L 9.010408,3.717965 7.86626,2.573625 c -0.100564,-0.10067 -0.219954,-0.151 -0.357681,-0.151 -0.137727,0 -0.256921,0.0503 -0.357583,0.151 -0.100661,0.10066 -0.150992,0.21985 -0.150992,0.35758 l 0,3.56022 c 0,0.13783 0.05033,0.25702 0.150992,0.35768 0.100662,0.10066 0.219856,0.151 0.357583,0.151 l 3.560223,0 c 0.137727,0 0.257117,-0.0503 0.357681,-0.151 0.100662,-0.10066 0.15109,-0.21985 0.15109,-0.35768 0,-0.13772 -0.05043,-0.25692 -0.15109,-0.35758 l -1.144344,-1.14434 2.638565,-2.63837 c 0.05277,-0.053 0.0793,-0.11393 0.0793,-0.18279 z"},splitCell:{width:14,height:14,path:"M 12.851703,1.14844 C 12.752843,1.04944 12.635563,1 12.500164,1 L 9.0001119,1 c -0.135399,0 -0.252483,0.0495 -0.35154,0.14844 -0.09886,0.099 -0.148344,0.21614 -0.148344,0.35154 0,0.1354 0.04948,0.25268 0.148344,0.35154 l 1.124908,1.125 -2.593779,2.59378 c -0.05207,0.0522 -0.07815,0.112 -0.07815,0.1797 0,0.0677 0.02608,0.12763 0.07815,0.1797 l 0.890644,0.89065 c 0.05207,0.0521 0.111905,0.0781 0.179701,0.0781 0.0677,0 0.127536,-0.026 0.179605,-0.0781 l 2.5938751,-2.59378 1.124811,1.12491 c 0.09906,0.099 0.216332,0.14853 0.351731,0.14853 0.135399,0 0.252579,-0.0496 0.351539,-0.14853 0.09887,-0.0989 0.148345,-0.21614 0.148345,-0.35154 l 0,-3.50006 c 9.6e-5,-0.13549 -0.0491,-0.25248 -0.148249,-0.35144 z M 5.9298469,7.17956 c -0.05207,-0.0521 -0.112001,-0.0781 -0.179701,-0.0781 -0.0677,0 -0.127632,0.026 -0.179701,0.0781 l -2.593779,2.59378 -1.125003,-1.1251 c -0.09896,-0.0988 -0.216044,-0.14835 -0.351539,-0.14835 -0.135495,0 -0.252675,0.0496 -0.351635,0.14835 -0.09896,0.099 -0.148441,0.21633 -0.148441,0.35173 l 0,3.50005 c 0,0.1354 0.04948,0.25258 0.148441,0.35154 C 1.2475489,12.95046 1.3647249,13 1.5001239,13 l 3.500052,0 c 0.135399,0 0.252579,-0.0496 0.351539,-0.14844 0.09896,-0.099 0.148441,-0.21614 0.148441,-0.35154 0,-0.1354 -0.04948,-0.25268 -0.148441,-0.35173 L 4.2267119,11.02348 6.8204909,8.4296 c 0.05207,-0.0521 0.07805,-0.1119 0.07805,-0.1797 0,-0.0677 -0.02608,-0.12753 -0.07805,-0.1797 L 5.9298469,7.17956 Z"},toggleHeaderColumn:{width:14,height:14,path:"m 4.42857,9.785715 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 1.642857 q -0.267857,0 -0.455357,-0.1875 Q 1,11.339285 1,11.071425 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.455357,-0.1875 H 3.78571 q 0.26786,0 0.45536,0.1875 0.1875,0.1875 0.1875,0.45536 z m 0,-3.42857 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 1.642857 Q 1.375,8.285715 1.1875,8.098215 1,7.910715 1,7.642855 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.455357,-0.1875 H 3.78571 q 0.26786,0 0.45536,0.1875 0.1875,0.1875 0.1875,0.45536 z M 13,9.785715 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 5.92857 q -0.26786,0 -0.45536,-0.1875 -0.1875,-0.1875 -0.1875,-0.45536 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.45536,-0.1875 h 6.42857 q 0.26786,0 0.45536,0.1875 Q 13,9.517855 13,9.785715 z M 4.42857,2.928575 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 1.642857 Q 1.375,4.857145 1.1875,4.669645 1,4.482145 1,4.214285 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.455357,-0.1875 H 3.78571 q 0.26786,0 0.45536,0.1875 0.1875,0.1875 0.1875,0.45536 z M 13,6.357145 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 5.92857 q -0.26786,0 -0.45536,-0.1875 -0.1875,-0.1875 -0.1875,-0.45536 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.45536,-0.1875 h 6.42857 q 0.26786,0 0.45536,0.1875 Q 13,6.089285 13,6.357145 z m 0,-3.42857 v 1.28571 q 0,0.26786 -0.1875,0.45536 -0.1875,0.1875 -0.45536,0.1875 H 5.92857 q -0.26786,0 -0.45536,-0.1875 -0.1875,-0.1875 -0.1875,-0.45536 v -1.28571 q 0,-0.26786 0.1875,-0.45536 0.1875,-0.1875 0.45536,-0.1875 h 6.42857 q 0.26786,0 0.45536,0.1875 Q 13,2.660715 13,2.928575 z"},toggleHeaderRow:{width:14,height:14,path:"m 6.53846,8.384615 v 2.76923 q 0,0.375 -0.27404,0.64904 -0.27404,0.27404 -0.64904,0.27404 H 1.923077 q -0.375,0 -0.649039,-0.27404 Q 1,11.528845 1,11.153845 v -2.76923 q 0,-0.375 0.274038,-0.64904 0.274039,-0.27403 0.649039,-0.27403 H 5.61538 q 0.375,0 0.64904,0.27403 0.27404,0.27404 0.27404,0.64904 z m 0,-5.53846 v 2.76923 q 0,0.375 -0.27404,0.64904 -0.27404,0.27404 -0.64904,0.27404 H 1.923077 q -0.375,0 -0.649039,-0.27404 Q 1,5.990385 1,5.615385 v -2.76923 q 0,-0.375 0.274038,-0.64904 0.274039,-0.27404 0.649039,-0.27404 H 5.61538 q 0.375,0 0.64904,0.27404 0.27404,0.27404 0.27404,0.64904 z M 13,8.384615 v 2.76923 q 0,0.375 -0.27404,0.64904 -0.27404,0.27404 -0.64904,0.27404 h -3.6923 q -0.375,0 -0.64904,-0.27404 -0.27404,-0.27404 -0.27404,-0.64904 v -2.76923 q 0,-0.375 0.27404,-0.64904 0.27404,-0.27403 0.64904,-0.27403 h 3.6923 q 0.375,0 0.64904,0.27403 Q 13,8.009615 13,8.384615 z m 0,-5.53846 v 2.76923 q 0,0.375 -0.27404,0.64904 -0.27404,0.27404 -0.64904,0.27404 h -3.6923 q -0.375,0 -0.64904,-0.27404 -0.27404,-0.27404 -0.27404,-0.64904 v -2.76923 q 0,-0.375 0.27404,-0.64904 0.27404,-0.27404 0.64904,-0.27404 h 3.6923 q 0.375,0 0.64904,0.27404 Q 13,2.471155 13,2.846155 z"},toggleHeaderCell:{width:14,height:14,path:"m 9.4146827,3.4683 0,-1.7198 -8.41468995,0 0,1.7198 3.19389995,0 0,8.7832 2.02689,0 0,-8.7832 3.1939,0 m 3.2817903,7.048 c 0.14907,0 0.24394,0.042 0.28459,0.1254 0.0407,0.084 0.0158,0.1841 -0.0745,0.3015 l -0.8538,1.0978 c -0.0904,0.1174 -0.20102,0.1761 -0.33203,0.1761 -0.131,0 -0.24168,-0.059 -0.33203,-0.1761 l -0.85379,-1.0978 c -0.0904,-0.1174 -0.1152,-0.2179 -0.0745,-0.3015 0.0407,-0.084 0.13552,-0.1254 0.2846,-0.1254 l 0.54209,0 0,-6.9387 -0.54209,0 c -0.14908,0 -0.24394,-0.042 -0.2846,-0.1254 -0.0407,-0.084 -0.0158,-0.1841 0.0745,-0.3015 l 0.85379,-1.0978 c 0.0904,-0.1174 0.20103,-0.1761 0.33203,-0.1761 0.13101,0 0.24168,0.059 0.33203,0.1761 l 0.8538,1.0978 c 0.0903,0.1174 0.11519,0.2179 0.0745,0.3015 -0.0406,0.084 -0.13552,0.1254 -0.28459,0.1254 l -0.54209,0 0,6.9387 z"},deleteTable:{width:14,height:14,path:"m 5.4999377,5.7501979 v 4.5001871 q 0,0.109505 -0.070503,0.179508 -0.070503,0.07 -0.1795074,0.0705 H 4.7499064 q -0.1095045,0 -0.1795075,-0.0705 -0.070003,-0.0705 -0.070503,-0.179508 V 5.7501979 q 0,-0.1095045 0.070503,-0.1795075 0.070503,-0.070003 0.1795075,-0.070503 h 0.5000209 q 0.1095045,0 0.1795074,0.070503 0.070003,0.070503 0.070503,0.1795075 z m 2.0000833,0 v 4.5001871 q 0,0.109505 -0.070503,0.179508 -0.070503,0.07 -0.1795075,0.0705 H 6.7499898 q -0.1095046,0 -0.1795075,-0.0705 -0.070003,-0.0705 -0.070503,-0.179508 V 5.7501979 q 0,-0.1095045 0.070503,-0.1795075 0.070503,-0.070003 0.1795075,-0.070503 h 0.5000208 q 0.1095046,0 0.1795075,0.070503 0.070003,0.070503 0.070503,0.1795075 z m 2.0000833,0 v 4.5001871 q 0,0.109505 -0.070503,0.179508 -0.070503,0.07 -0.1795075,0.0705 H 8.7500731 q -0.1095046,0 -0.1795075,-0.0705 -0.070003,-0.0705 -0.070503,-0.179508 V 5.7501979 q 0,-0.1095045 0.070503,-0.1795075 0.070503,-0.070003 0.1795075,-0.070503 H 9.250094 q 0.1095046,0 0.1795075,0.070503 0.070003,0.070503 0.070503,0.1795075 z M 10.500146,11.406934 V 4.000625 H 3.4998543 v 7.406309 q 0,0.172007 0.054502,0.316513 0.054502,0.144506 0.1135047,0.211009 0.059003,0.0665 0.082004,0.0665 h 6.500271 q 0.0235,0 0.082,-0.0665 0.0585,-0.0665 0.113504,-0.211009 0.055,-0.144506 0.0545,-0.316513 z M 5.2499273,3.0000833 H 8.7500731 L 8.3750575,2.0860453 Q 8.3205552,2.0155423 8.2420519,2.0000417 H 5.7654487 q -0.078003,0.015501 -0.1330055,0.086004 z m 7.2503017,0.2500105 v 0.5000208 q 0,0.1095046 -0.0705,0.1795075 -0.0705,0.070003 -0.179507,0.070503 h -0.750031 v 7.4063089 q 0,0.648527 -0.367016,1.121046 Q 10.766157,13 10.250136,13 H 3.7498648 Q 3.2343433,13 2.866828,12.542981 2.4993126,12.085962 2.4998127,11.437435 V 3.999625 H 1.7497814 q -0.1095046,0 -0.1795075,-0.070503 Q 1.500271,3.8586191 1.499771,3.7496146 V 3.2495937 q 0,-0.1095045 0.070503,-0.1795074 0.070503,-0.070003 0.1795075,-0.070503 H 4.163882 L 4.7109048,1.695029 Q 4.8279097,1.4060169 5.1329224,1.2030085 5.4379351,1 5.7499481,1 H 8.2500523 Q 8.5625653,1 8.867078,1.2030085 9.1715907,1.4060169 9.2890956,1.695029 l 0.5470227,1.3045543 h 2.4141007 q 0.109504,0 0.179507,0.070503 0.07,0.070503 0.0705,0.1795074 z"}},Tt=n(13),kt=n(21),Ot=n(12),xt=n(1),It=n(112),Dt=n(113),Mt=n(4),At=n(11),Rt=n(17);n(114),n(115);function Nt(e,t){var n,r={},o=t.menu;if((n=e.marks.strong)&&(r.toggleStrong=q(n,{title:"Toggle strong style",icon:Mt.icons.strong})),(n=e.marks.em)&&(r.toggleEm=q(n,{title:"Toggle emphasis",icon:Mt.icons.em})),r.clearMarks=new M.MenuItem({title:"Clear formatting, links",icon:Ne,enable:function(e){return null!=e.selection},run:function(e,t,n){t(e.tr.removeMark(e.selection.$from.pos,e.selection.$to.pos))}}),(n=e.marks.link)&&(r.toggleLink=Re(n,t.linkSelector)),(n=e.nodes.image)&&(r.insertImage=Ke(n)),(n=e.nodes.bullet_list)&&(r.wrapBulletList=z(n,{title:"Wrap in bullet list",icon:Mt.icons.bulletList})),(n=e.nodes.ordered_list)&&(r.wrapOrderedList=z(n,{title:"Wrap in ordered list",icon:Mt.icons.orderedList})),(n=e.nodes.blockquote)&&(r.wrapBlockQuote=Mt.wrapItem(n,{title:"Wrap in block quote",icon:Mt.icons.blockquote})),(n=e.nodes.paragraph)&&(r.makeParagraph=Mt.blockTypeItem(n,{title:"Change to paragraph",label:"Plain"})),(n=e.nodes.code_block)&&(r.makeCodeBlock=Mt.blockTypeItem(n,{title:"Change to code block",label:"Code"})),n=e.nodes.heading)for(var i=1;i<=10;i++)r["makeHead"+i]=Mt.blockTypeItem(n,{title:"Change to heading "+i,label:"Heading "+i,attrs:{level:i}});if(n=e.nodes.horizontal_rule){var s=n;r.insertHorizontalRule=new Mt.MenuItem({title:"Insert horizontal rule",label:"Horizontal rule",icon:{width:8,height:8,path:"M0 3v2h8v-2h-8z"},enable:function(e){return P(e,s)},run:function(e,t){t(e.tr.replaceSelectionWith(s.create()))}})}if((n=e.nodes.table)&&(r.insertTable=F(function(e,t,n){var r=b("<table><tr><td></td><td></td></tr></table>");return t&&(t(e.tr.replaceSelectionWith(r,!1)),n.focus()),!0},{label:"Table",title:"Insert table",icon:{width:8,height:8,path:"M0 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm-6 3v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm-6 3v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2z"}})),n=e.nodes.inline_shortcode){r.insertInlineShortcode=F(pt("show_field",{field:"text",id:"text"},e.nodes.inline_shortcode),{title:"Page field"}),r.insertBlockShortcode=F(pt("listing",{id:"text",source_id:"text"},e.nodes.block_shortcode),{title:"Content list"}),r.insertEmbed=F(pt("embed",{url:"text",width:"text",height:"text"},e.nodes.block_shortcode),{title:"Embed"})}r.viewSource=I(),r.editMarkdown=wt();var a=[r.insertEmbed,r.insertInlineShortcode,r.insertBlockShortcode],l=function(e){return e.filter(function(e){return e})};r.shortcodeMenu=new Mt.Dropdown(l(a),{label:"Shortcodes"});var c=[r.makeHead1,r.makeHead2,r.makeHead3,r.makeHead4,r.makeHead5,r.makeHead6,r.makeParagraph];o.pre&&c.push(r.makeCodeBlock),r.typeMenu=new Mt.Dropdown(l(c),{label:"Format..."});var u=[r.clearMarks,r.toggleStrong,r.toggleEm];o.insertlink&&u.push(r.toggleLink),o.insertimage&&u.push(r.insertImage),r.inlineMenu=[l(u)];var p=[r.insertHorizontalRule];return o.table&&p.push(r.insertTable),o.bulletlist&&p.push(r.wrapBulletList),o.orderedlist&&p.push(r.wrapOrderedList),p.push(r.wrapBlockQuote),p.push(Mt.joinUpItem),p.push(Mt.liftItem),p.push(Mt.selectParentNodeItem),o.shortcode&&p.push(r.shortcodeMenu),o.viewsource&&p.push(r.viewSource),r.blockMenu=[l(p)],r.fullMenu=r.inlineMenu.concat([[r.typeMenu]],[[Mt.undoItem,Mt.redoItem]],r.blockMenu),r}document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false");var Lt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Pt(e,t){var n,r={};function o(e,n){if(t){var o=t[e];if(!1===o)return;o&&(e=o)}r[e]=n}if(o("Mod-z",kt.undo),o("Shift-Mod-z",kt.redo),o("Backspace",Rt.undoInputRule),Lt||o("Mod-y",kt.redo),o("Alt-ArrowUp",Ot.joinUp),o("Alt-ArrowDown",Ot.joinDown),o("Mod-BracketLeft",Ot.lift),o("Escape",Ot.selectParentNode),(n=e.marks.strong)&&o("Mod-b",Ot.toggleMark(n)),(n=e.marks.em)&&o("Mod-i",Ot.toggleMark(n)),(n=e.marks.code)&&o("Mod-`",Ot.toggleMark(n)),(n=e.nodes.bullet_list)&&o("Shift-Ctrl-8",At.wrapInList(n)),(n=e.nodes.ordered_list)&&o("Shift-Ctrl-9",At.wrapInList(n)),(n=e.nodes.blockquote)&&o("Ctrl->",Ot.wrapIn(n)),n=e.nodes.hard_break){var i=n,s=Ot.chainCommands(Ot.exitCode,function(e,t){return t(e.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0});o("Mod-Enter",s),o("Shift-Enter",s),Lt&&o("Ctrl-Enter",s)}if((n=e.nodes.list_item)&&(o("Enter",At.splitListItem(n)),o("Mod-[",At.liftListItem(n)),o("Mod-]",At.sinkListItem(n))),(n=e.nodes.paragraph)&&o("Shift-Ctrl-0",Ot.setBlockType(n)),(n=e.nodes.code_block)&&o("Shift-Ctrl-\\",Ot.setBlockType(n)),n=e.nodes.heading)for(var a=1;a<=6;a++)o("Shift-Ctrl-"+a,Ot.setBlockType(n,{level:a}));if(n=e.nodes.horizontal_rule){var l=n;o("Mod-_",function(e,t){return t(e.tr.replaceSelectionWith(l.create()).scrollIntoView()),!0})}return r}function Ft(e){var t,n,r=[Rt.ellipsis,Rt.emDash];return(t=e.nodes.blockquote)&&r.push((n=t,Rt.wrappingInputRule(/^\s*>\s$/,n))),(t=e.nodes.ordered_list)&&r.push(function(e){return Rt.wrappingInputRule(/^(\d+)\.\s$/,e,function(e){return{order:+e[1]}},function(e,t){return t.childCount+t.attrs.order==+e[1]})}(t)),(t=e.nodes.bullet_list)&&r.push(function(e){return Rt.wrappingInputRule(/^\s*([-+*])\s$/,e)}(t)),(t=e.nodes.code_block)&&r.push(function(e){return Rt.textblockTypeInputRule(/^```$/,e)}(t)),(t=e.nodes.heading)&&r.push(function(e,t){return Rt.textblockTypeInputRule(new RegExp("^(#{1,"+t+"})\\s$"),e,function(e){return{level:e[1].length}})}(t,6)),(t=e.marks.code)&&r.push(B(/`([^`\\]+)` /,t)),(t=e.marks.strike)&&r.push(B(/~([^~\\]+)~ /,t)),(t=e.marks.em)&&r.push(B(/_([^_\\]+)_ /,t)),(t=e.marks.strong)&&r.push(B(/\*\*([^\*\\]+)\*\* /,t)),Rt.inputRules({rules:r})}function qt(e,t,n){var r,o,i,s=e.parentNode.getAttribute("data-prose-config"),a={menu:{insertlink:!0,insertimage:!0,bulletlist:!0,orderedlist:!0,quote:!0,paragraph:!0,pre:!0,hr:!0,table:!0,shortcode:!0,viewsource:!0},linkSelector:{internal:!0}};return s&&s.length>2&&(a=JSON.parse(s)),new Qe.EditorView(e,{state:_.EditorState.create({doc:(i=t,m.DOMParser.fromSchema(g).parse(i)),plugins:(r={schema:gt,menuBar:!0,settings:a||{menu:{},linkSelector:{}},history:!0},o=[Ft(r.schema),Tt.keymap(Pt(r.schema,r.mapKeys)),Tt.keymap(Ot.baseKeymap),It.dropCursor(),Dt.gapCursor(),tt,Et,Object(D.columnResizing)(),Object(D.tableEditing)(),Tt.keymap({Tab:Object(D.goToNextCell)(1),"Shift-Tab":Object(D.goToNextCell)(-1)})],!1!==r.menuBar&&o.push(Mt.menuBar({floating:!1!==r.floatingMenu,content:Nt(r.schema,r.settings).fullMenu})),!1!==r.history&&o.push(kt.history()),o.concat(new xt.Plugin({props:{attributes:{class:"ProseMirror-example-setup-style"}}})))}),nodeViews:{inline_shortcode:function(e,t,n){return new ut(e,t,n)},block_shortcode:function(e,t,n){return new ut(e,t,n)}},dispatchTransaction:function(e){this.updateState(this.state.apply(e));var t=w(this.state.doc);if(t!=n.value){n.value=t;var r=document.createEvent("Event");r.initEvent("change",!0,!0),n.dispatchEvent(r)}}})}window.addEventListener("load",function(){for(var e=[],t=document.querySelectorAll("div.ProseEditorField"),n=0;n<t.length;n++){var r=function(e){return qt(e.getElementsByClassName("ProseEditorFieldEditor")[0],e.getElementsByClassName("ProseEditorFieldValue")[0],e.getElementsByClassName("ProseEditorFieldStorage")[0])}(t[n]);e.push(r)}})}]);